/*! For license information please see appBundle.3f0278b0800ccdac71a4.js.LICENSE.txt */
(()=>{var t={146:(t,e,n)=>{"use strict";var r=n(363),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!=typeof n){if(p){var i=f(n);i&&i!==p&&t(e,i,r)}var a=u(n);d&&(a=a.concat(d(n)));for(var s=l(e),m=l(n),y=0;y<a.length;++y){var g=a[y];if(!(o[g]||r&&r[g]||m&&m[g]||s&&s[g])){var b=h(n,g);try{c(e,g,b)}catch(t){}}}}return e}},710:(t,e,n)=>{t.exports=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){return i(e[a][1][t]||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,i,a,s,l,c,u=[],d=0,h=t.length,f=h,p="string"!==r.getTypeOf(t);d<t.length;)f=h-d,i=p?(e=t[d++],n=d<h?t[d++]:0,d<h?t[d++]:0):(e=t.charCodeAt(d++),n=d<h?t.charCodeAt(d++):0,d<h?t.charCodeAt(d++):0),a=e>>2,s=(3&e)<<4|n>>4,l=1<f?(15&n)<<2|i>>6:64,c=2<f?63&i:64,u.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(c));return u.join("")},n.decode=function(t){var e,n,r,a,s,l,c=0,u=0,d="data:";if(t.substr(0,5)===d)throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(t=t.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&f--,t.charAt(t.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|f):new Array(0|f);c<t.length;)e=o.indexOf(t.charAt(c++))<<2|(a=o.indexOf(t.charAt(c++)))>>4,n=(15&a)<<4|(s=o.indexOf(t.charAt(c++)))>>2,r=(3&s)<<6|(l=o.indexOf(t.charAt(c++))),h[u++]=e,64!==s&&(h[u++]=n),64!==l&&(h[u++]=r);return h}},{"./support":30,"./utils":32}],2:[function(t,e,n){"use strict";var r=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),a=t("./stream/DataLengthProbe");function s(t,e,n,r,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var t=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,n){return t.pipe(new o).pipe(new a("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){"use strict";var r=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){"use strict";var r=t("./utils"),i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==r.getTypeOf(t)?function(t,e,n){var r=i,o=0+n;t^=-1;for(var a=0;a<o;a++)t=t>>>8^r[255&(t^e[a])];return~t}(0|e,t,t.length):function(t,e,n){var r=i,o=0+n;t^=-1;for(var a=0;a<o;a++)t=t>>>8^r[255&(t^e.charCodeAt(a))];return~t}(0|e,t,t.length):0}},{"./utils":32}],5:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){"use strict";var r;r="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:r}},{lie:37}],7:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),o=t("./utils"),a=t("./stream/GenericWorker"),s=r?"uint8array":"array";function l(t,e){a.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,t.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new l("Deflate",t)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){"use strict";function r(t,e){var n,r="";for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r}function i(t,e,n,i,a,u){var d,h,f=t.file,p=t.compression,m=u!==s.utf8encode,y=o.transformTo("string",u(f.name)),g=o.transformTo("string",s.utf8encode(f.name)),b=f.comment,v=o.transformTo("string",u(b)),w=o.transformTo("string",s.utf8encode(b)),_=g.length!==f.name.length,x=w.length!==b.length,E="",O="",I="",S=f.dir,A=f.date,L={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(L.crc32=t.crc32,L.compressedSize=t.compressedSize,L.uncompressedSize=t.uncompressedSize);var k=0;e&&(k|=8),m||!_&&!x||(k|=2048);var T=0,N=0;S&&(T|=16),"UNIX"===a?(N=798,T|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(f.unixPermissions,S)):(N=20,T|=function(t){return 63&(t||0)}(f.dosPermissions)),d=A.getUTCHours(),d<<=6,d|=A.getUTCMinutes(),d<<=5,d|=A.getUTCSeconds()/2,h=A.getUTCFullYear()-1980,h<<=4,h|=A.getUTCMonth()+1,h<<=5,h|=A.getUTCDate(),_&&(O=r(1,1)+r(l(y),4)+g,E+="up"+r(O.length,2)+O),x&&(I=r(1,1)+r(l(v),4)+w,E+="uc"+r(I.length,2)+I);var B="";return B+="\n\0",B+=r(k,2),B+=p.magic,B+=r(d,2),B+=r(h,2),B+=r(L.crc32,4),B+=r(L.compressedSize,4),B+=r(L.uncompressedSize,4),B+=r(y.length,2),B+=r(E.length,2),{fileRecord:c.LOCAL_FILE_HEADER+B+y+E,dirRecord:c.CENTRAL_FILE_HEADER+r(N,2)+B+r(v.length,2)+"\0\0\0\0"+r(T,4)+r(i,4)+y+E+v}}var o=t("../utils"),a=t("../stream/GenericWorker"),s=t("../utf8"),l=t("../crc32"),c=t("../signature");function u(t,e,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(u,a),u.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,a.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=i(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=i(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return c.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,i=function(t,e,n,i,a){var s=o.transformTo("string",a(i));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(t,2)+r(t,2)+r(e,4)+r(n,4)+r(s.length,2)+s}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},u.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(t){var e=this._sources;if(!a.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},u.prototype.lock=function(){a.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){"use strict";var r=t("../compressions"),i=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new i(e.streamFiles,n,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,n){a++;var i=function(t,e){var n=t||e,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,e.compression),s=n.options.compressionOptions||e.compressionOptions||{},l=n.dir,c=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:t,dir:l,date:c,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new r;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(t,e){return(new r).loadAsync(t,e)},r.external=t("./external"),e.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){"use strict";var r=t("./utils"),i=t("./external"),o=t("./utf8"),a=t("./zipEntries"),s=t("./stream/Crc32Probe"),l=t("./nodejsUtils");function c(t){return new i.Promise((function(e,n){var r=t.decompressed.getContentWorker().pipe(new s);r.on("error",(function(t){n(t)})).on("end",(function(){r.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=r.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new a(e);return n.load(t),n})).then((function(t){var n=[i.Promise.resolve(t)],r=t.files;if(e.checkCRC32)for(var o=0;o<r.length;o++)n.push(c(r[o]));return i.Promise.all(n)})).then((function(t){for(var i=t.shift(),o=i.files,a=0;a<o.length;a++){var s=o[a],l=s.fileNameStr,c=r.resolve(s.fileNameStr);n.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders}),s.dir||(n.file(c).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../stream/GenericWorker");function o(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}r.inherits(o,i),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){"use strict";var r=t("readable-stream").Readable;function i(t,e,n){r.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),n&&n(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"../utils":32,"readable-stream":16}],14:[function(t,e,n){"use strict";e.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){"use strict";function r(t,e,n){var r,i=o.getTypeOf(e),s=o.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(t=m(t)),s.createFolders&&(r=p(t))&&y.call(this,r,!0);var d="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!d),(e instanceof c&&0===e.uncompressedSize||s.dir||!e||0===e.length)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",i="string");var g;g=e instanceof c||e instanceof a?e:h.isNode&&h.isStream(e)?new f(t,e):o.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var b=new u(t,g,s);this.files[t]=b}var i=t("./utf8"),o=t("./utils"),a=t("./stream/GenericWorker"),s=t("./stream/StreamHelper"),l=t("./defaults"),c=t("./compressedObject"),u=t("./zipObject"),d=t("./generate"),h=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},m=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},y=function(t,e){return e=void 0!==e?e:l.createFolders,t=m(t),this.files[t]||r.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function g(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,r;for(e in this.files)r=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,r)},filter:function(t){var e=[];return this.forEach((function(n,r){t(n,r)&&e.push(r)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,r.call(this,t,e,n),this;if(g(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(g(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=y.call(this,e),r=this.clone();return r.root=n.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";e=d.generateWorker(this,n,r)}catch(t){(e=new a("error")).error(t)}return new s(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){"use strict";e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){"use strict";var r=t("./DataReader");function i(t){r.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),r=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){"use strict";var r=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return r.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":32}],19:[function(t,e,n){"use strict";var r=t("./Uint8ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){"use strict";var r=t("./DataReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){"use strict";var r=t("./ArrayReader");function i(t){r.call(this,t)}t("../utils").inherits(i,r),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){"use strict";var r=t("../utils"),i=t("../support"),o=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),l=t("./Uint8ArrayReader");e.exports=function(t){var e=r.getTypeOf(t);return r.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new s(t):i.uint8array?new l(r.transformTo("uint8array",t)):new o(r.transformTo("array",t)):new a(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../utils");function o(t){r.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(o,r),o.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){"use strict";var r=t("./GenericWorker"),i=t("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,r),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}r.inherits(o,i),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=r.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){"use strict";function r(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=r},{}],29:[function(t,e,n){"use strict";var r=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),a=t("../base64"),s=t("../support"),l=t("../external"),c=null;if(s.nodestream)try{c=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function u(t,e,n){var a=e;switch(e){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=e,this._mimeType=n,r.checkSupport(a),this._worker=t.pipe(new i(a)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}u.prototype={accumulate:function(t){return function(t,e){return new l.Promise((function(n,i){var o=[],s=t._internalType,l=t._outputType,c=t._mimeType;t.on("data",(function(t,n){o.push(t),e&&e(n)})).on("error",(function(t){o=[],i(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return r.newBlob(r.transformTo("arraybuffer",e),n);case"base64":return a.encode(e);default:return r.transformTo(t,e)}}(l,function(t,e){var n,r=0,i=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(o),n=0;n<e.length;n++)i.set(e[n],r),r+=e[n].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}(s,o),c);n(t)}catch(t){i(t)}o=[]})).resume()}))}(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){r.delay(e,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=u},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,e,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(t){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(t){n.blob=!1}}}try{n.nodestream=!!t("readable-stream").Readable}catch(t){n.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){"use strict";for(var r=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),a=t("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){a.call(this,"utf-8 decode"),this.leftOver=null}function u(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(t){return i.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,r,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=i.uint8array?new Uint8Array(l):new Array(l),o=a=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e}(t)},n.utf8decode=function(t){return i.nodebuffer?r.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,i,o,a=t.length,l=new Array(2*a);for(e=n=0;e<a;)if((i=t[e++])<128)l[n++]=i;else if(4<(o=s[i]))l[n++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&e<a;)i=i<<6|63&t[e++],o--;1<o?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(t=r.transformTo(i.uint8array?"uint8array":"array",t))},r.inherits(c,a),c.prototype.processChunk=function(t){var e=r.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var a=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}(e),l=e;a!==e.length&&(i.uint8array?(l=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(l=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:n.utf8decode(l),meta:t.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(u,a),u.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){"use strict";var r=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),a=t("./external");function s(t){return t}function l(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}t("setimmediate"),n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(t),r.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,n){var r=[],i=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?r.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function u(t){var e=65536,r=n.getTypeOf(t),i=!0;if("uint8array"===r?i=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=c.applyCanBeUsed.nodebuffer),i)for(;1<e;)try{return c.stringifyByChunk(t,r,e)}catch(t){e=Math.floor(e/2)}return c.stringifyByChar(t)}function d(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=u;var h={};h.string={string:s,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return h.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,o.allocBuffer(t.length))}},h.array={string:u,array:s,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},h.arraybuffer={string:function(t){return u(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:s,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},h.uint8array={string:u,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:s,nodebuffer:function(t){return o.newBufferFrom(t)}},h.nodebuffer={string:u,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return h.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:s},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var r=n.getTypeOf(e);return h[r][t](e)},n.resolve=function(t){for(var e=t.split("/"),n=[],r=0;r<e.length;r++){var i=e[r];"."===i||""===i&&0!==r&&r!==e.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":r.nodebuffer&&o.isBuffer(t)?"nodebuffer":r.uint8array&&t instanceof Uint8Array?"uint8array":r.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!r[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,r="";for(n=0;n<(t||"").length;n++)r+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return r},n.delay=function(t,e,n){setImmediate((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,o,s,c){return a.Promise.resolve(e).then((function(t){return r.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,n){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.onerror=function(t){n(t.target.error)},r.readAsArrayBuffer(t)})):t})).then((function(e){var u=n.getTypeOf(e);return u?("arraybuffer"===u?e=n.transformTo("uint8array",e):"string"===u&&(c?e=i.decode(e):o&&!0!==s&&(e=function(t){return l(t,r.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),a=t("./zipEntry"),s=t("./support");function l(t){this.files=[],this.loadOptions=t}l.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var r=this.reader.readString(4)===e;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",n=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=e-n;if(0<r)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(t){this.reader=r(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){"use strict";var r=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),l=t("./compressions"),c=t("./support");function u(t,e){this.options=t,this.loadOptions=e}u.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in l)if(Object.prototype.hasOwnProperty.call(l,e)&&l[e].magic===t)return l[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,n,r,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<i;)e=t.readInt(2),n=t.readInt(2),r=t.readData(n),this.extraFields[e]={id:e,length:n,value:r};t.setIndex(i)},handleUTF8:function(){var t=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=r(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=r(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){"use strict";function r(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),a=t("./utf8"),s=t("./compressedObject"),l=t("./stream/GenericWorker");r.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var r="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(e=e.pipe(new a.Utf8EncodeWorker)),!o&&r&&(e=e.pipe(new a.Utf8DecodeWorker))}catch(t){(e=new l("error")).error(t)}return new i(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof s&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;e.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,r){(function(t){"use strict";var n,r,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(u),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var l=new t.MessageChannel;l.port1.onmessage=u,n=function(){l.port2.postMessage(0)}}var c=[];function u(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}e.exports=function(t){1!==c.push(t)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){"use strict";var r=t("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&f(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(t,e,n){r((function(){var r;try{r=e(n)}catch(r){return o.reject(t,r)}r===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,r)}))}function h(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function r(e){n||(n=!0,o.reject(t,e))}function i(e){n||(n=!0,o.resolve(t,e))}var a=p((function(){e(i,r)}));"error"===a.status&&r(a.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=c).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===s?t:e,this.outcome):this.queue.push(new u(n,t,e)),n},u.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){d(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){o.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){d(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(h,e);if("error"===n.status)return o.reject(t,n.value);var r=n.value;if(r)f(t,r);else{t.state=s,t.outcome=e;for(var i=-1,a=t.queue.length;++i<a;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return o.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,c=new this(i);++l<n;)u(t[l],l);return c;function u(t,i){e.resolve(t).then((function(t){a[i]=t,++s!==n||r||(r=!0,o.resolve(c,a))}),(function(t){r||(r=!0,o.reject(c,t))}))}},c.race=function(t){if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var e=t.length,n=!1;if(!e)return this.resolve([]);for(var r,a=-1,s=new this(i);++a<e;)r=t[a],this.resolve(r).then((function(t){n||(n=!0,o.resolve(s,t))}),(function(t){n||(n=!0,o.reject(s,t))}));return s}},{immediate:36}],38:[function(t,e,n){"use strict";var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){"use strict";var r=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==n)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var u;if(u="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(n=r.deflateSetDictionary(this.strm,u)))throw new Error(a[n]);this._dict_set=!0}}function u(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}c.prototype.push=function(t,e){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,a))&&0!==n)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,0===n):2!==a||(this.onEnd(0),!(s.avail_out=0))},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=c,n.deflate=u,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,u(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,u(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){"use strict";var r=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),l=t("./zlib/zstream"),c=t("./zlib/gzheader"),u=Object.prototype.toString;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&!(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function h(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(t,e){var n,s,l,c,d,h,f=this.strm,p=this.options.chunkSize,m=this.options.dictionary,y=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(p),f.next_out=0,f.avail_out=p),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(h="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,h)),n===a.Z_BUF_ERROR&&!0===y&&(n=a.Z_OK,y=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(f.output,f.next_out),c=f.next_out-l,d=o.buf2string(f.output,l),f.next_out=c,f.avail_out=p-c,c&&i.arraySet(f.output,f.output,l,c,0),this.onData(d)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(y=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=d,n.inflate=h,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,h(t,e)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(e=r=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),e=i=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(t,e,n){"use strict";var r=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,n.string2buf=function(t){var e,n,i,o,a,s=t.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(l),o=a=0;a<l;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[a++]=n:(n<2048?e[a++]=192|n>>>6:(n<65536?e[a++]=224|n>>>12:(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63),e[a++]=128|n>>>6&63),e[a++]=128|63&n);return e},n.buf2binstring=function(t){return l(t,t.length)},n.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,r,i,o,s=e||t.length,c=new Array(2*s);for(n=r=0;n<s;)if((i=t[n++])<128)c[r++]=i;else if(4<(o=a[i]))c[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&t[n++],o--;1<o?c[r++]=65533:i<65536?c[r++]=i:(i-=65536,c[r++]=55296|i>>10&1023,c[r++]=56320|1023&i)}return l(c,r)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){for(var i=65535&t,o=t>>>16&65535,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+e[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16}},{}],44:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,i){var o=r,a=i+n;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return~t}},{}],46:[function(t,e,n){"use strict";var r,i=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),l=t("./messages"),c=-2,u=258,d=262,h=113;function f(t,e){return t.msg=l[e],e}function p(t){return(t<<1)-(4<t?9:0)}function m(t){for(var e=t.length;0<=--e;)t[e]=0}function y(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function g(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,y(t.strm)}function b(t,e){t.pending_buf[t.pending++]=e}function v(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function w(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-d?t.strstart-(t.w_size-d):0,c=t.window,h=t.w_mask,f=t.prev,p=t.strstart+u,m=c[o+a-1],y=c[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(c[(n=e)+a]===y&&c[n+a-1]===m&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<p);if(r=u-(p-o),o=p-u,a<r){if(t.match_start=e,s<=(a=r))break;m=c[o+a-1],y=c[o+a]}}}while((e=f[e&h])>l&&0!=--i);return a<=t.lookahead?a:t.lookahead}function _(t){var e,n,r,o,l,c,u,h,f,p,m=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=m+(m-d)){for(i.arraySet(t.window,t.window,m,m,0),t.match_start-=m,t.strstart-=m,t.block_start-=m,e=n=t.hash_size;r=t.head[--e],t.head[e]=m<=r?r-m:0,--n;);for(e=n=m;r=t.prev[--e],t.prev[e]=m<=r?r-m:0,--n;);o+=m}if(0===t.strm.avail_in)break;if(c=t.strm,u=t.window,h=t.strstart+t.lookahead,p=void 0,(f=o)<(p=c.avail_in)&&(p=f),n=0===p?0:(c.avail_in-=p,i.arraySet(u,c.input,c.next_in,p,h),1===c.state.wrap?c.adler=a(c.adler,u,p,h):2===c.state.wrap&&(c.adler=s(c.adler,u,p,h)),c.next_in+=p,c.total_in+=p,p),t.lookahead+=n,t.lookahead+t.insert>=3)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+3-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<d&&0!==t.strm.avail_in)}function x(t,e){for(var n,r;;){if(t.lookahead<d){if(_(t),t.lookahead<d&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-d&&(t.match_length=w(t,n)),t.match_length>=3)if(r=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function E(t,e){for(var n,r,i;;){if(t.lookahead<d){if(_(t),t.lookahead<d&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-d&&(t.match_length=w(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&4096<t.strstart-t.match_start)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-3,r=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(g(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=o._tr_tally(t,0,t.window[t.strstart-1]))&&g(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}function O(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),m(this.dyn_ltree),m(this.dyn_dtree),m(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),m(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),m(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function S(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:h,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):f(t,c)}function A(t){var e=S(t);return 0===e&&function(t){t.window_size=2*t.w_size,m(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),e}function L(t,e,n,r,o,a){if(!t)return c;var s=1;if(-1===e&&(e=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||9<o||8!==n||r<8||15<r||e<0||9<e||a<0||4<a)return f(t,c);8===r&&(r=9);var l=new I;return(t.state=l).strm=t,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=a,l.method=n,A(t)}r=[new O(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,g(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-d&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(g(t,!1),t.strm.avail_out),1)})),new O(4,4,8,4,x),new O(4,5,16,8,x),new O(4,6,32,32,x),new O(4,4,16,16,E),new O(8,16,32,32,E),new O(8,16,128,128,E),new O(8,32,128,256,E),new O(32,128,258,1024,E),new O(32,258,258,4096,E)],n.deflateInit=function(t,e){return L(t,e,8,15,8,0)},n.deflateInit2=L,n.deflateReset=A,n.deflateResetKeep=S,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?c:(t.state.gzhead=e,0):c},n.deflate=function(t,e){var n,i,a,l;if(!t||!t.state||5<e||e<0)return t?f(t,c):c;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return f(t,0===t.avail_out?-5:c);if(i.strm=t,n=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,b(i,31),b(i,139),b(i,8),i.gzhead?(b(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),b(i,255&i.gzhead.time),b(i,i.gzhead.time>>8&255),b(i,i.gzhead.time>>16&255),b(i,i.gzhead.time>>24&255),b(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),b(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(b(i,255&i.gzhead.extra.length),b(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(b(i,0),b(i,0),b(i,0),b(i,0),b(i,0),b(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),b(i,3),i.status=h);else{var d=8+(i.w_bits-8<<4)<<8;d|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(d|=32),d+=31-d%31,i.status=h,v(i,d),0!==i.strstart&&(v(i,t.adler>>>16),v(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),y(t),a=i.pending,i.pending!==i.pending_buf_size));)b(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),y(t),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,b(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),y(t),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,b(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&y(t),i.pending+2<=i.pending_buf_size&&(b(i,255&t.adler),b(i,t.adler>>8&255),t.adler=0,i.status=h)):i.status=h),0!==i.pending){if(y(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&p(e)<=p(n)&&4!==e)return f(t,-5);if(666===i.status&&0!==t.avail_in)return f(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var w=2===i.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var n,r,i,a,s=t.window;;){if(t.lookahead<=u){if(_(t),t.lookahead<=u&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&0<t.strstart&&(r=s[i=t.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=t.strstart+u;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);t.match_length=u-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(g(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(g(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(g(t,!1),0===t.strm.avail_out)?1:2}(i,e):r[i.level].func(i,e);if(3!==w&&4!==w||(i.status=666),1===w||3===w)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===w&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(m(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),y(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(b(i,255&t.adler),b(i,t.adler>>8&255),b(i,t.adler>>16&255),b(i,t.adler>>24&255),b(i,255&t.total_in),b(i,t.total_in>>8&255),b(i,t.total_in>>16&255),b(i,t.total_in>>24&255)):(v(i,t.adler>>>16),v(i,65535&t.adler)),y(t),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?0:1)},n.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&e!==h&&666!==e?f(t,c):(t.state=null,e===h?f(t,-3):0):c},n.deflateSetDictionary=function(t,e){var n,r,o,s,l,u,d,h,f=e.length;if(!t||!t.state)return c;if(2===(s=(n=t.state).wrap)||1===s&&42!==n.status||n.lookahead)return c;for(1===s&&(t.adler=a(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===s&&(m(n.head),n.strstart=0,n.block_start=0,n.insert=0),h=new i.Buf8(n.w_size),i.arraySet(h,e,f-n.w_size,n.w_size,0),e=h,f=n.w_size),l=t.avail_in,u=t.next_in,d=t.input,t.avail_in=f,t.next_in=0,t.input=e,_(n);n.lookahead>=3;){for(r=n.strstart,o=n.lookahead-2;n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=2,_(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=u,t.input=d,t.avail_in=l,n.wrap=s,0},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,o,a,s,l,c,u,d,h,f,p,m,y,g,b,v,w,_,x,E,O,I,S;n=t.state,r=t.next_in,I=t.input,i=r+(t.avail_in-5),o=t.next_out,S=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,d=n.wnext,h=n.window,f=n.hold,p=n.bits,m=n.lencode,y=n.distcode,g=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;t:do{p<15&&(f+=I[r++]<<p,p+=8,f+=I[r++]<<p,p+=8),v=m[f&g];e:for(;;){if(f>>>=w=v>>>24,p-=w,0==(w=v>>>16&255))S[o++]=65535&v;else{if(!(16&w)){if(!(64&w)){v=m[(65535&v)+(f&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=65535&v,(w&=15)&&(p<w&&(f+=I[r++]<<p,p+=8),_+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=I[r++]<<p,p+=8,f+=I[r++]<<p,p+=8),v=y[f&b];n:for(;;){if(f>>>=w=v>>>24,p-=w,!(16&(w=v>>>16&255))){if(!(64&w)){v=y[(65535&v)+(f&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&v,p<(w&=15)&&(f+=I[r++]<<p,(p+=8)<w&&(f+=I[r++]<<p,p+=8)),l<(x+=f&(1<<w)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=w,p-=w,(w=o-a)<x){if(u<(w=x-w)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(O=h,(E=0)===d){if(E+=c-w,w<_){for(_-=w;S[o++]=h[E++],--w;);E=o-x,O=S}}else if(d<w){if(E+=c+d-w,(w-=d)<_){for(_-=w;S[o++]=h[E++],--w;);if(E=0,d<_){for(_-=w=d;S[o++]=h[E++],--w;);E=o-x,O=S}}}else if(E+=d-w,w<_){for(_-=w;S[o++]=h[E++],--w;);E=o-x,O=S}for(;2<_;)S[o++]=O[E++],S[o++]=O[E++],S[o++]=O[E++],_-=3;_&&(S[o++]=O[E++],1<_&&(S[o++]=O[E++]))}else{for(E=o-x;S[o++]=S[E++],S[o++]=S[E++],S[o++]=S[E++],2<(_-=3););_&&(S[o++]=S[E++],1<_&&(S[o++]=S[E++]))}break}}break}}while(r<i&&o<s);r-=_=p>>3,f&=(1<<(p-=_<<3))-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=o<s?s-o+257:257-(o-s),n.hold=f,n.bits=p}},{}],49:[function(t,e,n){"use strict";var r=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees"),l=-2;function c(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function u(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function d(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(852),e.distcode=e.distdyn=new r.Buf32(592),e.sane=1,e.back=-1,0):l}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,d(t)):l}function f(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?l:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,h(t))):l}function p(t,e){var n,r;return t?(r=new u,(t.state=r).window=null,0!==(n=f(t,e))&&(t.state=null),n):l}var m,y,g=!0;function b(t){if(g){var e;for(m=new r.Buf32(512),y=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,y,0,t.work,{bits:5}),g=!1}t.lencode=m,t.lenbits=9,t.distcode=y,t.distbits=5}function v(t,e,n,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,e,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=h,n.inflateReset2=f,n.inflateResetKeep=d,n.inflateInit=function(t){return p(t,15)},n.inflateInit2=p,n.inflate=function(t,e){var n,u,d,h,f,p,m,y,g,w,_,x,E,O,I,S,A,L,k,T,N,B,C,M,D=0,P=new r.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return l;12===(n=t.state).mode&&(n.mode=13),f=t.next_out,d=t.output,m=t.avail_out,h=t.next_in,u=t.input,p=t.avail_in,y=n.hold,g=n.bits,w=p,_=m,B=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;g<16;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(2&n.wrap&&35615===y){P[n.check=0]=255&y,P[1]=y>>>8&255,n.check=o(n.check,P,2,0),g=y=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&y)<<8)+(y>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&y)){t.msg="unknown compression method",n.mode=30;break}if(g-=4,N=8+(15&(y>>>=4)),0===n.wbits)n.wbits=N;else if(N>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<N,t.adler=n.check=1,n.mode=512&y?10:12,g=y=0;break;case 2:for(;g<16;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(n.flags=y,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=y>>8&1),512&n.flags&&(P[0]=255&y,P[1]=y>>>8&255,n.check=o(n.check,P,2,0)),g=y=0,n.mode=3;case 3:for(;g<32;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}n.head&&(n.head.time=y),512&n.flags&&(P[0]=255&y,P[1]=y>>>8&255,P[2]=y>>>16&255,P[3]=y>>>24&255,n.check=o(n.check,P,4,0)),g=y=0,n.mode=4;case 4:for(;g<16;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}n.head&&(n.head.xflags=255&y,n.head.os=y>>8),512&n.flags&&(P[0]=255&y,P[1]=y>>>8&255,n.check=o(n.check,P,2,0)),g=y=0,n.mode=5;case 5:if(1024&n.flags){for(;g<16;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}n.length=y,n.head&&(n.head.extra_len=y),512&n.flags&&(P[0]=255&y,P[1]=y>>>8&255,n.check=o(n.check,P,2,0)),g=y=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(p<(x=n.length)&&(x=p),x&&(n.head&&(N=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,u,h,x,N)),512&n.flags&&(n.check=o(n.check,u,x,h)),p-=x,h+=x,n.length-=x),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===p)break t;for(x=0;N=u[h+x++],n.head&&N&&n.length<65536&&(n.head.name+=String.fromCharCode(N)),N&&x<p;);if(512&n.flags&&(n.check=o(n.check,u,x,h)),p-=x,h+=x,N)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===p)break t;for(x=0;N=u[h+x++],n.head&&N&&n.length<65536&&(n.head.comment+=String.fromCharCode(N)),N&&x<p;);if(512&n.flags&&(n.check=o(n.check,u,x,h)),p-=x,h+=x,N)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;g<16;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(y!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}g=y=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;g<32;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}t.adler=n.check=c(y),g=y=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=f,t.avail_out=m,t.next_in=h,t.avail_in=p,n.hold=y,n.bits=g,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){y>>>=7&g,g-=7&g,n.mode=27;break}for(;g<3;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}switch(n.last=1&y,g-=1,3&(y>>>=1)){case 0:n.mode=14;break;case 1:if(b(n),n.mode=20,6!==e)break;y>>>=2,g-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}y>>>=2,g-=2;break;case 14:for(y>>>=7&g,g-=7&g;g<32;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if((65535&y)!=(y>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&y,g=y=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(x=n.length){if(p<x&&(x=p),m<x&&(x=m),0===x)break t;r.arraySet(d,u,h,x,f),p-=x,h+=x,m-=x,f+=x,n.length-=x;break}n.mode=12;break;case 17:for(;g<14;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(n.nlen=257+(31&y),y>>>=5,g-=5,n.ndist=1+(31&y),y>>>=5,g-=5,n.ncode=4+(15&y),y>>>=4,g-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;g<3;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}n.lens[F[n.have++]]=7&y,y>>>=3,g-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,C={bits:n.lenbits},B=s(0,n.lens,0,19,n.lencode,0,n.work,C),n.lenbits=C.bits,B){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;S=(D=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,A=65535&D,!((I=D>>>24)<=g);){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(A<16)y>>>=I,g-=I,n.lens[n.have++]=A;else{if(16===A){for(M=I+2;g<M;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(y>>>=I,g-=I,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}N=n.lens[n.have-1],x=3+(3&y),y>>>=2,g-=2}else if(17===A){for(M=I+3;g<M;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}g-=I,N=0,x=3+(7&(y>>>=I)),y>>>=3,g-=3}else{for(M=I+7;g<M;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}g-=I,N=0,x=11+(127&(y>>>=I)),y>>>=7,g-=7}if(n.have+x>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;x--;)n.lens[n.have++]=N}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,C={bits:n.lenbits},B=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,C),n.lenbits=C.bits,B){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,C={bits:n.distbits},B=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,C),n.distbits=C.bits,B){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=p&&258<=m){t.next_out=f,t.avail_out=m,t.next_in=h,t.avail_in=p,n.hold=y,n.bits=g,a(t,_),f=t.next_out,d=t.output,m=t.avail_out,h=t.next_in,u=t.input,p=t.avail_in,y=n.hold,g=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;S=(D=n.lencode[y&(1<<n.lenbits)-1])>>>16&255,A=65535&D,!((I=D>>>24)<=g);){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(S&&!(240&S)){for(L=I,k=S,T=A;S=(D=n.lencode[T+((y&(1<<L+k)-1)>>L)])>>>16&255,A=65535&D,!(L+(I=D>>>24)<=g);){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}y>>>=L,g-=L,n.back+=L}if(y>>>=I,g-=I,n.back+=I,n.length=A,0===S){n.mode=26;break}if(32&S){n.back=-1,n.mode=12;break}if(64&S){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&S,n.mode=22;case 22:if(n.extra){for(M=n.extra;g<M;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}n.length+=y&(1<<n.extra)-1,y>>>=n.extra,g-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;S=(D=n.distcode[y&(1<<n.distbits)-1])>>>16&255,A=65535&D,!((I=D>>>24)<=g);){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(!(240&S)){for(L=I,k=S,T=A;S=(D=n.distcode[T+((y&(1<<L+k)-1)>>L)])>>>16&255,A=65535&D,!(L+(I=D>>>24)<=g);){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}y>>>=L,g-=L,n.back+=L}if(y>>>=I,g-=I,n.back+=I,64&S){t.msg="invalid distance code",n.mode=30;break}n.offset=A,n.extra=15&S,n.mode=24;case 24:if(n.extra){for(M=n.extra;g<M;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}n.offset+=y&(1<<n.extra)-1,y>>>=n.extra,g-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===m)break t;if(x=_-m,n.offset>x){if((x=n.offset-x)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}E=x>n.wnext?(x-=n.wnext,n.wsize-x):n.wnext-x,x>n.length&&(x=n.length),O=n.window}else O=d,E=f-n.offset,x=n.length;for(m<x&&(x=m),m-=x,n.length-=x;d[f++]=O[E++],--x;);0===n.length&&(n.mode=21);break;case 26:if(0===m)break t;d[f++]=n.length,m--,n.mode=21;break;case 27:if(n.wrap){for(;g<32;){if(0===p)break t;p--,y|=u[h++]<<g,g+=8}if(_-=m,t.total_out+=_,n.total+=_,_&&(t.adler=n.check=n.flags?o(n.check,d,_,f-_):i(n.check,d,_,f-_)),_=m,(n.flags?y:c(y))!==n.check){t.msg="incorrect data check",n.mode=30;break}g=y=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;g<32;){if(0===p)break t;p--,y+=u[h++]<<g,g+=8}if(y!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}g=y=0}n.mode=29;case 29:B=1;break t;case 30:B=-3;break t;case 31:return-4;default:return l}return t.next_out=f,t.avail_out=m,t.next_in=h,t.avail_in=p,n.hold=y,n.bits=g,(n.wsize||_!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&v(t,t.output,t.next_out,_-t.avail_out)?(n.mode=31,-4):(w-=t.avail_in,_-=t.avail_out,t.total_in+=w,t.total_out+=_,n.total+=_,n.wrap&&_&&(t.adler=n.check=n.flags?o(n.check,d,_,t.next_out-_):i(n.check,d,_,t.next_out-_)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==w&&0===_||4===e)&&0===B&&(B=-5),B)},n.inflateEnd=function(t){if(!t||!t.state)return l;var e=t.state;return e.window&&(e.window=null),t.state=null,0},n.inflateGetHeader=function(t,e){var n;return t&&t.state&&2&(n=t.state).wrap?((n.head=e).done=!1,0):l},n.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?l:11===n.mode&&i(1,e,r,0)!==n.check?-3:v(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,0):l},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){"use strict";var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,l,c,u,d,h){var f,p,m,y,g,b,v,w,_,x=h.bits,E=0,O=0,I=0,S=0,A=0,L=0,k=0,T=0,N=0,B=0,C=null,M=0,D=new r.Buf16(16),P=new r.Buf16(16),F=null,j=0;for(E=0;E<=15;E++)D[E]=0;for(O=0;O<l;O++)D[e[n+O]]++;for(A=x,S=15;1<=S&&0===D[S];S--);if(S<A&&(A=S),0===S)return c[u++]=20971520,c[u++]=20971520,h.bits=1,0;for(I=1;I<S&&0===D[I];I++);for(A<I&&(A=I),E=T=1;E<=15;E++)if(T<<=1,(T-=D[E])<0)return-1;if(0<T&&(0===t||1!==S))return-1;for(P[1]=0,E=1;E<15;E++)P[E+1]=P[E]+D[E];for(O=0;O<l;O++)0!==e[n+O]&&(d[P[e[n+O]]++]=O);if(b=0===t?(C=F=d,19):1===t?(C=i,M-=257,F=o,j-=257,256):(C=a,F=s,-1),E=I,g=u,k=O=B=0,m=-1,y=(N=1<<(L=A))-1,1===t&&852<N||2===t&&592<N)return 1;for(;;){for(v=E-k,_=d[O]<b?(w=0,d[O]):d[O]>b?(w=F[j+d[O]],C[M+d[O]]):(w=96,0),f=1<<E-k,I=p=1<<L;c[g+(B>>k)+(p-=f)]=v<<24|w<<16|_,0!==p;);for(f=1<<E-1;B&f;)f>>=1;if(0!==f?(B&=f-1,B+=f):B=0,O++,0==--D[E]){if(E===S)break;E=e[n+d[O]]}if(A<E&&(B&y)!==m){for(0===k&&(k=A),g+=I,T=1<<(L=E-k);L+k<S&&!((T-=D[L+k])<=0);)L++,T<<=1;if(N+=1<<L,1===t&&852<N||2===t&&592<N)return 1;c[m=B&y]=A<<24|L<<16|g-u}}return 0!==B&&(c[g+B]=E-k<<24|64<<16),h.bits=A,0}},{"../utils/common":41}],51:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){"use strict";var r=t("../utils/common");function i(t){for(var e=t.length;0<=--e;)t[e]=0}var o=256,a=286,s=30,l=15,c=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],u=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],h=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);i(f);var p=new Array(60);i(p);var m=new Array(512);i(m);var y=new Array(256);i(y);var g=new Array(29);i(g);var b,v,w,_=new Array(s);function x(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function E(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function O(t){return t<256?m[t]:m[256+(t>>>7)]}function I(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function S(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,I(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function A(t,e,n){S(t,n[2*e],n[2*e+1])}function L(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function k(t,e,n){var r,i,o=new Array(16),a=0;for(r=1;r<=l;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=L(o[s]++,s))}}function T(t){var e;for(e=0;e<a;e++)t.dyn_ltree[2*e]=0;for(e=0;e<s;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function N(t){8<t.bi_valid?I(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function B(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function C(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&B(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!B(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function M(t,e,n){var r,i,a,s,l=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===r?A(t,i,e):(A(t,(a=y[i])+o+1,e),0!==(s=c[a])&&S(t,i-=g[a],s),A(t,a=O(--r),n),0!==(s=u[a])&&S(t,r-=_[a],s)),l<t.last_lit;);A(t,256,e)}function D(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,c=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<c;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)C(t,o,n);for(i=c;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,C(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,o,a,s,c=e.dyn_tree,u=e.max_code,d=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,m=e.stat_desc.max_length,y=0;for(o=0;o<=l;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)m<(o=c[2*c[2*(r=t.heap[n])+1]+1]+1)&&(o=m,y++),c[2*r+1]=o,u<r||(t.bl_count[o]++,a=0,p<=r&&(a=f[r-p]),s=c[2*r],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(d[2*r+1]+a)));if(0!==y){do{for(o=m-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[m]--,y-=2}while(0<y);for(o=m;0!==o;o--)for(r=t.bl_count[o];0!==r;)u<(i=t.heap[--n])||(c[2*i+1]!==o&&(t.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}(t,e),k(o,u,t.bl_count)}function P(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<l&&i===a||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=i,c=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4))}function F(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<l&&i===a)){if(s<c)for(;A(t,i,t.bl_tree),0!=--s;);else 0!==i?(i!==o&&(A(t,i,t.bl_tree),s--),A(t,16,t.bl_tree),S(t,s-3,2)):s<=10?(A(t,17,t.bl_tree),S(t,s-3,3)):(A(t,18,t.bl_tree),S(t,s-11,7));o=i,c=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4)}}i(_);var j=!1;function R(t,e,n,i){S(t,0+(i?1:0),3),function(t,e,n){N(t),I(t,n),I(t,~n),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n)}n._tr_init=function(t){j||(function(){var t,e,n,r,i,o=new Array(16);for(r=n=0;r<28;r++)for(g[r]=n,t=0;t<1<<c[r];t++)y[n++]=r;for(y[n-1]=r,r=i=0;r<16;r++)for(_[r]=i,t=0;t<1<<u[r];t++)m[i++]=r;for(i>>=7;r<s;r++)for(_[r]=i<<7,t=0;t<1<<u[r]-7;t++)m[256+i++]=r;for(e=0;e<=l;e++)o[e]=0;for(t=0;t<=143;)f[2*t+1]=8,t++,o[8]++;for(;t<=255;)f[2*t+1]=9,t++,o[9]++;for(;t<=279;)f[2*t+1]=7,t++,o[7]++;for(;t<=287;)f[2*t+1]=8,t++,o[8]++;for(k(f,287,o),t=0;t<s;t++)p[2*t+1]=5,p[2*t]=L(t,5);b=new x(f,c,257,a,l),v=new x(p,u,0,s,l),w=new x(new Array(0),d,0,19,7)}(),j=!0),t.l_desc=new E(t.dyn_ltree,b),t.d_desc=new E(t.dyn_dtree,v),t.bl_desc=new E(t.bl_tree,w),t.bi_buf=0,t.bi_valid=0,T(t)},n._tr_stored_block=R,n._tr_flush_block=function(t,e,n,r){var i,a,s=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<o;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),D(t,t.l_desc),D(t,t.d_desc),s=function(t){var e;for(P(t,t.dyn_ltree,t.l_desc.max_code),P(t,t.dyn_dtree,t.d_desc.max_code),D(t,t.bl_desc),e=18;3<=e&&0===t.bl_tree[2*h[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=n+5,n+4<=i&&-1!==e?R(t,e,n,r):4===t.strategy||a===i?(S(t,2+(r?1:0),3),M(t,f,p)):(S(t,4+(r?1:0),3),function(t,e,n,r){var i;for(S(t,e-257,5),S(t,n-1,5),S(t,r-4,4),i=0;i<r;i++)S(t,t.bl_tree[2*h[i]+1],3);F(t,t.dyn_ltree,e-1),F(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),M(t,t.dyn_ltree,t.dyn_dtree)),T(t),r&&N(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(y[n]+o+1)]++,t.dyn_dtree[2*O(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){S(t,2,3),A(t,256,f),function(t){16===t.bi_valid?(I(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,r){(function(t){!function(t){"use strict";if(!t.setImmediate){var e,n,r,i,o=1,a={},s=!1,l=t.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(t);c=c&&c.setTimeout?c:t,e="[object process]"==={}.toString.call(t.process)?function(t){process.nextTick((function(){d(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(i="setImmediate$"+Math.random()+"$",t.addEventListener?t.addEventListener("message",h,!1):t.attachEvent("onmessage",h),function(e){t.postMessage(i+e,"*")}):t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){d(t.data)},function(t){r.port2.postMessage(t)}):l&&"onreadystatechange"in l.createElement("script")?(n=l.documentElement,function(t){var e=l.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):function(t){setTimeout(d,0,t)},c.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];var i={callback:t,args:n};return a[o]=i,e(o),o++},c.clearImmediate=u}function u(t){delete a[t]}function d(t){if(s)setTimeout(d,0,t);else{var e=a[t];if(e){s=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(undefined,n)}}(e)}finally{u(t),s=!1}}}}function h(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(i)&&d(+e.data.slice(i.length))}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},228:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,i){for(var o,a,s=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var c in o=Object(arguments[l]))n.call(o,c)&&(s[c]=o[c]);if(e){a=e(o);for(var u=0;u<a.length;u++)r.call(o,a[u])&&(s[a[u]]=o[a[u]])}}return s}},799:(t,e)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,v=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case u:case d:case o:case s:case a:case f:return t;default:switch(t=t&&t.$$typeof){case c:case h:case y:case m:case l:return t;default:return e}}case i:return e}}}function x(t){return _(t)===d}e.AsyncMode=u,e.ConcurrentMode=d,e.ContextConsumer=c,e.ContextProvider=l,e.Element=r,e.ForwardRef=h,e.Fragment=o,e.Lazy=y,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=f,e.isAsyncMode=function(t){return x(t)||_(t)===u},e.isConcurrentMode=x,e.isContextConsumer=function(t){return _(t)===c},e.isContextProvider=function(t){return _(t)===l},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return _(t)===h},e.isFragment=function(t){return _(t)===o},e.isLazy=function(t){return _(t)===y},e.isMemo=function(t){return _(t)===m},e.isPortal=function(t){return _(t)===i},e.isProfiler=function(t){return _(t)===s},e.isStrictMode=function(t){return _(t)===a},e.isSuspense=function(t){return _(t)===f},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===d||t===s||t===a||t===f||t===p||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===m||t.$$typeof===l||t.$$typeof===c||t.$$typeof===h||t.$$typeof===b||t.$$typeof===v||t.$$typeof===w||t.$$typeof===g)},e.typeOf=_},363:(t,e,n)=>{"use strict";t.exports=n(799)},287:(t,e,n)=>{"use strict";var r=n(228),i="function"==typeof Symbol&&Symbol.for;i&&Symbol.for("react.element"),i&&Symbol.for("react.portal"),i&&Symbol.for("react.fragment"),i&&Symbol.for("react.strict_mode"),i&&Symbol.for("react.profiler"),i&&Symbol.for("react.provider"),i&&Symbol.for("react.context"),i&&Symbol.for("react.forward_ref"),i&&Symbol.for("react.suspense"),i&&Symbol.for("react.memo"),i&&Symbol.for("react.lazy"),"function"==typeof Symbol&&Symbol.iterator;function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s={};function l(t,e,n){this.props=t,this.context=e,this.refs=s,this.updater=n||a}function c(){}function u(t,e,n){this.props=t,this.context=e,this.refs=s,this.updater=n||a}l.prototype.isReactComponent={},l.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(o(85));this.updater.enqueueSetState(this,t,e,"setState")},l.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},c.prototype=l.prototype;var d=u.prototype=new c;d.constructor=u,r(d,l.prototype),d.isPureReactComponent=!0;Object.prototype.hasOwnProperty;e.PureComponent=u},540:(t,e,n)=>{"use strict";t.exports=n(287)},465:function(t){t.exports=function(){"use strict";function t(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function e(e,n){return e.get(t(e,n))}function n(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}const r={},i=t=>new Promise((e=>{if(!t)return e();const n=window.scrollX,i=window.scrollY;r.restoreFocusTimeout=setTimeout((()=>{r.previousActiveElement instanceof HTMLElement?(r.previousActiveElement.focus(),r.previousActiveElement=null):document.body&&document.body.focus(),e()}),100),window.scrollTo(n,i)})),o="swal2-",a=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"].reduce(((t,e)=>(t[e]=o+e,t)),{}),s=["success","warning","info","question","error"].reduce(((t,e)=>(t[e]=o+e,t)),{}),l="SweetAlert2:",c=t=>t.charAt(0).toUpperCase()+t.slice(1),u=t=>{console.warn(`${l} ${"object"==typeof t?t.join(" "):t}`)},d=t=>{console.error(`${l} ${t}`)},h=[],f=(t,e=null)=>{var n;n=`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`,h.includes(n)||(h.push(n),u(n))},p=t=>"function"==typeof t?t():t,m=t=>t&&"function"==typeof t.toPromise,y=t=>m(t)?t.toPromise():Promise.resolve(t),g=t=>t&&Promise.resolve(t)===t,b=()=>document.body.querySelector(`.${a.container}`),v=t=>{const e=b();return e?e.querySelector(t):null},w=t=>v(`.${t}`),_=()=>w(a.popup),x=()=>w(a.icon),E=()=>w(a.title),O=()=>w(a["html-container"]),I=()=>w(a.image),S=()=>w(a["progress-steps"]),A=()=>w(a["validation-message"]),L=()=>v(`.${a.actions} .${a.confirm}`),k=()=>v(`.${a.actions} .${a.cancel}`),T=()=>v(`.${a.actions} .${a.deny}`),N=()=>v(`.${a.loader}`),B=()=>w(a.actions),C=()=>w(a.footer),M=()=>w(a["timer-progress-bar"]),D=()=>w(a.close),P=()=>{const t=_();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),n=Array.from(e).sort(((t,e)=>{const n=parseInt(t.getAttribute("tabindex")||"0"),r=parseInt(e.getAttribute("tabindex")||"0");return n>r?1:n<r?-1:0})),r=t.querySelectorAll('\n  a[href],\n  area[href],\n  input:not([disabled]),\n  select:not([disabled]),\n  textarea:not([disabled]),\n  button:not([disabled]),\n  iframe,\n  object,\n  embed,\n  [tabindex="0"],\n  [contenteditable],\n  audio[controls],\n  video[controls],\n  summary\n'),i=Array.from(r).filter((t=>"-1"!==t.getAttribute("tabindex")));return[...new Set(n.concat(i))].filter((t=>tt(t)))},F=()=>U(document.body,a.shown)&&!U(document.body,a["toast-shown"])&&!U(document.body,a["no-backdrop"]),j=()=>{const t=_();return!!t&&U(t,a.toast)},R=(t,e)=>{if(t.textContent="",e){const n=(new DOMParser).parseFromString(e,"text/html"),r=n.querySelector("head");r&&Array.from(r.childNodes).forEach((e=>{t.appendChild(e)}));const i=n.querySelector("body");i&&Array.from(i.childNodes).forEach((e=>{e instanceof HTMLVideoElement||e instanceof HTMLAudioElement?t.appendChild(e.cloneNode(!0)):t.appendChild(e)}))}},U=(t,e)=>{if(!e)return!1;const n=e.split(/\s+/);for(let e=0;e<n.length;e++)if(!t.classList.contains(n[e]))return!1;return!0},z=(t,e,n)=>{if(((t,e)=>{Array.from(t.classList).forEach((n=>{Object.values(a).includes(n)||Object.values(s).includes(n)||Object.values(e.showClass||{}).includes(n)||t.classList.remove(n)}))})(t,e),!e.customClass)return;const r=e.customClass[n];r&&("string"==typeof r||r.forEach?Y(t,r):u(`Invalid type of customClass.${n}! Expected string or iterable object, got "${typeof r}"`))},H=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${a.popup} > .${a[e]}`);case"checkbox":return t.querySelector(`.${a.popup} > .${a.checkbox} input`);case"radio":return t.querySelector(`.${a.popup} > .${a.radio} input:checked`)||t.querySelector(`.${a.popup} > .${a.radio} input:first-child`);case"range":return t.querySelector(`.${a.popup} > .${a.range} input`);default:return t.querySelector(`.${a.popup} > .${a.input}`)}},V=t=>{if(t.focus(),"file"!==t.type){const e=t.value;t.value="",t.value=e}},W=(t,e,n)=>{t&&e&&("string"==typeof e&&(e=e.split(/\s+/).filter(Boolean)),e.forEach((e=>{Array.isArray(t)?t.forEach((t=>{n?t.classList.add(e):t.classList.remove(e)})):n?t.classList.add(e):t.classList.remove(e)})))},Y=(t,e)=>{W(t,e,!0)},G=(t,e)=>{W(t,e,!1)},$=(t,e)=>{const n=Array.from(t.children);for(let t=0;t<n.length;t++){const r=n[t];if(r instanceof HTMLElement&&U(r,e))return r}},X=(t,e,n)=>{n===`${parseInt(n)}`&&(n=parseInt(n)),n||0===parseInt(n)?t.style.setProperty(e,"number"==typeof n?`${n}px`:n):t.style.removeProperty(e)},K=(t,e="flex")=>{t&&(t.style.display=e)},Z=t=>{t&&(t.style.display="none")},q=(t,e="block")=>{t&&new MutationObserver((()=>{Q(t,t.innerHTML,e)})).observe(t,{childList:!0,subtree:!0})},J=(t,e,n,r)=>{const i=t.querySelector(e);i&&i.style.setProperty(n,r)},Q=(t,e,n="flex")=>{e?K(t,n):Z(t)},tt=t=>!(!t||!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),et=t=>!!(t.scrollHeight>t.clientHeight),nt=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.getPropertyValue("animation-duration")||"0"),r=parseFloat(e.getPropertyValue("transition-duration")||"0");return n>0||r>0},rt=(t,e=!1)=>{const n=M();n&&tt(n)&&(e&&(n.style.transition="none",n.style.width="100%"),setTimeout((()=>{n.style.transition=`width ${t/1e3}s linear`,n.style.width="0%"}),10))},it=`\n <div aria-labelledby="${a.title}" aria-describedby="${a["html-container"]}" class="${a.popup}" tabindex="-1">\n   <button type="button" class="${a.close}"></button>\n   <ul class="${a["progress-steps"]}"></ul>\n   <div class="${a.icon}"></div>\n   <img class="${a.image}" />\n   <h2 class="${a.title}" id="${a.title}"></h2>\n   <div class="${a["html-container"]}" id="${a["html-container"]}"></div>\n   <input class="${a.input}" id="${a.input}" />\n   <input type="file" class="${a.file}" />\n   <div class="${a.range}">\n     <input type="range" />\n     <output></output>\n   </div>\n   <select class="${a.select}" id="${a.select}"></select>\n   <div class="${a.radio}"></div>\n   <label class="${a.checkbox}">\n     <input type="checkbox" id="${a.checkbox}" />\n     <span class="${a.label}"></span>\n   </label>\n   <textarea class="${a.textarea}" id="${a.textarea}"></textarea>\n   <div class="${a["validation-message"]}" id="${a["validation-message"]}"></div>\n   <div class="${a.actions}">\n     <div class="${a.loader}"></div>\n     <button type="button" class="${a.confirm}"></button>\n     <button type="button" class="${a.deny}"></button>\n     <button type="button" class="${a.cancel}"></button>\n   </div>\n   <div class="${a.footer}"></div>\n   <div class="${a["timer-progress-bar-container"]}">\n     <div class="${a["timer-progress-bar"]}"></div>\n   </div>\n </div>\n`.replace(/(^|\n)\s*/g,""),ot=()=>{r.currentInstance.resetValidationMessage()},at=t=>{const e=(()=>{const t=b();return!!t&&(t.remove(),G([document.documentElement,document.body],[a["no-backdrop"],a["toast-shown"],a["has-column"]]),!0)})();if("undefined"==typeof window||"undefined"==typeof document)return void d("SweetAlert2 requires document to initialize");const n=document.createElement("div");n.className=a.container,e&&Y(n,a["no-transition"]),R(n,it),n.dataset.swal2Theme=t.theme;const r="string"==typeof(i=t.target)?document.querySelector(i):i;var i;r.appendChild(n),t.topLayer&&(n.setAttribute("popover",""),n.showPopover()),(t=>{const e=_();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")})(t),(t=>{"rtl"===window.getComputedStyle(t).direction&&Y(b(),a.rtl)})(r),(()=>{const t=_(),e=$(t,a.input),n=$(t,a.file),r=t.querySelector(`.${a.range} input`),i=t.querySelector(`.${a.range} output`),o=$(t,a.select),s=t.querySelector(`.${a.checkbox} input`),l=$(t,a.textarea);e.oninput=ot,n.onchange=ot,o.onchange=ot,s.onchange=ot,l.oninput=ot,r.oninput=()=>{ot(),i.value=r.value},r.onchange=()=>{ot(),i.value=r.value}})()},st=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):"object"==typeof t?lt(t,e):t&&R(e,t)},lt=(t,e)=>{t.jquery?ct(e,t):R(e,t.toString())},ct=(t,e)=>{if(t.textContent="",0 in e)for(let n=0;n in e;n++)t.appendChild(e[n].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},ut=(t,e)=>{const n=B(),r=N();n&&r&&(e.showConfirmButton||e.showDenyButton||e.showCancelButton?K(n):Z(n),z(n,e,"actions"),function(t,e,n){const r=L(),i=T(),o=k();r&&i&&o&&(ht(r,"confirm",n),ht(i,"deny",n),ht(o,"cancel",n),function(t,e,n,r){r.buttonsStyling?(Y([t,e,n],a.styled),r.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",r.confirmButtonColor),r.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",r.denyButtonColor),r.cancelButtonColor&&n.style.setProperty("--swal2-cancel-button-background-color",r.cancelButtonColor),dt(t),dt(e),dt(n)):G([t,e,n],a.styled)}(r,i,o,n),n.reverseButtons&&(n.toast?(t.insertBefore(o,r),t.insertBefore(i,r)):(t.insertBefore(o,e),t.insertBefore(i,e),t.insertBefore(r,e))))}(n,r,e),R(r,e.loaderHtml||""),z(r,e,"loader"))};function dt(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const n=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${n}`))}function ht(t,e,n){const r=c(e);Q(t,n[`show${r}Button`],"inline-block"),R(t,n[`${e}ButtonText`]||""),t.setAttribute("aria-label",n[`${e}ButtonAriaLabel`]||""),t.className=a[e],z(t,n,`${e}Button`)}const ft=(t,e)=>{const n=b();n&&(function(t,e){"string"==typeof e?t.style.background=e:e||Y([document.documentElement,document.body],a["no-backdrop"])}(n,e.backdrop),function(t,e){e&&(e in a?Y(t,a[e]):(u('The "position" parameter is not valid, defaulting to "center"'),Y(t,a.center)))}(n,e.position),function(t,e){e&&Y(t,a[`grow-${e}`])}(n,e.grow),z(n,e,"container"))};var pt={innerParams:new WeakMap,domCache:new WeakMap};const mt=["input","file","range","select","radio","checkbox","textarea"],yt=t=>{if(!t.input)return;if(!Et[t.input])return void d(`Unexpected type of input! Expected ${Object.keys(Et).join(" | ")}, got "${t.input}"`);const e=_t(t.input);if(!e)return;const n=Et[t.input](e,t);K(e),t.inputAutoFocus&&setTimeout((()=>{V(n)}))},gt=(t,e)=>{const n=_();if(!n)return;const r=H(n,t);if(r){(t=>{for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;["id","type","value","style"].includes(n)||t.removeAttribute(n)}})(r);for(const t in e)r.setAttribute(t,e[t])}},bt=t=>{if(!t.input)return;const e=_t(t.input);e&&z(e,t,"input")},vt=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},wt=(t,e,n)=>{if(n.inputLabel){const r=document.createElement("label"),i=a["input-label"];r.setAttribute("for",t.id),r.className=i,"object"==typeof n.customClass&&Y(r,n.customClass.inputLabel),r.innerText=n.inputLabel,e.insertAdjacentElement("beforebegin",r)}},_t=t=>{const e=_();if(e)return $(e,a[t]||a.input)},xt=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:g(e)||u(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Et={};Et.text=Et.email=Et.password=Et.number=Et.tel=Et.url=Et.search=Et.date=Et["datetime-local"]=Et.time=Et.week=Et.month=(t,e)=>(xt(t,e.inputValue),wt(t,t,e),vt(t,e),t.type=e.input,t),Et.file=(t,e)=>(wt(t,t,e),vt(t,e),t),Et.range=(t,e)=>{const n=t.querySelector("input"),r=t.querySelector("output");return xt(n,e.inputValue),n.type=e.input,xt(r,e.inputValue),wt(n,t,e),t},Et.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const n=document.createElement("option");R(n,e.inputPlaceholder),n.value="",n.disabled=!0,n.selected=!0,t.appendChild(n)}return wt(t,t,e),t},Et.radio=t=>(t.textContent="",t),Et.checkbox=(t,e)=>{const n=H(_(),"checkbox");n.value="1",n.checked=Boolean(e.inputValue);const r=t.querySelector("span");return R(r,e.inputPlaceholder||e.inputLabel),n},Et.textarea=(t,e)=>{xt(t,e.inputValue),vt(t,e),wt(t,t,e);return setTimeout((()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(_()).width);new MutationObserver((()=>{if(!document.body.contains(t))return;const r=t.offsetWidth+(i=t,parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight));var i;r>n?_().style.width=`${r}px`:X(_(),"width",e.width)})).observe(t,{attributes:!0,attributeFilter:["style"]})}})),t};const Ot=(t,e)=>{const n=O();n&&(q(n),z(n,e,"htmlContainer"),e.html?(st(e.html,n),K(n,"block")):e.text?(n.textContent=e.text,K(n,"block")):Z(n),((t,e)=>{const n=_();if(!n)return;const r=pt.innerParams.get(t),i=!r||e.input!==r.input;mt.forEach((t=>{const r=$(n,a[t]);r&&(gt(t,e.inputAttributes),r.className=a[t],i&&Z(r))})),e.input&&(i&&yt(e),bt(e))})(t,e))},It=(t,e)=>{for(const[n,r]of Object.entries(s))e.icon!==n&&G(t,r);Y(t,e.icon&&s[e.icon]),Lt(t,e),St(),z(t,e,"icon")},St=()=>{const t=_();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),n=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let t=0;t<n.length;t++)n[t].style.backgroundColor=e},At=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let n=t.innerHTML,r="";e.iconHtml?r=kt(e.iconHtml):"success"===e.icon?(r=(t=>`\n  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}\n  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>\n  <div class="swal2-success-ring"></div>\n  ${t.animation?'<div class="swal2-success-fix"></div>':""}\n  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}\n`)(e),n=n.replace(/ style=".*?"/g,"")):"error"===e.icon?r='\n  <span class="swal2-x-mark">\n    <span class="swal2-x-mark-line-left"></span>\n    <span class="swal2-x-mark-line-right"></span>\n  </span>\n':e.icon&&(r=kt({question:"?",warning:"!",info:"i"}[e.icon])),n.trim()!==r.trim()&&R(t,r)},Lt=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const n of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])J(t,n,"background-color",e.iconColor);J(t,".swal2-success-ring","border-color",e.iconColor)}},kt=t=>`<div class="${a["icon-content"]}">${t}</div>`;let Tt=!1,Nt=0,Bt=0,Ct=0,Mt=0;const Dt=t=>{const e=_();if(t.target===e||x().contains(t.target)){Tt=!0;const n=jt(t);Nt=n.clientX,Bt=n.clientY,Ct=parseInt(e.style.insetInlineStart)||0,Mt=parseInt(e.style.insetBlockStart)||0,Y(e,"swal2-dragging")}},Pt=t=>{const e=_();if(Tt){let{clientX:n,clientY:r}=jt(t);e.style.insetInlineStart=`${Ct+(n-Nt)}px`,e.style.insetBlockStart=`${Mt+(r-Bt)}px`}},Ft=()=>{const t=_();Tt=!1,G(t,"swal2-dragging")},jt=t=>{let e=0,n=0;return t.type.startsWith("mouse")?(e=t.clientX,n=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,n=t.touches[0].clientY),{clientX:e,clientY:n}},Rt=(t,e)=>{const n=b(),r=_();if(n&&r){if(e.toast){X(n,"width",e.width),r.style.width="100%";const t=N();t&&r.insertBefore(t,x())}else X(r,"width",e.width);X(r,"padding",e.padding),e.color&&(r.style.color=e.color),e.background&&(r.style.background=e.background),Z(A()),Ut(r,e),e.draggable&&!e.toast?(Y(r,a.draggable),(t=>{t.addEventListener("mousedown",Dt),document.body.addEventListener("mousemove",Pt),t.addEventListener("mouseup",Ft),t.addEventListener("touchstart",Dt),document.body.addEventListener("touchmove",Pt),t.addEventListener("touchend",Ft)})(r)):(G(r,a.draggable),(t=>{t.removeEventListener("mousedown",Dt),document.body.removeEventListener("mousemove",Pt),t.removeEventListener("mouseup",Ft),t.removeEventListener("touchstart",Dt),document.body.removeEventListener("touchmove",Pt),t.removeEventListener("touchend",Ft)})(r))}},Ut=(t,e)=>{const n=e.showClass||{};t.className=`${a.popup} ${tt(t)?n.popup:""}`,e.toast?(Y([document.documentElement,document.body],a["toast-shown"]),Y(t,a.toast)):Y(t,a.modal),z(t,e,"popup"),"string"==typeof e.customClass&&Y(t,e.customClass),e.icon&&Y(t,a[`icon-${e.icon}`])},zt=t=>{const e=document.createElement("li");return Y(e,a["progress-step"]),R(e,t),e},Ht=t=>{const e=document.createElement("li");return Y(e,a["progress-step-line"]),t.progressStepsDistance&&X(e,"width",t.progressStepsDistance),e},Vt=(t,e)=>{Rt(0,e),ft(0,e),((t,e)=>{const n=S();if(!n)return;const{progressSteps:r,currentProgressStep:i}=e;r&&0!==r.length&&void 0!==i?(K(n),n.textContent="",i>=r.length&&u("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),r.forEach(((t,o)=>{const s=zt(t);if(n.appendChild(s),o===i&&Y(s,a["active-progress-step"]),o!==r.length-1){const t=Ht(e);n.appendChild(t)}}))):Z(n)})(0,e),((t,e)=>{const n=pt.innerParams.get(t),r=x();if(r){if(n&&e.icon===n.icon)return At(r,e),void It(r,e);if(e.icon||e.iconHtml){if(e.icon&&-1===Object.keys(s).indexOf(e.icon))return d(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),void Z(r);K(r),At(r,e),It(r,e),Y(r,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",St)}else Z(r)}})(t,e),((t,e)=>{const n=I();n&&(e.imageUrl?(K(n,""),n.setAttribute("src",e.imageUrl),n.setAttribute("alt",e.imageAlt||""),X(n,"width",e.imageWidth),X(n,"height",e.imageHeight),n.className=a.image,z(n,e,"image")):Z(n))})(0,e),((t,e)=>{const n=E();n&&(q(n),Q(n,e.title||e.titleText,"block"),e.title&&st(e.title,n),e.titleText&&(n.innerText=e.titleText),z(n,e,"title"))})(0,e),((t,e)=>{const n=D();n&&(R(n,e.closeButtonHtml||""),z(n,e,"closeButton"),Q(n,e.showCloseButton),n.setAttribute("aria-label",e.closeButtonAriaLabel||""))})(0,e),Ot(t,e),ut(0,e),((t,e)=>{const n=C();n&&(q(n),Q(n,e.footer,"block"),e.footer&&st(e.footer,n),z(n,e,"footer"))})(0,e);const n=_();"function"==typeof e.didRender&&n&&e.didRender(n),r.eventEmitter.emit("didRender",n)},Wt=()=>{var t;return null===(t=L())||void 0===t?void 0:t.click()},Yt=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Gt=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},$t=(t,e)=>{var n;const r=P();if(r.length)return-2===(t+=e)&&(t=r.length-1),t===r.length?t=0:-1===t&&(t=r.length-1),void r[t].focus();null===(n=_())||void 0===n||n.focus()},Xt=["ArrowRight","ArrowDown"],Kt=["ArrowLeft","ArrowUp"],Zt=(t,e,n)=>{t&&(e.isComposing||229===e.keyCode||(t.stopKeydownPropagation&&e.stopPropagation(),"Enter"===e.key?qt(e,t):"Tab"===e.key?Jt(e):[...Xt,...Kt].includes(e.key)?Qt(e.key):"Escape"===e.key&&te(e,t,n)))},qt=(t,e)=>{if(!p(e.allowEnterKey))return;const n=H(_(),e.input);if(t.target&&n&&t.target instanceof HTMLElement&&t.target.outerHTML===n.outerHTML){if(["textarea","file"].includes(e.input))return;Wt(),t.preventDefault()}},Jt=t=>{const e=t.target,n=P();let r=-1;for(let t=0;t<n.length;t++)if(e===n[t]){r=t;break}t.shiftKey?$t(r,-1):$t(r,1),t.stopPropagation(),t.preventDefault()},Qt=t=>{const e=B(),n=L(),r=T(),i=k();if(!(e&&n&&r&&i))return;const o=[n,r,i];if(document.activeElement instanceof HTMLElement&&!o.includes(document.activeElement))return;const a=Xt.includes(t)?"nextElementSibling":"previousElementSibling";let s=document.activeElement;if(s){for(let t=0;t<e.children.length;t++){if(s=s[a],!s)return;if(s instanceof HTMLButtonElement&&tt(s))break}s instanceof HTMLButtonElement&&s.focus()}},te=(t,e,n)=>{t.preventDefault(),p(e.allowEscapeKey)&&n(Yt.esc)};var ee={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const ne=()=>{Array.from(document.body.children).forEach((t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")}))},re="undefined"!=typeof window&&!!window.GestureEvent,ie=()=>{const t=b();if(!t)return;let e;t.ontouchstart=t=>{e=oe(t)},t.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},oe=t=>{const e=t.target,n=b(),r=O();return!(!n||!r||ae(t)||se(t)||e!==n&&(et(n)||!(e instanceof HTMLElement)||((t,e)=>{let n=t;for(;n&&n!==e;){if(et(n))return!0;n=n.parentElement}return!1})(e,r)||"INPUT"===e.tagName||"TEXTAREA"===e.tagName||et(r)&&r.contains(e)))},ae=t=>t.touches&&t.touches.length&&"stylus"===t.touches[0].touchType,se=t=>t.touches&&t.touches.length>1;let le=null;const ce=t=>{null===le&&(document.body.scrollHeight>window.innerHeight||"scroll"===t)&&(le=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${le+(()=>{const t=document.createElement("div");t.className=a["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e})()}px`)};function ue(t,e,n,o){j()?be(t,o):(i(n).then((()=>be(t,o))),Gt(r)),re?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),F()&&(null!==le&&(document.body.style.paddingRight=`${le}px`,le=null),(()=>{if(U(document.body,a.iosfix)){const t=parseInt(document.body.style.top,10);G(document.body,a.iosfix),document.body.style.top="",document.body.scrollTop=-1*t}})(),ne()),G([document.documentElement,document.body],[a.shown,a["height-auto"],a["no-backdrop"],a["toast-shown"]])}function de(t){t=me(t);const e=ee.swalPromiseResolve.get(this),n=he(this);this.isAwaitingPromise?t.isDismissed||(pe(this),e(t)):n&&e(t)}const he=t=>{const e=_();if(!e)return!1;const n=pt.innerParams.get(t);if(!n||U(e,n.hideClass.popup))return!1;G(e,n.showClass.popup),Y(e,n.hideClass.popup);const r=b();return G(r,n.showClass.backdrop),Y(r,n.hideClass.backdrop),ye(t,e,n),!0};function fe(t){const e=ee.swalPromiseReject.get(this);pe(this),e&&e(t)}const pe=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,pt.innerParams.get(t)||t._destroy())},me=t=>void 0===t?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),ye=(t,e,n)=>{var i;const o=b(),a=nt(e);"function"==typeof n.willClose&&n.willClose(e),null===(i=r.eventEmitter)||void 0===i||i.emit("willClose",e),a?ge(t,e,o,n.returnFocus,n.didClose):ue(t,o,n.returnFocus,n.didClose)},ge=(t,e,n,i,o)=>{r.swalCloseEventFinishedCallback=ue.bind(null,t,n,i,o);const a=function(t){var n;t.target===e&&(null===(n=r.swalCloseEventFinishedCallback)||void 0===n||n.call(r),delete r.swalCloseEventFinishedCallback,e.removeEventListener("animationend",a),e.removeEventListener("transitionend",a))};e.addEventListener("animationend",a),e.addEventListener("transitionend",a)},be=(t,e)=>{setTimeout((()=>{var n;"function"==typeof e&&e.bind(t.params)(),null===(n=r.eventEmitter)||void 0===n||n.emit("didClose"),t._destroy&&t._destroy()}))},ve=t=>{let e=_();if(e||new Qn,e=_(),!e)return;const n=N();j()?Z(x()):we(e,t),K(n),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},we=(t,e)=>{const n=B(),r=N();n&&r&&(!e&&tt(L())&&(e=L()),K(n),e&&(Z(e),r.setAttribute("data-button-to-replace",e.className),n.insertBefore(r,e)),Y([t,n],a.loading))},_e=t=>t.checked?1:0,xe=t=>t.checked?t.value:null,Ee=t=>t.files&&t.files.length?null!==t.getAttribute("multiple")?t.files:t.files[0]:null,Oe=(t,e)=>{const n=_();if(!n)return;const r=t=>{"select"===e.input?function(t,e,n){const r=$(t,a.select);if(!r)return;const i=(t,e,r)=>{const i=document.createElement("option");i.value=r,R(i,e),i.selected=Ae(r,n.inputValue),t.appendChild(i)};e.forEach((t=>{const e=t[0],n=t[1];if(Array.isArray(n)){const t=document.createElement("optgroup");t.label=e,t.disabled=!1,r.appendChild(t),n.forEach((e=>i(t,e[1],e[0])))}else i(r,n,e)})),r.focus()}(n,Se(t),e):"radio"===e.input&&function(t,e,n){const r=$(t,a.radio);if(!r)return;e.forEach((t=>{const e=t[0],i=t[1],o=document.createElement("input"),s=document.createElement("label");o.type="radio",o.name=a.radio,o.value=e,Ae(e,n.inputValue)&&(o.checked=!0);const l=document.createElement("span");R(l,i),l.className=a.label,s.appendChild(o),s.appendChild(l),r.appendChild(s)}));const i=r.querySelectorAll("input");i.length&&i[0].focus()}(n,Se(t),e)};m(e.inputOptions)||g(e.inputOptions)?(ve(L()),y(e.inputOptions).then((e=>{t.hideLoading(),r(e)}))):"object"==typeof e.inputOptions?r(e.inputOptions):d("Unexpected type of inputOptions! Expected object, Map or Promise, got "+typeof e.inputOptions)},Ie=(t,e)=>{const n=t.getInput();n&&(Z(n),y(e.inputValue).then((r=>{n.value="number"===e.input?`${parseFloat(r)||0}`:`${r}`,K(n),n.focus(),t.hideLoading()})).catch((e=>{d(`Error in inputValue promise: ${e}`),n.value="",K(n),n.focus(),t.hideLoading()})))};const Se=t=>{const e=[];return t instanceof Map?t.forEach(((t,n)=>{let r=t;"object"==typeof r&&(r=Se(r)),e.push([n,r])})):Object.keys(t).forEach((n=>{let r=t[n];"object"==typeof r&&(r=Se(r)),e.push([n,r])})),e},Ae=(t,e)=>!!e&&e.toString()===t.toString(),Le=(t,e)=>{const n=pt.innerParams.get(t);if(!n.input)return void d(`The "input" parameter is needed to be set when using returnInputValueOn${c(e)}`);const r=t.getInput(),i=((t,e)=>{const n=t.getInput();if(!n)return null;switch(e.input){case"checkbox":return _e(n);case"radio":return xe(n);case"file":return Ee(n);default:return e.inputAutoTrim?n.value.trim():n.value}})(t,n);n.inputValidator?ke(t,i,e):r&&!r.checkValidity()?(t.enableButtons(),t.showValidationMessage(n.validationMessage||r.validationMessage)):"deny"===e?Te(t,i):Ce(t,i)},ke=(t,e,n)=>{const r=pt.innerParams.get(t);t.disableInput(),Promise.resolve().then((()=>y(r.inputValidator(e,r.validationMessage)))).then((r=>{t.enableButtons(),t.enableInput(),r?t.showValidationMessage(r):"deny"===n?Te(t,e):Ce(t,e)}))},Te=(t,e)=>{const n=pt.innerParams.get(t||void 0);n.showLoaderOnDeny&&ve(T()),n.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then((()=>y(n.preDeny(e,n.validationMessage)))).then((n=>{!1===n?(t.hideLoading(),pe(t)):t.close({isDenied:!0,value:void 0===n?e:n})})).catch((e=>Be(t||void 0,e)))):t.close({isDenied:!0,value:e})},Ne=(t,e)=>{t.close({isConfirmed:!0,value:e})},Be=(t,e)=>{t.rejectPromise(e)},Ce=(t,e)=>{const n=pt.innerParams.get(t||void 0);n.showLoaderOnConfirm&&ve(),n.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then((()=>y(n.preConfirm(e,n.validationMessage)))).then((n=>{tt(A())||!1===n?(t.hideLoading(),pe(t)):Ne(t,void 0===n?e:n)})).catch((e=>Be(t||void 0,e)))):Ne(t,e)};function Me(){const t=pt.innerParams.get(this);if(!t)return;const e=pt.domCache.get(this);Z(e.loader),j()?t.icon&&K(x()):De(e),G([e.popup,e.actions],a.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const De=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?K(e[0],"inline-block"):!tt(L())&&!tt(T())&&!tt(k())&&Z(t.actions)};function Pe(){const t=pt.innerParams.get(this),e=pt.domCache.get(this);return e?H(e.popup,t.input):null}function Fe(t,e,n){const r=pt.domCache.get(t);e.forEach((t=>{r[t].disabled=n}))}function je(t,e){const n=_();if(n&&t)if("radio"===t.type){const t=n.querySelectorAll(`[name="${a.radio}"]`);for(let n=0;n<t.length;n++)t[n].disabled=e}else t.disabled=e}function Re(){Fe(this,["confirmButton","denyButton","cancelButton"],!1)}function Ue(){Fe(this,["confirmButton","denyButton","cancelButton"],!0)}function ze(){je(this.getInput(),!1)}function He(){je(this.getInput(),!0)}function Ve(t){const e=pt.domCache.get(this),n=pt.innerParams.get(this);R(e.validationMessage,t),e.validationMessage.className=a["validation-message"],n.customClass&&n.customClass.validationMessage&&Y(e.validationMessage,n.customClass.validationMessage),K(e.validationMessage);const r=this.getInput();r&&(r.setAttribute("aria-invalid","true"),r.setAttribute("aria-describedby",a["validation-message"]),V(r),Y(r,a.inputerror))}function We(){const t=pt.domCache.get(this);t.validationMessage&&Z(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),G(e,a.inputerror))}const Ye={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},Ge=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],$e={allowEnterKey:void 0},Xe=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Ke=t=>Object.prototype.hasOwnProperty.call(Ye,t),Ze=t=>-1!==Ge.indexOf(t),qe=t=>$e[t],Je=t=>{Ke(t)||u(`Unknown parameter "${t}"`)},Qe=t=>{Xe.includes(t)&&u(`The parameter "${t}" is incompatible with toasts`)},tn=t=>{const e=qe(t);e&&f(t,e)},en=t=>{!1===t.backdrop&&t.allowOutsideClick&&u('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&u(`Invalid theme "${t.theme}"`);for(const e in t)Je(e),t.toast&&Qe(e),tn(e)};function nn(t){const e=b(),n=_(),r=pt.innerParams.get(this);if(!n||U(n,r.hideClass.popup))return void u("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");const i=rn(t),o=Object.assign({},r,i);en(o),e.dataset.swal2Theme=o.theme,Vt(this,o),pt.innerParams.set(this,o),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const rn=t=>{const e={};return Object.keys(t).forEach((n=>{Ze(n)?e[n]=t[n]:u(`Invalid parameter to update: ${n}`)})),e};function on(){const t=pt.domCache.get(this),e=pt.innerParams.get(this);e?(t.popup&&r.swalCloseEventFinishedCallback&&(r.swalCloseEventFinishedCallback(),delete r.swalCloseEventFinishedCallback),"function"==typeof e.didDestroy&&e.didDestroy(),r.eventEmitter.emit("didDestroy"),an(this)):sn(this)}const an=t=>{sn(t),delete t.params,delete r.keydownHandler,delete r.keydownTarget,delete r.currentInstance},sn=t=>{t.isAwaitingPromise?(ln(pt,t),t.isAwaitingPromise=!0):(ln(ee,t),ln(pt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},ln=(t,e)=>{for(const n in t)t[n].delete(e)};var cn=Object.freeze({__proto__:null,_destroy:on,close:de,closeModal:de,closePopup:de,closeToast:de,disableButtons:Ue,disableInput:He,disableLoading:Me,enableButtons:Re,enableInput:ze,getInput:Pe,handleAwaitingPromise:pe,hideLoading:Me,rejectPromise:fe,resetValidationMessage:We,showValidationMessage:Ve,update:nn});const un=(t,e,n)=>{e.popup.onclick=()=>{t&&(dn(t)||t.timer||t.input)||n(Yt.close)}},dn=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let hn=!1;const fn=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(hn=!0)}}},pn=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(e){t.popup.onmouseup=()=>{},(e.target===t.popup||e.target instanceof HTMLElement&&t.popup.contains(e.target))&&(hn=!0)}}},mn=(t,e,n)=>{e.container.onclick=r=>{hn?hn=!1:r.target===e.container&&p(t.allowOutsideClick)&&n(Yt.backdrop)}},yn=t=>t instanceof Element||(t=>"object"==typeof t&&t.jquery)(t);const gn=()=>{if(r.timeout)return(()=>{const t=M();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const n=e/parseInt(window.getComputedStyle(t).width)*100;t.style.width=`${n}%`})(),r.timeout.stop()},bn=()=>{if(r.timeout){const t=r.timeout.start();return rt(t),t}};let vn=!1;const wn={};const _n=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const t in wn){const n=e.getAttribute(t);if(n)return void wn[t].fire({template:n})}};r.eventEmitter=new class{constructor(){this.events={}}_getHandlersByEventName(t){return void 0===this.events[t]&&(this.events[t]=[]),this.events[t]}on(t,e){const n=this._getHandlersByEventName(t);n.includes(e)||n.push(e)}once(t,e){const n=(...r)=>{this.removeListener(t,n),e.apply(this,r)};this.on(t,n)}emit(t,...e){this._getHandlersByEventName(t).forEach((t=>{try{t.apply(this,e)}catch(t){console.error(t)}}))}removeListener(t,e){const n=this._getHandlersByEventName(t),r=n.indexOf(e);r>-1&&n.splice(r,1)}removeAllListeners(t){void 0!==this.events[t]&&(this.events[t].length=0)}reset(){this.events={}}};var xn=Object.freeze({__proto__:null,argsToParams:t=>{const e={};return"object"!=typeof t[0]||yn(t[0])?["title","html","icon"].forEach(((n,r)=>{const i=t[r];"string"==typeof i||yn(i)?e[n]=i:void 0!==i&&d(`Unexpected type of ${n}! Expected "string" or "Element", got ${typeof i}`)})):Object.assign(e,t[0]),e},bindClickHandler:function(t="data-swal-template"){wn[t]=this,vn||(document.body.addEventListener("click",_n),vn=!0)},clickCancel:()=>{var t;return null===(t=k())||void 0===t?void 0:t.click()},clickConfirm:Wt,clickDeny:()=>{var t;return null===(t=T())||void 0===t?void 0:t.click()},enableLoading:ve,fire:function(...t){return new this(...t)},getActions:B,getCancelButton:k,getCloseButton:D,getConfirmButton:L,getContainer:b,getDenyButton:T,getFocusableElements:P,getFooter:C,getHtmlContainer:O,getIcon:x,getIconContent:()=>w(a["icon-content"]),getImage:I,getInputLabel:()=>w(a["input-label"]),getLoader:N,getPopup:_,getProgressSteps:S,getTimerLeft:()=>r.timeout&&r.timeout.getTimerLeft(),getTimerProgressBar:M,getTitle:E,getValidationMessage:A,increaseTimer:t=>{if(r.timeout){const e=r.timeout.increase(t);return rt(e,!0),e}},isDeprecatedParameter:qe,isLoading:()=>{const t=_();return!!t&&t.hasAttribute("data-loading")},isTimerRunning:()=>!(!r.timeout||!r.timeout.isRunning()),isUpdatableParameter:Ze,isValidParameter:Ke,isVisible:()=>tt(_()),mixin:function(t){return class extends(this){_main(e,n){return super._main(e,Object.assign({},t,n))}}},off:(t,e)=>{t?e?r.eventEmitter.removeListener(t,e):r.eventEmitter.removeAllListeners(t):r.eventEmitter.reset()},on:(t,e)=>{r.eventEmitter.on(t,e)},once:(t,e)=>{r.eventEmitter.once(t,e)},resumeTimer:bn,showLoading:ve,stopTimer:gn,toggleTimer:()=>{const t=r.timeout;return t&&(t.running?gn():bn())}});class En{constructor(t,e){this.callback=t,this.remaining=e,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=(new Date).getTime()-this.started.getTime()),this.remaining}increase(t){const e=this.running;return e&&this.stop(),this.remaining+=t,e&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const On=["swal-title","swal-html","swal-footer"],In=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach((t=>{Cn(t,["name","value"]);const n=t.getAttribute("name"),r=t.getAttribute("value");n&&r&&(e[n]="boolean"==typeof Ye[n]?"false"!==r:"object"==typeof Ye[n]?JSON.parse(r):r)})),e},Sn=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach((t=>{const n=t.getAttribute("name"),r=t.getAttribute("value");n&&r&&(e[n]=new Function(`return ${r}`)())})),e},An=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach((t=>{Cn(t,["type","color","aria-label"]);const n=t.getAttribute("type");n&&["confirm","cancel","deny"].includes(n)&&(e[`${n}ButtonText`]=t.innerHTML,e[`show${c(n)}Button`]=!0,t.hasAttribute("color")&&(e[`${n}ButtonColor`]=t.getAttribute("color")),t.hasAttribute("aria-label")&&(e[`${n}ButtonAriaLabel`]=t.getAttribute("aria-label")))})),e},Ln=t=>{const e={},n=t.querySelector("swal-image");return n&&(Cn(n,["src","width","height","alt"]),n.hasAttribute("src")&&(e.imageUrl=n.getAttribute("src")||void 0),n.hasAttribute("width")&&(e.imageWidth=n.getAttribute("width")||void 0),n.hasAttribute("height")&&(e.imageHeight=n.getAttribute("height")||void 0),n.hasAttribute("alt")&&(e.imageAlt=n.getAttribute("alt")||void 0)),e},kn=t=>{const e={},n=t.querySelector("swal-icon");return n&&(Cn(n,["type","color"]),n.hasAttribute("type")&&(e.icon=n.getAttribute("type")),n.hasAttribute("color")&&(e.iconColor=n.getAttribute("color")),e.iconHtml=n.innerHTML),e},Tn=t=>{const e={},n=t.querySelector("swal-input");n&&(Cn(n,["type","label","placeholder","value"]),e.input=n.getAttribute("type")||"text",n.hasAttribute("label")&&(e.inputLabel=n.getAttribute("label")),n.hasAttribute("placeholder")&&(e.inputPlaceholder=n.getAttribute("placeholder")),n.hasAttribute("value")&&(e.inputValue=n.getAttribute("value")));const r=Array.from(t.querySelectorAll("swal-input-option"));return r.length&&(e.inputOptions={},r.forEach((t=>{Cn(t,["value"]);const n=t.getAttribute("value");if(!n)return;const r=t.innerHTML;e.inputOptions[n]=r}))),e},Nn=(t,e)=>{const n={};for(const r in e){const i=e[r],o=t.querySelector(i);o&&(Cn(o,[]),n[i.replace(/^swal-/,"")]=o.innerHTML.trim())}return n},Bn=t=>{const e=On.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach((t=>{const n=t.tagName.toLowerCase();e.includes(n)||u(`Unrecognized element <${n}>`)}))},Cn=(t,e)=>{Array.from(t.attributes).forEach((n=>{-1===e.indexOf(n.name)&&u([`Unrecognized attribute "${n.name}" on <${t.tagName.toLowerCase()}>.`,e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."])}))},Mn=t=>{const e=b(),n=_();"function"==typeof t.willOpen&&t.willOpen(n),r.eventEmitter.emit("willOpen",n);const i=window.getComputedStyle(document.body).overflowY;jn(e,n,t),setTimeout((()=>{Pn(e,n)}),10),F()&&(Fn(e,t.scrollbarPadding,i),(()=>{const t=b();Array.from(document.body.children).forEach((e=>{e.contains(t)||(e.hasAttribute("aria-hidden")&&e.setAttribute("data-previous-aria-hidden",e.getAttribute("aria-hidden")||""),e.setAttribute("aria-hidden","true"))}))})()),j()||r.previousActiveElement||(r.previousActiveElement=document.activeElement),"function"==typeof t.didOpen&&setTimeout((()=>t.didOpen(n))),r.eventEmitter.emit("didOpen",n),G(e,a["no-transition"])},Dn=t=>{const e=_();if(t.target!==e)return;const n=b();e.removeEventListener("animationend",Dn),e.removeEventListener("transitionend",Dn),n.style.overflowY="auto"},Pn=(t,e)=>{nt(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",Dn),e.addEventListener("transitionend",Dn)):t.style.overflowY="auto"},Fn=(t,e,n)=>{(()=>{if(re&&!U(document.body,a.iosfix)){const t=document.body.scrollTop;document.body.style.top=-1*t+"px",Y(document.body,a.iosfix),ie()}})(),e&&"hidden"!==n&&ce(n),setTimeout((()=>{t.scrollTop=0}))},jn=(t,e,n)=>{Y(t,n.showClass.backdrop),n.animation?(e.style.setProperty("opacity","0","important"),K(e,"grid"),setTimeout((()=>{Y(e,n.showClass.popup),e.style.removeProperty("opacity")}),10)):K(e,"grid"),Y([document.documentElement,document.body],a.shown),n.heightAuto&&n.backdrop&&!n.toast&&Y([document.documentElement,document.body],a["height-auto"])};var Rn=(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),Un=(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL");function zn(t){(function(t){t.inputValidator||("email"===t.input&&(t.inputValidator=Rn),"url"===t.input&&(t.inputValidator=Un))})(t),t.showLoaderOnConfirm&&!t.preConfirm&&u("showLoaderOnConfirm is set to true, but preConfirm is not defined.\nshowLoaderOnConfirm should be used together with preConfirm, see usage example:\nhttps://sweetalert2.github.io/#ajax-request"),function(t){(!t.target||"string"==typeof t.target&&!document.querySelector(t.target)||"string"!=typeof t.target&&!t.target.appendChild)&&(u('Target parameter is not valid, defaulting to "body"'),t.target="body")}(t),"string"==typeof t.title&&(t.title=t.title.split("\n").join("<br />")),at(t)}let Hn;var Vn=new WeakMap;class Wn{constructor(...e){if(n(this,Vn,void 0),"undefined"==typeof window)return;Hn=this;const r=Object.freeze(this.constructor.argsToParams(e));var i,o,a;this.params=r,this.isAwaitingPromise=!1,i=Vn,o=this,a=this._main(Hn.params),i.set(t(i,o),a)}_main(t,e={}){if(en(Object.assign({},e,t)),r.currentInstance){const t=ee.swalPromiseResolve.get(r.currentInstance),{isAwaitingPromise:e}=r.currentInstance;r.currentInstance._destroy(),e||t({isDismissed:!0}),F()&&ne()}r.currentInstance=Hn;const n=Gn(t,e);zn(n),Object.freeze(n),r.timeout&&(r.timeout.stop(),delete r.timeout),clearTimeout(r.restoreFocusTimeout);const i=$n(Hn);return Vt(Hn,n),pt.innerParams.set(Hn,n),Yn(Hn,i,n)}then(t){return e(Vn,this).then(t)}finally(t){return e(Vn,this).finally(t)}}const Yn=(t,e,n)=>new Promise(((i,o)=>{const a=e=>{t.close({isDismissed:!0,dismiss:e})};ee.swalPromiseResolve.set(t,i),ee.swalPromiseReject.set(t,o),e.confirmButton.onclick=()=>{(t=>{const e=pt.innerParams.get(t);t.disableButtons(),e.input?Le(t,"confirm"):Ce(t,!0)})(t)},e.denyButton.onclick=()=>{(t=>{const e=pt.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?Le(t,"deny"):Te(t,!1)})(t)},e.cancelButton.onclick=()=>{((t,e)=>{t.disableButtons(),e(Yt.cancel)})(t,a)},e.closeButton.onclick=()=>{a(Yt.close)},((t,e,n)=>{t.toast?un(t,e,n):(fn(e),pn(e),mn(t,e,n))})(n,e,a),((t,e,n)=>{Gt(t),e.toast||(t.keydownHandler=t=>Zt(e,t,n),t.keydownTarget=e.keydownListenerCapture?window:_(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)})(r,n,a),((t,e)=>{"select"===e.input||"radio"===e.input?Oe(t,e):["text","email","number","tel","textarea"].some((t=>t===e.input))&&(m(e.inputValue)||g(e.inputValue))&&(ve(L()),Ie(t,e))})(t,n),Mn(n),Xn(r,n,a),Kn(e,n),setTimeout((()=>{e.container.scrollTop=0}))})),Gn=(t,e)=>{const n=(t=>{const e="string"==typeof t.template?document.querySelector(t.template):t.template;if(!e)return{};const n=e.content;return Bn(n),Object.assign(In(n),Sn(n),An(n),Ln(n),kn(n),Tn(n),Nn(n,On))})(t),r=Object.assign({},Ye,e,n,t);return r.showClass=Object.assign({},Ye.showClass,r.showClass),r.hideClass=Object.assign({},Ye.hideClass,r.hideClass),!1===r.animation&&(r.showClass={backdrop:"swal2-noanimation"},r.hideClass={}),r},$n=t=>{const e={popup:_(),container:b(),actions:B(),confirmButton:L(),denyButton:T(),cancelButton:k(),loader:N(),closeButton:D(),validationMessage:A(),progressSteps:S()};return pt.domCache.set(t,e),e},Xn=(t,e,n)=>{const r=M();Z(r),e.timer&&(t.timeout=new En((()=>{n("timer"),delete t.timeout}),e.timer),e.timerProgressBar&&(K(r),z(r,e,"timerProgressBar"),setTimeout((()=>{t.timeout&&t.timeout.running&&rt(e.timer)}))))},Kn=(t,e)=>{if(!e.toast)return p(e.allowEnterKey)?void(Zn(t)||qn(t,e)||$t(-1,1)):(f("allowEnterKey"),void Jn())},Zn=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&tt(t))return t.focus(),!0;return!1},qn=(t,e)=>e.focusDeny&&tt(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&tt(t.cancelButton)?(t.cancelButton.focus(),!0):!(!e.focusConfirm||!tt(t.confirmButton)||(t.confirmButton.focus(),0)),Jn=()=>{document.activeElement instanceof HTMLElement&&"function"==typeof document.activeElement.blur&&document.activeElement.blur()};if("undefined"!=typeof window&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const t=new Date,e=localStorage.getItem("swal-initiation");e?(t.getTime()-Date.parse(e))/864e5>3&&setTimeout((()=>{document.body.style.pointerEvents="none";const t=document.createElement("audio");t.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",t.loop=!0,document.body.appendChild(t),setTimeout((()=>{t.play().catch((()=>{}))}),2500)}),500):localStorage.setItem("swal-initiation",`${t}`)}Wn.prototype.disableButtons=Ue,Wn.prototype.enableButtons=Re,Wn.prototype.getInput=Pe,Wn.prototype.disableInput=He,Wn.prototype.enableInput=ze,Wn.prototype.hideLoading=Me,Wn.prototype.disableLoading=Me,Wn.prototype.showValidationMessage=Ve,Wn.prototype.resetValidationMessage=We,Wn.prototype.close=de,Wn.prototype.closePopup=de,Wn.prototype.closeModal=de,Wn.prototype.closeToast=de,Wn.prototype.rejectPromise=fe,Wn.prototype.update=nn,Wn.prototype._destroy=on,Object.assign(Wn,xn),Object.keys(cn).forEach((t=>{Wn[t]=function(...e){return Hn&&Hn[t]?Hn[t](...e):null}})),Wn.DismissReason=Yt,Wn.version="11.22.3";const Qn=Wn;return Qn.default=Qn,Qn}(),void 0!==this&&this.Sweetalert2&&(this.swal=this.sweetAlert=this.Swal=this.SweetAlert=this.Sweetalert2),"undefined"!=typeof document&&function(t,e){var n=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=e);else try{n.innerHTML=e}catch(t){n.innerText=e}}(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.1s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px $swal2-outline-color;--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}')}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";class t extends Error{}function e(e,n){if("string"!=typeof e)throw new t("Invalid token specified: must be a string");n||(n={});const r=!0===n.header?0:1,i=e.split(".")[r];if("string"!=typeof i)throw new t(`Invalid token specified: missing part #${r+1}`);let o;try{o=function(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(t){return decodeURIComponent(atob(t).replace(/(.)/g,((t,e)=>{let n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(e)}catch(t){return atob(e)}}(i)}catch(e){throw new t(`Invalid token specified: invalid base64 for part #${r+1} (${e.message})`)}try{return JSON.parse(o)}catch(e){throw new t(`Invalid token specified: invalid json for part #${r+1} (${e.message})`)}}t.prototype.name="InvalidTokenError";const r="http://127.0.0.1:8000/api/v1/";n(146);var i,o,a,s,l,c,u,d,h,f,p,m,y,g,b,v,w,_,x=n(540);(o=i||(i={}))[o.V1=0]="V1",o[o.V2=1]="V2",o[o.V3=2]="V3",o[o.V4=3]="V4",o[o.V5=4]="V5",(s=a||(a={}))[s.Sparse=0]="Sparse",s[s.Dense=1]="Dense",(c=l||(l={}))[c.HALF=0]="HALF",c[c.SINGLE=1]="SINGLE",c[c.DOUBLE=2]="DOUBLE",(d=u||(u={}))[d.DAY=0]="DAY",d[d.MILLISECOND=1]="MILLISECOND",(f=h||(h={}))[f.SECOND=0]="SECOND",f[f.MILLISECOND=1]="MILLISECOND",f[f.MICROSECOND=2]="MICROSECOND",f[f.NANOSECOND=3]="NANOSECOND",(m=p||(p={}))[m.YEAR_MONTH=0]="YEAR_MONTH",m[m.DAY_TIME=1]="DAY_TIME",m[m.MONTH_DAY_NANO=2]="MONTH_DAY_NANO",(g=y||(y={}))[g.NONE=0]="NONE",g[g.Schema=1]="Schema",g[g.DictionaryBatch=2]="DictionaryBatch",g[g.RecordBatch=3]="RecordBatch",g[g.Tensor=4]="Tensor",g[g.SparseTensor=5]="SparseTensor",(v=b||(b={}))[v.NONE=0]="NONE",v[v.Null=1]="Null",v[v.Int=2]="Int",v[v.Float=3]="Float",v[v.Binary=4]="Binary",v[v.Utf8=5]="Utf8",v[v.Bool=6]="Bool",v[v.Decimal=7]="Decimal",v[v.Date=8]="Date",v[v.Time=9]="Time",v[v.Timestamp=10]="Timestamp",v[v.Interval=11]="Interval",v[v.List=12]="List",v[v.Struct=13]="Struct",v[v.Union=14]="Union",v[v.FixedSizeBinary=15]="FixedSizeBinary",v[v.FixedSizeList=16]="FixedSizeList",v[v.Map=17]="Map",v[v.Dictionary=-1]="Dictionary",v[v.Int8=-2]="Int8",v[v.Int16=-3]="Int16",v[v.Int32=-4]="Int32",v[v.Int64=-5]="Int64",v[v.Uint8=-6]="Uint8",v[v.Uint16=-7]="Uint16",v[v.Uint32=-8]="Uint32",v[v.Uint64=-9]="Uint64",v[v.Float16=-10]="Float16",v[v.Float32=-11]="Float32",v[v.Float64=-12]="Float64",v[v.DateDay=-13]="DateDay",v[v.DateMillisecond=-14]="DateMillisecond",v[v.TimestampSecond=-15]="TimestampSecond",v[v.TimestampMillisecond=-16]="TimestampMillisecond",v[v.TimestampMicrosecond=-17]="TimestampMicrosecond",v[v.TimestampNanosecond=-18]="TimestampNanosecond",v[v.TimeSecond=-19]="TimeSecond",v[v.TimeMillisecond=-20]="TimeMillisecond",v[v.TimeMicrosecond=-21]="TimeMicrosecond",v[v.TimeNanosecond=-22]="TimeNanosecond",v[v.DenseUnion=-23]="DenseUnion",v[v.SparseUnion=-24]="SparseUnion",v[v.IntervalDayTime=-25]="IntervalDayTime",v[v.IntervalYearMonth=-26]="IntervalYearMonth",(_=w||(w={}))[_.OFFSET=0]="OFFSET",_[_.DATA=1]="DATA",_[_.VALIDITY=2]="VALIDITY",_[_.TYPE=3]="TYPE";const[E,O]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[I,S]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[A,L]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),k=t=>"boolean"==typeof t,T=t=>"function"==typeof t,N=t=>null!=t&&Object(t)===t,B=t=>N(t)&&T(t.then),C=t=>N(t)&&T(t[Symbol.iterator]),M=t=>N(t)&&T(t[Symbol.asyncIterator]),D=t=>N(t)&&N(t.schema),P=t=>N(t)&&"done"in t&&"value"in t,F=t=>N(t)&&T(t.stat)&&(t=>"number"==typeof t)(t.fd),j=t=>N(t)&&U(t.body),R=t=>"_getDOMStream"in t&&"_getNodeStream"in t,U=t=>N(t)&&T(t.cancel)&&T(t.getReader)&&!R(t),z=t=>N(t)&&T(t.read)&&T(t.pipe)&&k(t.readable)&&!R(t);function H(t){if(null===t)return"null";if(void 0===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof I||t instanceof A?`[${[...t].map((t=>H(t)))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,((t,e)=>"bigint"==typeof e?`${e}`:e))}function V(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function s(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((r=r.apply(t,e||[])).next())}))}function W(t){return this instanceof W?(this.v=t,this):new W(t)}function Y(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(t){return function(e){return Promise.resolve(e).then(t,c)}})),r[Symbol.asyncIterator]=function(){return this},r;function a(t,e){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))},e&&(r[t]=e(r[t])))}function s(t,e){try{(n=i[t](e)).value instanceof W?Promise.resolve(n.value.v).then(l,c):u(o[0][2],n)}catch(t){u(o[0][3],t)}var n}function l(t){s("next",t)}function c(t){s("throw",t)}function u(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function G(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:W(t[r](e)),done:!1}:i?i(e):e}:i}}function $(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;const X=new TextDecoder("utf-8"),K=t=>X.decode(t),Z=new TextEncoder,q=t=>Z.encode(t),J="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Q(t,e,n=0,r=e.byteLength){const i=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,i),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(r,i));return o.set(a,n),t}function tt(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,r,i,o;for(let a,s,l=0,c=0,u=t.length;++l<u;)a=e[c],s=t[l],!a||!s||a.buffer!==s.buffer||s.byteOffset<a.byteOffset?s&&(e[++c]=s):(({byteOffset:n,byteLength:i}=a),({byteOffset:r,byteLength:o}=s),n+i<r||r+o<n?s&&(e[++c]=s):e[c]=new Uint8Array(a.buffer,n,r-n+o));return e}(t),r=n.reduce(((t,e)=>t+e.byteLength),0);let i,o,a,s=0,l=-1;const c=Math.min(e||Number.POSITIVE_INFINITY,r);for(const t=n.length;++l<t;){if(i=n[l],o=i.subarray(0,Math.min(i.length,c-s)),c<=s+o.length){o.length<i.length?n[l]=i.subarray(o.length):o.length===i.length&&l++,a?Q(a,o,s):a=o;break}Q(a||(a=new Uint8Array(c)),o,s),s+=o.length}return[a||new Uint8Array(0),n.slice(l),r-(a?a.byteLength:0)]}function et(t,e){let n=P(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=q(n)),n instanceof ArrayBuffer||n instanceof J?new t(n):N(r=n)&&T(r.clear)&&T(r.bytes)&&T(r.position)&&T(r.setPosition)&&T(r.capacity)&&T(r.getBufferIdentifier)&&T(r.createLong)?et(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0);var r}const nt=t=>et(Int32Array,t),rt=t=>et(Uint8Array,t),it=t=>(t.next(),t);function ot(t,e){return Y(this,arguments,(function*(){if(B(e))return yield W(yield W(yield*G($(ot(t,yield W(e))))));const n=function(t){return Y(this,arguments,(function*(){yield yield W(yield W(t))}))},r="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof J?n(e):C(e)?function(t){return Y(this,arguments,(function*(){yield W(yield*G($(it(function*(t){let e=null;do{e=t.next(yield null==e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):M(e)?e:n(e);return yield W(yield*G($(it(function(e){return Y(this,arguments,(function*(){let n=null;do{n=yield W(e.next(yield yield W(et(t,n))))}while(!n.done)}))}(r[Symbol.asyncIterator]()))))),yield W(new t)}))}function at(t,e,n){if(0!==t){n=n.slice(0,e+1);for(let r=-1;++r<=e;)n[r]+=t}return n}const st=Symbol.for("isArrowBigNum");function lt(t,...e){return 0===e.length?Object.setPrototypeOf(et(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function ct(...t){return lt.apply(this,t)}function ut(...t){return lt.apply(this,t)}function dt(...t){return lt.apply(this,t)}function ht(t){const{buffer:e,byteOffset:n,length:r,signed:i}=t,o=new A(e,n,r),a=i&&o[o.length-1]&BigInt(1)<<BigInt(63);let s=a?BigInt(1):BigInt(0),l=BigInt(0);if(a){for(const t of o)s+=~t*(BigInt(1)<<BigInt(32)*l++);s*=BigInt(-1)}else for(const t of o)s+=t*(BigInt(1)<<BigInt(32)*l++);return s}let ft,pt;function mt(t){let e="";const n=new Uint32Array(2);let r=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let o=-1;const a=r.length-1;do{for(n[0]=r[o=0];o<a;)r[o++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+r[o];r[o]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=`${n[0]}${e}`}while(i[0]||i[1]||i[2]||i[3]);return null!=e?e:"0"}lt.prototype[st]=!0,lt.prototype.toJSON=function(){return`"${ft(this)}"`},lt.prototype.valueOf=function(){return ht(this)},lt.prototype.toString=function(){return ft(this)},lt.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return ht(this);case"string":return ft(this);case"default":return pt(this)}return ft(this)},Object.setPrototypeOf(ct.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(ut.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(dt.prototype,Object.create(Uint32Array.prototype)),Object.assign(ct.prototype,lt.prototype,{constructor:ct,signed:!0,TypedArray:Int32Array,BigIntArray:I}),Object.assign(ut.prototype,lt.prototype,{constructor:ut,signed:!1,TypedArray:Uint32Array,BigIntArray:A}),Object.assign(dt.prototype,lt.prototype,{constructor:dt,signed:!0,TypedArray:Uint32Array,BigIntArray:A}),O?(pt=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:mt(t),ft=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:mt(t)):(ft=mt,pt=ft);class yt{static new(t,e){switch(e){case!0:return new ct(t);case!1:return new ut(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case I:return new ct(t)}return 16===t.byteLength?new dt(t):new ut(t)}static signed(t){return new ct(t)}static unsigned(t){return new ut(t)}static decimal(t){return new dt(t)}constructor(t,e){return yt.new(t,e)}}var gt,bt,vt,wt,_t,xt,Et,Ot,It,St,At,Lt,kt,Tt,Nt,Bt,Ct,Mt,Dt,Pt;class Ft{static isNull(t){return(null==t?void 0:t.typeId)===b.Null}static isInt(t){return(null==t?void 0:t.typeId)===b.Int}static isFloat(t){return(null==t?void 0:t.typeId)===b.Float}static isBinary(t){return(null==t?void 0:t.typeId)===b.Binary}static isUtf8(t){return(null==t?void 0:t.typeId)===b.Utf8}static isBool(t){return(null==t?void 0:t.typeId)===b.Bool}static isDecimal(t){return(null==t?void 0:t.typeId)===b.Decimal}static isDate(t){return(null==t?void 0:t.typeId)===b.Date}static isTime(t){return(null==t?void 0:t.typeId)===b.Time}static isTimestamp(t){return(null==t?void 0:t.typeId)===b.Timestamp}static isInterval(t){return(null==t?void 0:t.typeId)===b.Interval}static isList(t){return(null==t?void 0:t.typeId)===b.List}static isStruct(t){return(null==t?void 0:t.typeId)===b.Struct}static isUnion(t){return(null==t?void 0:t.typeId)===b.Union}static isFixedSizeBinary(t){return(null==t?void 0:t.typeId)===b.FixedSizeBinary}static isFixedSizeList(t){return(null==t?void 0:t.typeId)===b.FixedSizeList}static isMap(t){return(null==t?void 0:t.typeId)===b.Map}static isDictionary(t){return(null==t?void 0:t.typeId)===b.Dictionary}static isDenseUnion(t){return Ft.isUnion(t)&&t.mode===a.Dense}static isSparseUnion(t){return Ft.isUnion(t)&&t.mode===a.Sparse}get typeId(){return b.NONE}}gt=Symbol.toStringTag,Ft[gt]=((Pt=Ft.prototype).children=null,Pt.ArrayType=Array,Pt[Symbol.toStringTag]="DataType");class jt extends Ft{toString(){return"Null"}get typeId(){return b.Null}}bt=Symbol.toStringTag,jt[bt]=(t=>t[Symbol.toStringTag]="Null")(jt.prototype);class Rt extends Ft{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return b.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?I:A}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}vt=Symbol.toStringTag,Rt[vt]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Rt.prototype);class Ut extends Rt{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(class extends Rt{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends Rt{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Ut.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends Rt{constructor(){super(!0,64)}get ArrayType(){return I}}.prototype,"ArrayType",{value:I}),Object.defineProperty(class extends Rt{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends Rt{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends Rt{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends Rt{constructor(){super(!1,64)}get ArrayType(){return A}}.prototype,"ArrayType",{value:A});class zt extends Ft{constructor(t){super(),this.precision=t}get typeId(){return b.Float}get ArrayType(){switch(this.precision){case l.HALF:return Uint16Array;case l.SINGLE:return Float32Array;case l.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}wt=Symbol.toStringTag,zt[wt]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(zt.prototype),Object.defineProperty(class extends zt{constructor(){super(l.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends zt{constructor(){super(l.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends zt{constructor(){super(l.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class Ht extends Ft{constructor(){super()}get typeId(){return b.Binary}toString(){return"Binary"}}_t=Symbol.toStringTag,Ht[_t]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Ht.prototype);class Vt extends Ft{constructor(){super()}get typeId(){return b.Utf8}toString(){return"Utf8"}}xt=Symbol.toStringTag,Vt[xt]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Vt.prototype);class Wt extends Ft{constructor(){super()}get typeId(){return b.Bool}toString(){return"Bool"}}Et=Symbol.toStringTag,Wt[Et]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Wt.prototype);class Yt extends Ft{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return b.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Ot=Symbol.toStringTag,Yt[Ot]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Yt.prototype);class Gt extends Ft{constructor(t){super(),this.unit=t}get typeId(){return b.Date}toString(){return`Date${32*(this.unit+1)}<${u[this.unit]}>`}}It=Symbol.toStringTag,Gt[It]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Gt.prototype);class $t extends Ft{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return b.Time}toString(){return`Time${this.bitWidth}<${h[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return I}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}St=Symbol.toStringTag,$t[St]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))($t.prototype);class Xt extends Ft{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return b.Timestamp}toString(){return`Timestamp<${h[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}At=Symbol.toStringTag,Xt[At]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Xt.prototype);class Kt extends Ft{constructor(t){super(),this.unit=t}get typeId(){return b.Interval}toString(){return`Interval<${p[this.unit]}>`}}Lt=Symbol.toStringTag,Kt[Lt]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Kt.prototype);class Zt extends Ft{constructor(t){super(),this.children=[t]}get typeId(){return b.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}kt=Symbol.toStringTag,Zt[kt]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Zt.prototype);class qt extends Ft{constructor(t){super(),this.children=t}get typeId(){return b.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Tt=Symbol.toStringTag,qt[Tt]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(qt.prototype);class Jt extends Ft{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return b.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}Nt=Symbol.toStringTag,Jt[Nt]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(Jt.prototype);class Qt extends Ft{constructor(t){super(),this.byteWidth=t}get typeId(){return b.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Bt=Symbol.toStringTag,Qt[Bt]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(Qt.prototype);class te extends Ft{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return b.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Ct=Symbol.toStringTag,te[Ct]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(te.prototype);class ee extends Ft{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return b.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}Mt=Symbol.toStringTag,ee[Mt]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(ee.prototype);const ne=(re=-1,()=>++re);var re;class ie extends Ft{constructor(t,e,n,r){super(),this.indices=e,this.dictionary=t,this.isOrdered=r||!1,this.id=null==n?ne():"number"==typeof n?n:n.low}get typeId(){return b.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function oe(t){const e=t;switch(t.typeId){case b.Decimal:return t.bitWidth/32;case b.Timestamp:return 2;case b.Date:case b.Interval:return 1+e.unit;case b.FixedSizeList:return e.listSize;case b.FixedSizeBinary:return e.byteWidth;default:return 1}}Dt=Symbol.toStringTag,ie[Dt]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(ie.prototype);class ae{visitMany(t,...e){return t.map(((t,n)=>this.visit(t,...e.map((t=>t[n])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,n=!0){return"number"==typeof e?se(t,e,n):"string"==typeof e&&e in b?se(t,b[e],n):e&&e instanceof Ft?se(t,le(e),n):(null==e?void 0:e.type)&&e.type instanceof Ft?se(t,le(e.type),n):se(t,b.NONE,n)}(this,t,e)}getVisitFnByTypeId(t,e=!0){return se(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function se(t,e,n=!0){let r=null;switch(e){case b.Null:r=t.visitNull;break;case b.Bool:r=t.visitBool;break;case b.Int:r=t.visitInt;break;case b.Int8:r=t.visitInt8||t.visitInt;break;case b.Int16:r=t.visitInt16||t.visitInt;break;case b.Int32:r=t.visitInt32||t.visitInt;break;case b.Int64:r=t.visitInt64||t.visitInt;break;case b.Uint8:r=t.visitUint8||t.visitInt;break;case b.Uint16:r=t.visitUint16||t.visitInt;break;case b.Uint32:r=t.visitUint32||t.visitInt;break;case b.Uint64:r=t.visitUint64||t.visitInt;break;case b.Float:r=t.visitFloat;break;case b.Float16:r=t.visitFloat16||t.visitFloat;break;case b.Float32:r=t.visitFloat32||t.visitFloat;break;case b.Float64:r=t.visitFloat64||t.visitFloat;break;case b.Utf8:r=t.visitUtf8;break;case b.Binary:r=t.visitBinary;break;case b.FixedSizeBinary:r=t.visitFixedSizeBinary;break;case b.Date:r=t.visitDate;break;case b.DateDay:r=t.visitDateDay||t.visitDate;break;case b.DateMillisecond:r=t.visitDateMillisecond||t.visitDate;break;case b.Timestamp:r=t.visitTimestamp;break;case b.TimestampSecond:r=t.visitTimestampSecond||t.visitTimestamp;break;case b.TimestampMillisecond:r=t.visitTimestampMillisecond||t.visitTimestamp;break;case b.TimestampMicrosecond:r=t.visitTimestampMicrosecond||t.visitTimestamp;break;case b.TimestampNanosecond:r=t.visitTimestampNanosecond||t.visitTimestamp;break;case b.Time:r=t.visitTime;break;case b.TimeSecond:r=t.visitTimeSecond||t.visitTime;break;case b.TimeMillisecond:r=t.visitTimeMillisecond||t.visitTime;break;case b.TimeMicrosecond:r=t.visitTimeMicrosecond||t.visitTime;break;case b.TimeNanosecond:r=t.visitTimeNanosecond||t.visitTime;break;case b.Decimal:r=t.visitDecimal;break;case b.List:r=t.visitList;break;case b.Struct:r=t.visitStruct;break;case b.Union:r=t.visitUnion;break;case b.DenseUnion:r=t.visitDenseUnion||t.visitUnion;break;case b.SparseUnion:r=t.visitSparseUnion||t.visitUnion;break;case b.Dictionary:r=t.visitDictionary;break;case b.Interval:r=t.visitInterval;break;case b.IntervalDayTime:r=t.visitIntervalDayTime||t.visitInterval;break;case b.IntervalYearMonth:r=t.visitIntervalYearMonth||t.visitInterval;break;case b.FixedSizeList:r=t.visitFixedSizeList;break;case b.Map:r=t.visitMap}if("function"==typeof r)return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${b[e]}'`)}function le(t){switch(t.typeId){case b.Null:return b.Null;case b.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?b.Int8:b.Uint8;case 16:return n?b.Int16:b.Uint16;case 32:return n?b.Int32:b.Uint32;case 64:return n?b.Int64:b.Uint64}return b.Int}case b.Float:switch(t.precision){case l.HALF:return b.Float16;case l.SINGLE:return b.Float32;case l.DOUBLE:return b.Float64}return b.Float;case b.Binary:return b.Binary;case b.Utf8:return b.Utf8;case b.Bool:return b.Bool;case b.Decimal:return b.Decimal;case b.Time:switch(t.unit){case h.SECOND:return b.TimeSecond;case h.MILLISECOND:return b.TimeMillisecond;case h.MICROSECOND:return b.TimeMicrosecond;case h.NANOSECOND:return b.TimeNanosecond}return b.Time;case b.Timestamp:switch(t.unit){case h.SECOND:return b.TimestampSecond;case h.MILLISECOND:return b.TimestampMillisecond;case h.MICROSECOND:return b.TimestampMicrosecond;case h.NANOSECOND:return b.TimestampNanosecond}return b.Timestamp;case b.Date:switch(t.unit){case u.DAY:return b.DateDay;case u.MILLISECOND:return b.DateMillisecond}return b.Date;case b.Interval:switch(t.unit){case p.DAY_TIME:return b.IntervalDayTime;case p.YEAR_MONTH:return b.IntervalYearMonth}return b.Interval;case b.Map:return b.Map;case b.List:return b.List;case b.Struct:return b.Struct;case b.Union:switch(t.mode){case a.Dense:return b.DenseUnion;case a.Sparse:return b.SparseUnion}return b.Union;case b.FixedSizeBinary:return b.FixedSizeBinary;case b.FixedSizeList:return b.FixedSizeList;case b.Dictionary:return b.Dictionary}throw new Error(`Unrecognized type '${b[t.typeId]}'`)}ae.prototype.visitInt8=null,ae.prototype.visitInt16=null,ae.prototype.visitInt32=null,ae.prototype.visitInt64=null,ae.prototype.visitUint8=null,ae.prototype.visitUint16=null,ae.prototype.visitUint32=null,ae.prototype.visitUint64=null,ae.prototype.visitFloat16=null,ae.prototype.visitFloat32=null,ae.prototype.visitFloat64=null,ae.prototype.visitDateDay=null,ae.prototype.visitDateMillisecond=null,ae.prototype.visitTimestampSecond=null,ae.prototype.visitTimestampMillisecond=null,ae.prototype.visitTimestampMicrosecond=null,ae.prototype.visitTimestampNanosecond=null,ae.prototype.visitTimeSecond=null,ae.prototype.visitTimeMillisecond=null,ae.prototype.visitTimeMicrosecond=null,ae.prototype.visitTimeNanosecond=null,ae.prototype.visitDenseUnion=null,ae.prototype.visitSparseUnion=null,ae.prototype.visitIntervalDayTime=null,ae.prototype.visitIntervalYearMonth=null;const ce=new Float64Array(1),ue=new Uint32Array(ce.buffer);function de(t){const e=(31744&t)>>10,n=(1023&t)/1024,r=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,e-15)*(1+n)}class he extends ae{}function fe(t){return(e,n,r)=>{if(e.setValid(n,null!=r))return t(e,n,r)}}const pe=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},me=(t,e,n,r)=>{if(n+1<e.length){const{[n]:i,[n+1]:o}=e;t.set(r.subarray(0,o-i),i)}},ye=({values:t},e,n)=>{t[e]=n},ge=({values:t},e,n)=>{t[e]=n},be=({values:t},e,n)=>{t[e]=function(t){if(t!=t)return 32256;ce[0]=t;const e=(2147483648&ue[1])>>16&65535;let n=2146435072&ue[1],r=0;return n>=1089470464?ue[0]>0?n=31744:(n=(2080374784&n)>>16,r=(1048575&ue[1])>>10):n<=1056964608?(r=1048576+(1048575&ue[1]),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=512+(1048575&ue[1])>>10),e|n|65535&r}(n)},ve=({values:t},e,n)=>{((t,e,n)=>{t[e]=Math.trunc(n/864e5)})(t,e,n.valueOf())},we=({values:t},e,n)=>{pe(t,2*e,n.valueOf())},_e=({values:t},e,n)=>pe(t,2*e,n/1e3),xe=({values:t},e,n)=>pe(t,2*e,n),Ee=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e3*n%4294967296),t[e+1]=Math.trunc(1e3*n/4294967296)})(t,2*e,n),Oe=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e6*n%4294967296),t[e+1]=Math.trunc(1e6*n/4294967296)})(t,2*e,n),Ie=({values:t},e,n)=>{t[e]=n},Se=({values:t},e,n)=>{t[e]=n},Ae=({values:t},e,n)=>{t[e]=n},Le=({values:t},e,n)=>{t[e]=n},ke=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];Ce.visit(i,t.valueOffsets[e],n)},Te=(t,e,n)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[r];Ce.visit(i,e,n)},Ne=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},Be=({values:t},e,n)=>{t[e]=12*n[0]+n[1]%12};he.prototype.visitBool=fe((({offset:t,values:e},n,r)=>{const i=t+n;r?e[i>>3]|=1<<i%8:e[i>>3]&=~(1<<i%8)})),he.prototype.visitInt=fe(ye),he.prototype.visitInt8=fe(ye),he.prototype.visitInt16=fe(ye),he.prototype.visitInt32=fe(ye),he.prototype.visitInt64=fe(ye),he.prototype.visitUint8=fe(ye),he.prototype.visitUint16=fe(ye),he.prototype.visitUint32=fe(ye),he.prototype.visitUint64=fe(ye),he.prototype.visitFloat=fe(((t,e,n)=>{switch(t.type.precision){case l.HALF:return be(t,e,n);case l.SINGLE:case l.DOUBLE:return ge(t,e,n)}})),he.prototype.visitFloat16=fe(be),he.prototype.visitFloat32=fe(ge),he.prototype.visitFloat64=fe(ge),he.prototype.visitUtf8=fe((({values:t,valueOffsets:e},n,r)=>{me(t,e,n,q(r))})),he.prototype.visitBinary=fe((({values:t,valueOffsets:e},n,r)=>me(t,e,n,r))),he.prototype.visitFixedSizeBinary=fe((({stride:t,values:e},n,r)=>{e.set(r.subarray(0,t),t*n)})),he.prototype.visitDate=fe(((t,e,n)=>{t.type.unit===u.DAY?ve(t,e,n):we(t,e,n)})),he.prototype.visitDateDay=fe(ve),he.prototype.visitDateMillisecond=fe(we),he.prototype.visitTimestamp=fe(((t,e,n)=>{switch(t.type.unit){case h.SECOND:return _e(t,e,n);case h.MILLISECOND:return xe(t,e,n);case h.MICROSECOND:return Ee(t,e,n);case h.NANOSECOND:return Oe(t,e,n)}})),he.prototype.visitTimestampSecond=fe(_e),he.prototype.visitTimestampMillisecond=fe(xe),he.prototype.visitTimestampMicrosecond=fe(Ee),he.prototype.visitTimestampNanosecond=fe(Oe),he.prototype.visitTime=fe(((t,e,n)=>{switch(t.type.unit){case h.SECOND:return Ie(t,e,n);case h.MILLISECOND:return Se(t,e,n);case h.MICROSECOND:return Ae(t,e,n);case h.NANOSECOND:return Le(t,e,n)}})),he.prototype.visitTimeSecond=fe(Ie),he.prototype.visitTimeMillisecond=fe(Se),he.prototype.visitTimeMicrosecond=fe(Ae),he.prototype.visitTimeNanosecond=fe(Le),he.prototype.visitDecimal=fe((({values:t,stride:e},n,r)=>{t.set(r.subarray(0,e),e*n)})),he.prototype.visitList=fe(((t,e,n)=>{const r=t.children[0],i=t.valueOffsets,o=Ce.getVisitFn(r);if(Array.isArray(n))for(let t=-1,a=i[e],s=i[e+1];a<s;)o(r,a++,n[++t]);else for(let t=-1,a=i[e],s=i[e+1];a<s;)o(r,a++,n.get(++t))})),he.prototype.visitStruct=fe(((t,e,n)=>{const r=t.type.children.map((t=>Ce.getVisitFn(t.type))),i=n instanceof Map?(o=e,a=n,(t,e,n,r)=>e&&t(e,o,a.get(n.name))):n instanceof qn?((t,e)=>(n,r,i,o)=>r&&n(r,t,e.get(o)))(e,n):Array.isArray(n)?((t,e)=>(n,r,i,o)=>r&&n(r,t,e[o]))(e,n):((t,e)=>(n,r,i,o)=>r&&n(r,t,e[i.name]))(e,n);var o,a;t.type.children.forEach(((e,n)=>i(r[n],t.children[n],e,n)))})),he.prototype.visitUnion=fe(((t,e,n)=>{t.type.mode===a.Dense?ke(t,e,n):Te(t,e,n)})),he.prototype.visitDenseUnion=fe(ke),he.prototype.visitSparseUnion=fe(Te),he.prototype.visitDictionary=fe(((t,e,n)=>{var r;null===(r=t.dictionary)||void 0===r||r.set(t.values[e],n)})),he.prototype.visitInterval=fe(((t,e,n)=>{t.type.unit===p.DAY_TIME?Ne(t,e,n):Be(t,e,n)})),he.prototype.visitIntervalDayTime=fe(Ne),he.prototype.visitIntervalYearMonth=fe(Be),he.prototype.visitFixedSizeList=fe(((t,e,n)=>{const{stride:r}=t,i=t.children[0],o=Ce.getVisitFn(i);if(Array.isArray(n))for(let t=-1,a=e*r;++t<r;)o(i,a+t,n[t]);else for(let t=-1,a=e*r;++t<r;)o(i,a+t,n.get(t))})),he.prototype.visitMap=fe(((t,e,n)=>{const r=t.children[0],{valueOffsets:i}=t,o=Ce.getVisitFn(r);let{[e]:a,[e+1]:s}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const t of l)if(o(r,a,t),++a>=s)break}));const Ce=new he,Me=Symbol.for("parent"),De=Symbol.for("rowIndex");class Pe{constructor(t,e){return this[Me]=t,this[De]=e,new Proxy(this,new je)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[De],e=this[Me],n=e.type.children,r={};for(let i=-1,o=n.length;++i<o;)r[n[i].name]=sn.visit(e.children[i],t);return r}toString(){return`{${[...this].map((([t,e])=>`${H(t)}: ${H(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Fe(this[Me],this[De])}}class Fe{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,sn.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Pe.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Me]:{writable:!0,enumerable:!1,configurable:!1,value:null},[De]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class je{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Me].type.children.map((t=>t.name))}has(t,e){return-1!==t[Me].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[Me].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[Me].type.children.findIndex((t=>t.name===e));if(-1!==n){const r=sn.visit(t[Me].children[n],t[De]);return Reflect.set(t,e,r),r}}set(t,e,n){const r=t[Me].type.children.findIndex((t=>t.name===e));return-1!==r?(Ce.visit(t[Me].children[r],t[De],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!=typeof e)&&Reflect.set(t,e,n)}}class Re extends ae{}function Ue(t){return(e,n)=>e.getValid(n)?t(e,n):null}const ze=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),He=t=>new Date(t),Ve=(t,e,n)=>{if(n+1>=e.length)return null;const r=e[n],i=e[n+1];return t.subarray(r,i)},We=({values:t},e)=>((t,e)=>He(((t,e)=>864e5*t[e])(t,e)))(t,e),Ye=({values:t},e)=>((t,e)=>He(ze(t,e)))(t,2*e),Ge=({stride:t,values:e},n)=>e[t*n],$e=({values:t},e)=>t[e],Xe=({values:t},e)=>1e3*ze(t,2*e),Ke=({values:t},e)=>ze(t,2*e),Ze=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),qe=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),Je=({values:t},e)=>t[e],Qe=({values:t},e)=>t[e],tn=({values:t},e)=>t[e],en=({values:t},e)=>t[e],nn=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return sn.visit(r,t.valueOffsets[e])},rn=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];return sn.visit(r,e)},on=({values:t},e)=>t.subarray(2*e,2*(e+1)),an=({values:t},e)=>{const n=t[e],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r};Re.prototype.visitNull=Ue(((t,e)=>null)),Re.prototype.visitBool=Ue((({offset:t,values:e},n)=>{const r=t+n;return!!(e[r>>3]&1<<r%8)})),Re.prototype.visitInt=Ue((({values:t},e)=>t[e])),Re.prototype.visitInt8=Ue(Ge),Re.prototype.visitInt16=Ue(Ge),Re.prototype.visitInt32=Ue(Ge),Re.prototype.visitInt64=Ue($e),Re.prototype.visitUint8=Ue(Ge),Re.prototype.visitUint16=Ue(Ge),Re.prototype.visitUint32=Ue(Ge),Re.prototype.visitUint64=Ue($e),Re.prototype.visitFloat=Ue((({type:t,values:e},n)=>t.precision!==l.HALF?e[n]:de(e[n]))),Re.prototype.visitFloat16=Ue((({stride:t,values:e},n)=>de(e[t*n]))),Re.prototype.visitFloat32=Ue(Ge),Re.prototype.visitFloat64=Ue(Ge),Re.prototype.visitUtf8=Ue((({values:t,valueOffsets:e},n)=>{const r=Ve(t,e,n);return null!==r?K(r):null})),Re.prototype.visitBinary=Ue((({values:t,valueOffsets:e},n)=>Ve(t,e,n))),Re.prototype.visitFixedSizeBinary=Ue((({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)))),Re.prototype.visitDate=Ue(((t,e)=>t.type.unit===u.DAY?We(t,e):Ye(t,e))),Re.prototype.visitDateDay=Ue(We),Re.prototype.visitDateMillisecond=Ue(Ye),Re.prototype.visitTimestamp=Ue(((t,e)=>{switch(t.type.unit){case h.SECOND:return Xe(t,e);case h.MILLISECOND:return Ke(t,e);case h.MICROSECOND:return Ze(t,e);case h.NANOSECOND:return qe(t,e)}})),Re.prototype.visitTimestampSecond=Ue(Xe),Re.prototype.visitTimestampMillisecond=Ue(Ke),Re.prototype.visitTimestampMicrosecond=Ue(Ze),Re.prototype.visitTimestampNanosecond=Ue(qe),Re.prototype.visitTime=Ue(((t,e)=>{switch(t.type.unit){case h.SECOND:return Je(t,e);case h.MILLISECOND:return Qe(t,e);case h.MICROSECOND:return tn(t,e);case h.NANOSECOND:return en(t,e)}})),Re.prototype.visitTimeSecond=Ue(Je),Re.prototype.visitTimeMillisecond=Ue(Qe),Re.prototype.visitTimeMicrosecond=Ue(tn),Re.prototype.visitTimeNanosecond=Ue(en),Re.prototype.visitDecimal=Ue((({values:t,stride:e},n)=>yt.decimal(t.subarray(e*n,e*(n+1))))),Re.prototype.visitList=Ue(((t,e)=>{const{valueOffsets:n,stride:r,children:i}=t,{[e*r]:o,[e*r+1]:a}=n,s=i[0].slice(o,a-o);return new qn([s])})),Re.prototype.visitStruct=Ue(((t,e)=>new Pe(t,e))),Re.prototype.visitUnion=Ue(((t,e)=>t.type.mode===a.Dense?nn(t,e):rn(t,e))),Re.prototype.visitDenseUnion=Ue(nn),Re.prototype.visitSparseUnion=Ue(rn),Re.prototype.visitDictionary=Ue(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),Re.prototype.visitInterval=Ue(((t,e)=>t.type.unit===p.DAY_TIME?on(t,e):an(t,e))),Re.prototype.visitIntervalDayTime=Ue(on),Re.prototype.visitIntervalYearMonth=Ue(an),Re.prototype.visitFixedSizeList=Ue(((t,e)=>{const{stride:n,children:r}=t,i=r[0].slice(e*n,n);return new qn([i])})),Re.prototype.visitMap=Ue(((t,e)=>{const{valueOffsets:n,children:r}=t,{[e]:i,[e+1]:o}=n,a=r[0];return new un(a.slice(i,o-i))}));const sn=new Re,ln=Symbol.for("keys"),cn=Symbol.for("vals");class un{constructor(t){return this[ln]=new qn([t.children[0]]).memoize(),this[cn]=t.children[1],new Proxy(this,new hn)}[Symbol.iterator](){return new dn(this[ln],this[cn])}get size(){return this[ln].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ln],e=this[cn],n={};for(let r=-1,i=t.length;++r<i;)n[t.get(r)]=sn.visit(e,r);return n}toString(){return`{${[...this].map((([t,e])=>`${H(t)}: ${H(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class dn{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),sn.visit(this.vals,t)]})}}class hn{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ln].toArray().map(String)}has(t,e){return t[ln].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[ln].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[ln].indexOf(e);if(-1!==n){const r=sn.visit(Reflect.get(t,cn),n);return Reflect.set(t,e,r),r}}set(t,e,n){const r=t[ln].indexOf(e);return-1!==r?(Ce.visit(Reflect.get(t,cn),r,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}let fn;function pn(t,e,n,r){const{length:i=0}=t;let o="number"!=typeof e?0:e,a="number"!=typeof n?i:n;return o<0&&(o=(o%i+i)%i),a<0&&(a=(a%i+i)%i),a<o&&(fn=o,o=a,a=fn),a>i&&(a=i),r?r(t,o,a):[o,a]}Object.defineProperties(un.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ln]:{writable:!0,enumerable:!1,configurable:!1,value:null},[cn]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const mn=t=>t!=t;function yn(t){if("object"!=typeof t||null===t)return mn(t)?mn:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let n=0;const r=t.length;if(r!==e.length)return!1;if(r>0)do{if(t[n]!==e[n])return!1}while(++n<r);return!0}(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const r of t.values())n[++e]=yn(r);return gn(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=yn(t[n]);return gn(e)}(t):t instanceof qn?function(t){const e=[];for(let n=-1,r=t.length;++n<r;)e[n]=yn(t.get(n));return gn(e)}(t):function(t,e=!1){const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const r=[];for(let e=-1,i=n.length;++e<i;)r[e]=yn(t[n[e]]);return gn(r,n)}(t,!0)}function gn(t,e){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e[r]))return!1;return!0}(t,n);case Map:return bn(t,n,n.keys());case un:case Pe:case Object:case void 0:return bn(t,n,e||Object.keys(n))}return n instanceof qn&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let r=-1;++r<n;)if(!t[r](e.get(r)))return!1;return!0}(t,n)}}function bn(t,e,n){const r=n[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const s=t.length;let l=o.next(),c=r.next(),u=i.next();for(;a<s&&!c.done&&!u.done&&!l.done&&c.value===u.value&&t[a](l.value);++a,c=r.next(),u=i.next(),l=o.next());return!!(a===s&&c.done&&u.done&&l.done)||(r.return&&r.return(),i.return&&i.return(),o.return&&o.return(),!1)}class vn{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function wn(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function _n(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function xn(t,e,n,r){const i=[];for(let o=-1,a=t.length;++o<a;){const a=t[o],s=e[o],{length:l}=a;if(s>=r)break;if(n>=s+l)continue;if(s>=n&&s+l<=r){i.push(a);continue}const c=Math.max(0,n-s),u=Math.min(r-s,l);i.push(a.slice(c,u-c))}return 0===i.length&&i.push(t[0].slice(0,0)),i}function En(t,e,n,r){let i=0,o=0,a=e.length-1;do{if(i>=a-1)return n<e[a]?r(t,i,n-e[i]):null;o=i+Math.trunc(.5*(a-i)),n<e[o]?a=o:i=o}while(i<a)}function On(t,e){return t.getValid(e)}function In(t){function e(e,n,r){return t(e[n],r)}return function(t){return En(this.data,this._offsets,t,e)}}function Sn(t){let e;function n(n,r,i){return t(n[r],i,e)}return function(t,r){const i=this.data;e=r;const o=En(i,this._offsets,t,n);return e=void 0,o}}function An(t){let e;function n(n,r,i){let o=i,a=0,s=0;for(let i=r-1,l=n.length;++i<l;){const r=n[i];if(~(a=t(r,e,o)))return s+a;o=0,s+=r.length}return-1}return function(t,r){e=t;const i=this.data,o="number"!=typeof r?n(i,0,0):En(i,this._offsets,r,n);return e=void 0,o}}function Ln(t,e,n,r){return!!(n&1<<r)}function kn(t,e,n,r){return(n&1<<r)>>r}function Tn(t,e,n){const r=n.byteLength+7&-8;if(t>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(t%8==0?n.subarray(t>>3):Nn(new Bn(n,t,e,null,Ln)).subarray(0,r)),i}return n}function Nn(t){const e=[];let n=0,r=0,i=0;for(const o of t)o&&(i|=1<<r),8==++r&&(e[n++]=i,i=r=0);(0===n||r>0)&&(e[n++]=i);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}class Bn{constructor(t,e,n,r,i){this.bytes=t,this.length=n,this.context=r,this.get=i,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Cn(t,e,n){if(n-e<=0)return 0;if(n-e<8){let r=0;for(const i of new Bn(t,e,n-e,t,kn))r+=i;return r}const r=n>>3<<3,i=e+(e%8==0?0:8-e%8);return Cn(t,e,i)+Cn(t,r,n)+function(t,e,n){let r=0,i=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===n?t.byteLength:i+n;for(;a-i>=4;)r+=Mn(o.getUint32(i)),i+=4;for(;a-i>=2;)r+=Mn(o.getUint16(i)),i+=2;for(;a-i>=1;)r+=Mn(o.getUint8(i)),i+=1;return r}(t,i>>3,r-i>>3)}function Mn(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class Dn extends ae{}function Pn(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let r=0;for(const i of new Bn(n,t.offset+(e||0),t.length,n,Ln)){if(!i)return r;++r}return-1}(t,n);const r=sn.getVisitFn(t),i=yn(e);for(let e=(n||0)-1,o=t.length;++e<o;)if(i(r(t,e)))return e;return-1}function Fn(t,e,n){const r=sn.getVisitFn(t),i=yn(e);for(let e=(n||0)-1,o=t.length;++e<o;)if(i(r(t,e)))return e;return-1}Dn.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},Dn.prototype.visitBool=Pn,Dn.prototype.visitInt=Pn,Dn.prototype.visitInt8=Pn,Dn.prototype.visitInt16=Pn,Dn.prototype.visitInt32=Pn,Dn.prototype.visitInt64=Pn,Dn.prototype.visitUint8=Pn,Dn.prototype.visitUint16=Pn,Dn.prototype.visitUint32=Pn,Dn.prototype.visitUint64=Pn,Dn.prototype.visitFloat=Pn,Dn.prototype.visitFloat16=Pn,Dn.prototype.visitFloat32=Pn,Dn.prototype.visitFloat64=Pn,Dn.prototype.visitUtf8=Pn,Dn.prototype.visitBinary=Pn,Dn.prototype.visitFixedSizeBinary=Pn,Dn.prototype.visitDate=Pn,Dn.prototype.visitDateDay=Pn,Dn.prototype.visitDateMillisecond=Pn,Dn.prototype.visitTimestamp=Pn,Dn.prototype.visitTimestampSecond=Pn,Dn.prototype.visitTimestampMillisecond=Pn,Dn.prototype.visitTimestampMicrosecond=Pn,Dn.prototype.visitTimestampNanosecond=Pn,Dn.prototype.visitTime=Pn,Dn.prototype.visitTimeSecond=Pn,Dn.prototype.visitTimeMillisecond=Pn,Dn.prototype.visitTimeMicrosecond=Pn,Dn.prototype.visitTimeNanosecond=Pn,Dn.prototype.visitDecimal=Pn,Dn.prototype.visitList=Pn,Dn.prototype.visitStruct=Pn,Dn.prototype.visitUnion=Pn,Dn.prototype.visitDenseUnion=Fn,Dn.prototype.visitSparseUnion=Fn,Dn.prototype.visitDictionary=Pn,Dn.prototype.visitInterval=Pn,Dn.prototype.visitIntervalDayTime=Pn,Dn.prototype.visitIntervalYearMonth=Pn,Dn.prototype.visitFixedSizeList=Pn,Dn.prototype.visitMap=Pn;const jn=new Dn;class Rn extends ae{}function Un(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===b.Timestamp||e instanceof Rt&&64!==e.bitWidth||e instanceof $t&&64!==e.bitWidth||e instanceof zt&&e.precision!==l.HALF))return new vn(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new vn(t.data.length,(e=>{const r=t.data[e].length,i=t.slice(n,n+r);return n+=r,new zn(i)}))}class zn{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Rn.prototype.visitNull=Un,Rn.prototype.visitBool=Un,Rn.prototype.visitInt=Un,Rn.prototype.visitInt8=Un,Rn.prototype.visitInt16=Un,Rn.prototype.visitInt32=Un,Rn.prototype.visitInt64=Un,Rn.prototype.visitUint8=Un,Rn.prototype.visitUint16=Un,Rn.prototype.visitUint32=Un,Rn.prototype.visitUint64=Un,Rn.prototype.visitFloat=Un,Rn.prototype.visitFloat16=Un,Rn.prototype.visitFloat32=Un,Rn.prototype.visitFloat64=Un,Rn.prototype.visitUtf8=Un,Rn.prototype.visitBinary=Un,Rn.prototype.visitFixedSizeBinary=Un,Rn.prototype.visitDate=Un,Rn.prototype.visitDateDay=Un,Rn.prototype.visitDateMillisecond=Un,Rn.prototype.visitTimestamp=Un,Rn.prototype.visitTimestampSecond=Un,Rn.prototype.visitTimestampMillisecond=Un,Rn.prototype.visitTimestampMicrosecond=Un,Rn.prototype.visitTimestampNanosecond=Un,Rn.prototype.visitTime=Un,Rn.prototype.visitTimeSecond=Un,Rn.prototype.visitTimeMillisecond=Un,Rn.prototype.visitTimeMicrosecond=Un,Rn.prototype.visitTimeNanosecond=Un,Rn.prototype.visitDecimal=Un,Rn.prototype.visitList=Un,Rn.prototype.visitStruct=Un,Rn.prototype.visitUnion=Un,Rn.prototype.visitDenseUnion=Un,Rn.prototype.visitSparseUnion=Un,Rn.prototype.visitDictionary=Un,Rn.prototype.visitInterval=Un,Rn.prototype.visitIntervalDayTime=Un,Rn.prototype.visitIntervalYearMonth=Un,Rn.prototype.visitFixedSizeList=Un,Rn.prototype.visitMap=Un;const Hn=new Rn,Vn=(t,e)=>t+e;class Wn extends ae{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===h.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,n)=>t+$n.visit(n,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,n)=>t+$n.visit(n,e)),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+((null===(n=t.dictionary)||void 0===n?void 0:n.getByteLength(t.values[e]))||0)}}const Yn=({type:t,children:e,typeIds:n,valueOffsets:r},i)=>{const o=t.typeIdToChildIndex[n[i]];return 8+$n.visit(e[o],r[i])},Gn=({children:t},e)=>4+$n.visitMany(t,t.map((()=>e))).reduce(Vn,0);Wn.prototype.visitUtf8=({valueOffsets:t},e)=>t[e+1]-t[e]+8,Wn.prototype.visitBinary=({valueOffsets:t},e)=>t[e+1]-t[e]+8,Wn.prototype.visitList=({valueOffsets:t,stride:e,children:n},r)=>{const i=n[0],{[r*e]:o}=t,{[r*e+1]:a}=t,s=$n.getVisitFn(i.type),l=i.slice(o,a-o);let c=8;for(let t=-1,e=a-o;++t<e;)c+=s(l,t);return c},Wn.prototype.visitFixedSizeList=({stride:t,children:e},n)=>{const r=e[0],i=r.slice(n*t,t),o=$n.getVisitFn(r.type);let a=0;for(let t=-1,e=i.length;++t<e;)a+=o(i,t);return a},Wn.prototype.visitUnion=(t,e)=>t.type.mode===a.Dense?Yn(t,e):Gn(t,e),Wn.prototype.visitDenseUnion=Yn,Wn.prototype.visitSparseUnion=Gn;const $n=new Wn;var Xn;const Kn={},Zn={};class qn{constructor(t){var e,n,r;const i=t[0]instanceof qn?t.flatMap((t=>t.data)):t;if(0===i.length||i.some((t=>!(t instanceof Qn))))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=null===(e=i[0])||void 0===e?void 0:e.type;switch(i.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n,byteLength:r}=Kn[o.typeId],a=i[0];this.isValid=t=>On(a,t),this.get=e=>t(a,e),this.set=(t,n)=>e(a,t,n),this.indexOf=t=>n(a,t),this.getByteLength=t=>r(a,t),this._offsets=[0,a.length];break}default:Object.setPrototypeOf(this,Zn[o.typeId]),this._offsets=_n(i)}this.data=i,this.type=o,this.stride=oe(o),this.numChildren=null!==(r=null===(n=o.children)||void 0===n?void 0:n.length)&&void 0!==r?r:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=wn(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${b[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return Hn.visit(this)}concat(...t){return new qn(this.data.concat(t.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new qn(pn(this,t,e,(({data:t,_offsets:e},n,r)=>xn(t,e,n,r))))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:r,ArrayType:i}=this;switch(t.typeId){case b.Int:case b.Float:case b.Decimal:case b.Time:case b.Timestamp:switch(e.length){case 0:return new i;case 1:return e[0].values.subarray(0,n*r);default:return e.reduce(((t,{values:e,length:n})=>(t.array.set(e.subarray(0,n*r),t.offset),t.offset+=n*r,t)),{array:new i(n*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new qn(this.data.map((({children:e})=>e[t]))):null}get isMemoized(){return!!Ft.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(Ft.isDictionary(this.type)){const t=new Jn(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new qn(e)}return new Jn(this)}unmemoize(){if(Ft.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new qn(e)}return this}}Xn=Symbol.toStringTag,qn[Xn]=(t=>{t.type=Ft.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(b).map((t=>b[t])).filter((t=>"number"==typeof t&&t!==b.NONE));for(const n of e){const e=sn.getVisitFnByTypeId(n),r=Ce.getVisitFnByTypeId(n),i=jn.getVisitFnByTypeId(n),o=$n.getVisitFnByTypeId(n);Kn[n]={get:e,set:r,indexOf:i,byteLength:o},Zn[n]=Object.create(t,{isValid:{value:In(On)},get:{value:In(sn.getVisitFnByTypeId(n))},set:{value:Sn(Ce.getVisitFnByTypeId(n))},indexOf:{value:An(jn.getVisitFnByTypeId(n))},getByteLength:{value:In($n.getVisitFnByTypeId(n))}})}return"Vector"})(qn.prototype);class Jn extends qn{constructor(t){super(t.data);const e=this.get,n=this.set,r=this.slice,i=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=i[t];if(void 0!==n)return n;const r=e.call(this,t);return i[t]=r,r}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),i[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new Jn(r.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new qn(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Qn{constructor(t,e,n,r,i,o=[],a){let s;this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1)),i instanceof Qn?(this.stride=i.stride,this.values=i.values,this.typeIds=i.typeIds,this.nullBitmap=i.nullBitmap,this.valueOffsets=i.valueOffsets):(this.stride=oe(t),i&&((s=i[0])&&(this.valueOffsets=s),(s=i[1])&&(this.values=s),(s=i[2])&&(this.nullBitmap=s),(s=i[3])&&(this.typeIds=s))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:r,typeIds:i}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-Cn(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return!!(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:n,offset:r}=this,i=r+t>>3,o=(r+t)%8,a=n[i]>>o&1;return e?0===a&&(n[i]|=1<<o,this._nullCount=this.nullCount+1):1===a&&(n[i]&=~(1<<o),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,n=this.length,r=this._nullCount,i=this,o=this.children){return new Qn(t,e,n,r,i,o,this.dictionary)}slice(t,e){const{stride:n,typeId:r,children:i}=this,o=+(0===this._nullCount)-1,a=16===r?n:1,s=this._sliceBuffers(t,e,n,r);return this.clone(this.type,this.offset+t,e,o,s,0===i.length||this.valueOffsets?i:this._sliceChildren(i,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===b.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,r=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);r[e>>3]=(1<<e-(-8&e))-1,n>0&&r.set(Tn(this.offset,e,this.nullBitmap),0);const i=this.buffers;return i[w.VALIDITY]=r,this.clone(this.type,0,t,n+(t-e),i)}_sliceBuffers(t,e,n,r){let i;const{buffers:o}=this;return(i=o[w.TYPE])&&(o[w.TYPE]=i.subarray(t,t+e)),(i=o[w.OFFSET])&&(o[w.OFFSET]=i.subarray(t,t+e+1))||(i=o[w.DATA])&&(o[w.DATA]=6===r?i:i.subarray(n*t,n*(t+e))),o}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}Qn.prototype.children=Object.freeze([]);class tr extends ae{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:r=0}=t;return new Qn(e,n,r,0)}visitBool(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length>>3,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitInt(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitFloat(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitUtf8(t){const{type:e,offset:n=0}=t,r=rt(t.data),i=rt(t.nullBitmap),o=nt(t.valueOffsets),{length:a=o.length-1,nullCount:s=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,a,s,[o,r,i])}visitBinary(t){const{type:e,offset:n=0}=t,r=rt(t.data),i=rt(t.nullBitmap),o=nt(t.valueOffsets),{length:a=o.length-1,nullCount:s=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,a,s,[o,r,i])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length/oe(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitDate(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length/oe(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitTimestamp(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length/oe(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitTime(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length/oe(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitDecimal(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length/oe(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitList(t){const{type:e,offset:n=0,child:r}=t,i=rt(t.nullBitmap),o=nt(t.valueOffsets),{length:a=o.length-1,nullCount:s=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,a,s,[o,void 0,i],[r])}visitStruct(t){const{type:e,offset:n=0,children:r=[]}=t,i=rt(t.nullBitmap),{length:o=r.reduce(((t,{length:e})=>Math.max(t,e)),0),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,void 0,i],r)}visitUnion(t){const{type:e,offset:n=0,children:r=[]}=t,i=rt(t.nullBitmap),o=et(e.ArrayType,t.typeIds),{length:a=o.length,nullCount:s=(t.nullBitmap?-1:0)}=t;if(Ft.isSparseUnion(e))return new Qn(e,n,a,s,[void 0,void 0,i,o],r);const l=nt(t.valueOffsets);return new Qn(e,n,a,s,[l,void 0,i,o],r)}visitDictionary(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.indices.ArrayType,t.data),{dictionary:o=new qn([(new tr).visit({type:e.dictionary})])}=t,{length:a=i.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,a,s,[void 0,i,r],[],o)}visitInterval(t){const{type:e,offset:n=0}=t,r=rt(t.nullBitmap),i=et(e.ArrayType,t.data),{length:o=i.length/oe(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,i,r])}visitFixedSizeList(t){const{type:e,offset:n=0,child:r=(new tr).visit({type:e.valueType})}=t,i=rt(t.nullBitmap),{length:o=r.length/oe(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,o,a,[void 0,void 0,i],[r])}visitMap(t){const{type:e,offset:n=0,child:r=(new tr).visit({type:e.childType})}=t,i=rt(t.nullBitmap),o=nt(t.valueOffsets),{length:a=o.length-1,nullCount:s=(t.nullBitmap?-1:0)}=t;return new Qn(e,n,a,s,[o,void 0,i],[r])}}function er(t){return(new tr).visit(t)}class nr{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=or(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new nr(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new nr(e,this.metadata)}assign(...t){const e=t[0]instanceof nr?t[0]:Array.isArray(t[0])?new nr(t[0]):new nr(t),n=[...this.fields],r=ir(ir(new Map,this.metadata),e.metadata),i=e.fields.filter((t=>{const e=n.findIndex((e=>e.name===t.name));return!~e||(n[e]=t.clone({metadata:ir(ir(new Map,n[e].metadata),t.metadata)}))&&!1})),o=or(i,new Map);return new nr([...n,...i],r,new Map([...this.dictionaries,...o]))}}nr.prototype.fields=null,nr.prototype.metadata=null,nr.prototype.dictionaries=null;class rr{constructor(t,e,n=!1,r){this.name=t,this.type=e,this.nullable=n,this.metadata=r||new Map}static new(...t){let[e,n,r,i]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===n&&(n=t[0].type),void 0===r&&(r=t[0].nullable),void 0===i&&(i=t[0].metadata)),new rr(`${e}`,n,r,i)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,r,i]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:n=this.type,nullable:r=this.nullable,metadata:i=this.metadata}=t[0]):[e=this.name,n=this.type,r=this.nullable,i=this.metadata]=t,rr.new(e,n,r,i)}}function ir(t,e){return new Map([...t||new Map,...e||new Map])}function or(t,e=new Map){for(let n=-1,r=t.length;++n<r;){const r=t[n].type;if(Ft.isDictionary(r))if(e.has(r.id)){if(e.get(r.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(r.id,r.dictionary);r.children&&r.children.length>0&&or(r.children,e)}return e}rr.prototype.type=null,rr.prototype.name=null,rr.prototype.nullable=null,rr.prototype.metadata=null;class ar extends ae{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function sr(t,e){return e instanceof t.constructor}function lr(t,e){return t===e||sr(t,e)}function cr(t,e){return t===e||sr(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function ur(t,e){return t===e||sr(t,e)&&t.precision===e.precision}function dr(t,e){return t===e||sr(t,e)&&t.unit===e.unit}function hr(t,e){return t===e||sr(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function fr(t,e){return t===e||sr(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function pr(t,e){return t===e||sr(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&yr.compareManyFields(t.children,e.children)}function mr(t,e){return t===e||sr(t,e)&&t.unit===e.unit}ar.prototype.visitNull=lr,ar.prototype.visitBool=lr,ar.prototype.visitInt=cr,ar.prototype.visitInt8=cr,ar.prototype.visitInt16=cr,ar.prototype.visitInt32=cr,ar.prototype.visitInt64=cr,ar.prototype.visitUint8=cr,ar.prototype.visitUint16=cr,ar.prototype.visitUint32=cr,ar.prototype.visitUint64=cr,ar.prototype.visitFloat=ur,ar.prototype.visitFloat16=ur,ar.prototype.visitFloat32=ur,ar.prototype.visitFloat64=ur,ar.prototype.visitUtf8=lr,ar.prototype.visitBinary=lr,ar.prototype.visitFixedSizeBinary=function(t,e){return t===e||sr(t,e)&&t.byteWidth===e.byteWidth},ar.prototype.visitDate=dr,ar.prototype.visitDateDay=dr,ar.prototype.visitDateMillisecond=dr,ar.prototype.visitTimestamp=hr,ar.prototype.visitTimestampSecond=hr,ar.prototype.visitTimestampMillisecond=hr,ar.prototype.visitTimestampMicrosecond=hr,ar.prototype.visitTimestampNanosecond=hr,ar.prototype.visitTime=fr,ar.prototype.visitTimeSecond=fr,ar.prototype.visitTimeMillisecond=fr,ar.prototype.visitTimeMicrosecond=fr,ar.prototype.visitTimeNanosecond=fr,ar.prototype.visitDecimal=lr,ar.prototype.visitList=function(t,e){return t===e||sr(t,e)&&t.children.length===e.children.length&&yr.compareManyFields(t.children,e.children)},ar.prototype.visitStruct=function(t,e){return t===e||sr(t,e)&&t.children.length===e.children.length&&yr.compareManyFields(t.children,e.children)},ar.prototype.visitUnion=pr,ar.prototype.visitDenseUnion=pr,ar.prototype.visitSparseUnion=pr,ar.prototype.visitDictionary=function(t,e){return t===e||sr(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&yr.visit(t.indices,e.indices)&&yr.visit(t.dictionary,e.dictionary)},ar.prototype.visitInterval=mr,ar.prototype.visitIntervalDayTime=mr,ar.prototype.visitIntervalYearMonth=mr,ar.prototype.visitFixedSizeList=function(t,e){return t===e||sr(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&yr.compareManyFields(t.children,e.children)},ar.prototype.visitMap=function(t,e){return t===e||sr(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&yr.compareManyFields(t.children,e.children)};const yr=new ar;function gr(t,e){return yr.compareSchemas(t,e)}var br,vr;class wr{constructor(...t){switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof nr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=er({nullCount:0,type:new qt(this.schema.fields),children:this.schema.fields.map((t=>er({type:t.type,nullCount:0})))})]=t,!(this.data instanceof Qn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=_r(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:n,children:r,length:i}=Object.keys(e).reduce(((t,n,r)=>(t.children[r]=e[n],t.length=Math.max(t.length,e[n].length),t.fields[r]=rr.new({name:n,type:e[n].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),o=new nr(n),a=er({type:new qt(n),length:i,children:r,nullCount:0});[this.schema,this.data]=_r(o,a.children,i);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=xr(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return sn.visit(this.data,t)}set(t,e){return Ce.visit(this.data,t,e)}indexOf(t,e){return jn.visit(this.data,t,e)}getByteLength(t){return $n.visit(this.data,t)}[Symbol.iterator](){return Hn.visit(new qn([this.data]))}toArray(){return[...this]}concat(...t){return new Sr(this.schema,[this,...t])}slice(t,e){const[n]=new qn([this.data]).slice(t,e).data;return new wr(this.schema,n)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new qn([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,r=this.data;if(t>-1&&t<this.numCols){e||(e=new qn([er({type:new jt,length:this.numRows})]));const i=n.fields.slice(),o=r.children.slice(),a=i[t].clone({type:e.type});[i[t],o[t]]=[a,e.data[0]],n=new nr(i,new Map(this.schema.metadata)),r=er({type:new qt(i),children:o})}return new wr(n,r)}select(t){const e=this.schema.select(t),n=new qt(e.fields),r=[];for(const e of t){const t=this.schema.fields.findIndex((t=>t.name===e));~t&&(r[t]=this.data.children[t])}return new wr(e,er({type:n,length:this.numRows,children:r}))}selectAt(t){const e=this.schema.selectAt(t),n=t.map((t=>this.data.children[t])).filter(Boolean),r=er({type:new qt(e.fields),length:this.numRows,children:n});return new wr(e,r)}}function _r(t,e,n=e.reduce(((t,e)=>Math.max(t,e.length)),0)){var r;const i=[...t.fields],o=[...e],a=(n+63&-64)>>3;for(const[s,l]of t.fields.entries()){const t=e[s];t&&t.length===n||(i[s]=l.clone({nullable:!0}),o[s]=null!==(r=null==t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==r?r:er({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[t.assign(i),er({type:new qt(i),length:n,children:o})]}function xr(t,e,n=new Map){for(let r=-1,i=t.length;++r<i;){const i=t[r].type,o=e[r];if(Ft.isDictionary(i))if(n.has(i.id)){if(n.get(i.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else o.dictionary&&n.set(i.id,o.dictionary);i.children&&i.children.length>0&&xr(i.children,o.children,n)}return n}br=Symbol.toStringTag,wr[br]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(wr.prototype);class Er extends wr{constructor(t){const e=t.fields.map((t=>er({type:t.type})));super(t,er({type:new qt(t.fields),nullCount:0,children:e}))}}function Or(t,e){return function(t,e){const n=[...t.fields],r=[],i={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let o=0,a=0,s=-1;const l=e.length;let c,u=[];for(;i.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,s=-1;++s<l;)u[s]=c=e[s].shift(),a=Math.min(a,c?c.length:a);Number.isFinite(a)&&(u=Ir(n,a,u,e,i),a>0&&(r[o++]=er({type:new qt(n),length:a,nullCount:0,children:u.slice()})))}return[t=t.assign(n),r.map((e=>new wr(t,e)))]}(t,e.map((t=>t.data.concat())))}function Ir(t,e,n,r,i){var o;const a=(e+63&-64)>>3;for(let s=-1,l=r.length;++s<l;){const l=n[s],c=null==l?void 0:l.length;if(c>=e)c===e?n[s]=l:(n[s]=l.slice(0,e),i.numBatches=Math.max(i.numBatches,r[s].unshift(l.slice(e,c-e))));else{const r=t[s];t[s]=r.clone({nullable:!0}),n[s]=null!==(o=null==l?void 0:l._changeLengthAndBackfillNullBitmap(e))&&void 0!==o?o:er({type:r.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return n}class Sr{constructor(...t){var e,n;if(0===t.length)return this.batches=[],this.schema=new nr([]),this._offsets=[0],this;let r,i;t[0]instanceof nr&&(r=t.shift()),t[t.length-1]instanceof Uint32Array&&(i=t.pop());const o=t=>{if(t){if(t instanceof wr)return[t];if(t instanceof Sr)return t.batches;if(t instanceof Qn){if(t.type instanceof qt)return[new wr(new nr(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>o(t)));if("function"==typeof t[Symbol.iterator])return[...t].flatMap((t=>o(t)));if("object"==typeof t){const e=Object.keys(t),n=e.map((e=>new qn([t[e]]))),r=new nr(e.map(((t,e)=>new rr(String(t),n[e].type)))),[,i]=Or(r,n);return 0===i.length?[new wr(t)]:i}}}return[]},a=t.flatMap((t=>o(t)));if(r=null!==(n=null!=r?r:null===(e=a[0])||void 0===e?void 0:e.schema)&&void 0!==n?n:new nr([]),!(r instanceof nr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const t of a){if(!(t instanceof wr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!gr(r,t.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=a,this._offsets=null!=i?i:_n(this.data)}get data(){return this.batches.map((({data:t})=>t))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=wn(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Hn.visit(new qn(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap((({data:t})=>t)));return new Sr(e,n.map((t=>new wr(e,t))))}slice(t,e){const n=this.schema;[t,e]=pn({length:this.numRows},t,e);const r=xn(this.data,this._offsets,t,e);return new Sr(n,r.map((t=>new wr(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],r=er({type:n,length:0,nullCount:0});e.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new qn(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,r=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new qn([er({type:new jt,length:this.numRows})]));const i=n.fields.slice(),o=i[t].clone({type:e.type}),a=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[i[t],a[t]]=[o,e],[n,r]=Or(n,a)}return new Sr(n,r)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new Sr(e,n)}assign(t){const e=this.schema.fields,[n,r]=t.schema.fields.reduce(((t,n,r)=>{const[i,o]=t,a=e.findIndex((t=>t.name===n.name));return~a?o[a]=r:i.push(r),t}),[[],[]]),i=this.schema.assign(t.schema),o=[...e.map(((t,e)=>[e,r[e]])).map((([e,n])=>void 0===n?this.getChildAt(e):t.getChildAt(n))),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new Sr(...Or(i,o))}}vr=Symbol.toStringTag,Sr[vr]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=In(On),t.get=In(sn.getVisitFn(b.Struct)),t.set=Sn(Ce.getVisitFn(b.Struct)),t.indexOf=An(jn.getVisitFn(b.Struct)),t.getByteLength=In($n.getVisitFn(b.Struct)),"Table"))(Sr.prototype);class Ar{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,r){return t.prep(8,24),t.writeInt64(r),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const Lr=new Int32Array(2),kr=new Float32Array(Lr.buffer),Tr=new Float64Array(Lr.buffer),Nr=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class Br{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?Br.ZERO:new Br(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var Cr,Mr,Dr,Pr,Fr,jr,Rr,Ur;Br.ZERO=new Br(0,0),(Mr=Cr||(Cr={}))[Mr.UTF8_BYTES=1]="UTF8_BYTES",Mr[Mr.UTF16_STRING=2]="UTF16_STRING";class zr{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new zr(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Br(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Br(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Lr[0]=this.readInt32(t),kr[0]}readFloat64(t){return Lr[Nr?0:1]=this.readInt32(t),Lr[Nr?1:0]=this.readInt32(t+4),Tr[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){kr[0]=e,this.writeInt32(t,Lr[0])}writeFloat64(t,e){Tr[0]=e,this.writeInt32(t,Lr[Nr?0:1]),this.writeInt32(t+4,Lr[Nr?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let r="",i=0;if(t+=4,e===Cr.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;i<n;){let e;const n=this.readUint8(t+i++);if(n<192)e=n;else{const r=this.readUint8(t+i++);if(n<224)e=(31&n)<<6|63&r;else{const o=this.readUint8(t+i++);e=n<240?(15&n)<<12|(63&r)<<6|63&o:(7&n)<<18|(63&r)<<12|(63&o)<<6|63&this.readUint8(t+i++)}}e<65536?r+=String.fromCharCode(e):(e-=65536,r+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return r}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return Br.create(t,e)}createScalarList(t,e){const n=[];for(let r=0;r<e;++r)null!==t(r)&&n.push(t(r));return n}createObjList(t,e){const n=[];for(let r=0;r<e;++r){const e=t(r);null!==e&&n.push(e.unpack())}return n}}class Hr{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=zr.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const n=1+~(this.bb.capacity()-this.space+e)&t-1;for(;this.space<n+t+e;){const t=this.bb.capacity();this.bb=Hr.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,r=zr.allocate(n);return r.setPosition(n-e),r.bytes().set(t.bytes(),n-e),r}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const r=2*(n+2);this.addInt16(r);let i=0;const o=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(r==this.bb.readInt16(t)){for(let e=2;e<r;e+=2)if(this.bb.readInt16(o+e)!=this.bb.readInt16(t+e))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const r=n?4:0;if(e){const t=e;if(this.prep(this.minalign,8+r),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+r),this.addOffset(t),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,r=n-this.bb.readInt32(n);if(0==this.bb.readInt16(r+e))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let r;const i=t.charCodeAt(n++);r=i<55296||i>=56320?i:(i<<10)+t.charCodeAt(n++)+-56613888,r<128?e.push(r):(r<2048?e.push(r>>6&31|192):(r<65536?e.push(r>>12&15|224):e.push(r>>18&7|240,r>>12&63|128),e.push(r>>6&63|128)),e.push(63&r|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let t=0,n=this.space,r=this.bb.bytes();t<e.length;t++)r[n++]=e[t];return this.endVector()}createLong(t,e){return Br.create(t,e)}createObjectOffset(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n];if(null===r)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(r))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class Vr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new Vr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new Vr).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return Vr.startKeyValue(t),Vr.addKey(t,e),Vr.addValue(t,n),Vr.endKeyValue(t)}}!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(Dr||(Dr={})),(Fr=Pr||(Pr={}))[Fr.Little=0]="Little",Fr[Fr.Big=1]="Big",(Rr=jr||(jr={}))[Rr.DenseArray=0]="DenseArray";class Wr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new Wr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new Wr).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return Wr.startInt(t),Wr.addBitWidth(t,e),Wr.addIsSigned(t,n),Wr.endInt(t)}}class Yr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new Yr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new Yr).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Wr).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):jr.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,jr.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(Ur||(Ur={}));class Gr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new Gr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+4),(e||new Gr).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ur.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new Yr).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const n=this.bb.__offset(this.bb_pos,14);return n?(e||new Gr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new Vr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,Ur.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}}class $r{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new $r).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+4),(e||new $r).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Pr.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Gr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Vr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,Pr.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,r,i){return $r.startSchema(t),$r.addEndianness(t,e),$r.addFields(t,n),$r.addCustomMetadata(t,r),$r.addFeatures(t,i),$r.endSchema(t)}}class Xr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new Xr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new Xr).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Dr.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new $r).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Ar).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Ar).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Vr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,Dr.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}var Kr=Br,Zr=Hr,qr=zr;class Jr{constructor(t,e=i.V4,n,r){this.schema=t,this.version=e,n&&(this._recordBatches=n),r&&(this._dictionaryBatches=r)}static decode(t){t=new qr(rt(t));const e=Xr.getRootAsFooter(t),n=nr.decode(e.schema());return new Qr(n,e)}static encode(t){const e=new Zr,n=nr.encode(e,t.schema);Xr.startRecordBatchesVector(e,t.numRecordBatches);for(const n of[...t.recordBatches()].slice().reverse())ti.encode(e,n);const r=e.endVector();Xr.startDictionariesVector(e,t.numDictionaries);for(const n of[...t.dictionaryBatches()].slice().reverse())ti.encode(e,n);const o=e.endVector();return Xr.startFooter(e),Xr.addSchema(e,n),Xr.addVersion(e,i.V4),Xr.addRecordBatches(e,r),Xr.addDictionaries(e,o),Xr.finishFooterBuffer(e,Xr.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Qr extends Jr{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return ti.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return ti.decode(e)}return null}}class ti{constructor(t,e,n){this.metaDataLength=t,this.offset="number"==typeof n?n:n.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new ti(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,r=new Kr(e.offset,0),i=new Kr(e.bodyLength,0);return Ar.createBlock(t,r,n,i)}}const ei={fromIterable:t=>ni(function*(t){let e,n,r,i,o=!1,a=[],s=0;({cmd:r,size:i}=yield null);const l=(c=t,function*(t,e){const n=function*(t){yield t},r="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof J?n(e):C(e)?e:n(e);return yield*it(function*(e){let n=null;do{n=e.next(yield et(t,n))}while(!n.done)}(r[Symbol.iterator]())),new t}(Uint8Array,c))[Symbol.iterator]();var c;try{do{if(({done:e,value:n}=Number.isNaN(i-s)?l.next():l.next(i-s)),!e&&n.byteLength>0&&(a.push(n),s+=n.byteLength),e||i<=s)do{({cmd:r,size:i}=yield"peek"===r?tt(a,i)[0]:([n,a,s]=tt(a,i),n))}while(i<s)}while(!e)}catch(t){(o=!0)&&"function"==typeof l.throw&&l.throw(t)}finally{!1===o&&"function"==typeof l.return&&l.return(null)}return null}(t)),fromAsyncIterable:t=>ni(function(t){return Y(this,arguments,(function*(){let e,n,r,i,o=!1,a=[],s=0;({cmd:r,size:i}=yield yield W(null));const l=(c=t,ot(Uint8Array,c))[Symbol.asyncIterator]();var c;try{do{if(({done:e,value:n}=Number.isNaN(i-s)?yield W(l.next()):yield W(l.next(i-s))),!e&&n.byteLength>0&&(a.push(n),s+=n.byteLength),e||i<=s)do{({cmd:r,size:i}=yield yield W("peek"===r?tt(a,i)[0]:([n,a,s]=tt(a,i),n)))}while(i<s)}while(!e)}catch(t){(o=!0)&&"function"==typeof l.throw&&(yield W(l.throw(t)))}finally{!1===o&&"function"==typeof l.return&&(yield W(l.return(new Uint8Array(0))))}return yield W(null)}))}(t)),fromDOMStream:t=>ni(function(t){return Y(this,arguments,(function*(){let e,n,r,i=!1,o=!1,a=[],s=0;({cmd:n,size:r}=yield yield W(null));const l=new ri(t);try{do{if(({done:i,value:e}=Number.isNaN(r-s)?yield W(l.read()):yield W(l.read(r-s))),!i&&e.byteLength>0&&(a.push(rt(e)),s+=e.byteLength),i||r<=s)do{({cmd:n,size:r}=yield yield W("peek"===n?tt(a,r)[0]:([e,a,s]=tt(a,r),e)))}while(r<s)}while(!i)}catch(t){(o=!0)&&(yield W(l.cancel(t)))}finally{!1===o?yield W(l.cancel()):t.locked&&l.releaseLock()}return yield W(null)}))}(t)),fromNodeStream:t=>ni(function(t){return Y(this,arguments,(function*(){const e=[];let n,r,i,o="error",a=!1,s=null,l=0,c=[];if(({cmd:n,size:r}=yield yield W(null)),t.isTTY)return yield yield W(new Uint8Array(0)),yield W(null);try{e[0]=ii(t,"end"),e[1]=ii(t,"error");do{if(e[2]=ii(t,"readable"),[o,s]=yield W(Promise.race(e.map((t=>t[2])))),"error"===o)break;if((a="end"===o)||(Number.isFinite(r-l)?(i=rt(t.read(r-l)),i.byteLength<r-l&&(i=rt(t.read()))):i=rt(t.read()),i.byteLength>0&&(c.push(i),l+=i.byteLength)),a||r<=l)do{({cmd:n,size:r}=yield yield W("peek"===n?tt(c,r)[0]:([i,c,l]=tt(c,r),i)))}while(r<l)}while(!a)}finally{yield W(function(e,n){return i=c=null,new Promise(((r,i)=>{for(const[n,r]of e)t.off(n,r);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(t){n=t||n}finally{null!=n?i(n):r()}}))}(e,"error"===o?s:null))}return yield W(null)}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},ni=t=>(t.next(),t);class ri{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return V(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return V(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=rt(e)),e}))}}const ii=(t,e)=>{const n=t=>r([e,t]);let r;return[e,n,new Promise((i=>(r=i)&&t.once(e,n)))]},oi=Object.freeze({done:!0,value:void 0});class ai{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class si{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class li extends si{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return V(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(oi);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ei.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ei.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return V(this,void 0,void 0,(function*(){return yield this.abort(t),oi}))}return(t){return V(this,void 0,void 0,(function*(){return yield this.close(),oi}))}read(t){return V(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return V(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(oi)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class ci extends li{write(t){if((t=rt(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?K(this.toUint8Array(!0)):this.toUint8Array(!1).then(K)}toUint8Array(t=!1){return t?tt(this._values)[0]:(()=>V(this,void 0,void 0,(function*(){var t,e;const n=[];let r=0;try{for(var i,o=$(this);!(i=yield o.next()).done;){const t=i.value;n.push(t),r+=t.byteLength}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&(yield e.call(o))}finally{if(t)throw t.error}}return tt(n,r)[0]})))()}}class ui{constructor(t){t&&(this.source=new hi(ei.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class di{constructor(t){t instanceof di?this.source=t.source:t instanceof ci?this.source=new fi(ei.fromAsyncIterable(t)):z(t)?this.source=new fi(ei.fromNodeStream(t)):U(t)?this.source=new fi(ei.fromDOMStream(t)):j(t)?this.source=new fi(ei.fromDOMStream(t.body)):C(t)?this.source=new fi(ei.fromIterable(t)):(B(t)||M(t))&&(this.source=new fi(ei.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class hi{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||oi)}return(t){return Object.create(this.source.return&&this.source.return(t)||oi)}}class fi{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}cancel(t){return V(this,void 0,void 0,(function*(){yield this.return(t)}))}get closed(){return this._closedPromise}read(t){return V(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return V(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(t,e="read"){return V(this,void 0,void 0,(function*(){return yield this.source.next({cmd:e,size:t})}))}throw(t){return V(this,void 0,void 0,(function*(){const e=this.source.throw&&(yield this.source.throw(t))||oi;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}return(t){return V(this,void 0,void 0,(function*(){const e=this.source.return&&(yield this.source.return(t))||oi;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}}class pi extends ui{constructor(t,e){super(),this.position=0,this.buffer=rt(t),this.size=void 0===e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:r}=this;return e&&r<n?("number"!=typeof t&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,r+Math.min(n-r,t)),e.subarray(r,this.position)):null}readAt(t,e){const n=this.buffer,r=Math.min(this.size,t+e);return n?n.subarray(t,r):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class mi extends di{constructor(t,e){super(),this.position=0,this._handle=t,"number"==typeof e?this.size=e:this._pending=(()=>V(this,void 0,void 0,(function*(){this.size=(yield t.stat()).size,delete this._pending})))()}readInt32(t){return V(this,void 0,void 0,(function*(){const{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}))}seek(t){return V(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size}))}read(t){return V(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:e,size:n,position:r}=this;if(e&&r<n){"number"!=typeof t&&(t=Number.POSITIVE_INFINITY);let i=r,o=0,a=0;const s=Math.min(n,i+Math.min(n-i,t)),l=new Uint8Array(Math.max(0,(this.position=s)-i));for(;(i+=a)<s&&(o+=a)<l.byteLength;)({bytesRead:a}=yield e.read(l,o,l.byteLength-o,i));return l}return null}))}readAt(t,e){return V(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:n,size:r}=this;if(n&&t+e<r){const i=Math.min(r,t+e),o=new Uint8Array(i-t);return(yield n.read(o,0,e,t)).buffer}return new Uint8Array(e)}))}close(){return V(this,void 0,void 0,(function*(){const t=this._handle;this._handle=null,t&&(yield t.close())}))}throw(t){return V(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}return(t){return V(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}}function yi(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const gi=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class bi{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let r=e[3]*n[3];this.buffer[0]=65535&r;let i=r>>>16;return r=e[2]*n[3],i+=r,r=e[3]*n[2]>>>0,i+=r,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<r?65536:0,this.buffer[1]+=i>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${yi(this.buffer[1])} ${yi(this.buffer[0])}`}}class vi extends bi{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return vi.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return vi.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.length,r=new vi(e);for(let e=0;e<n;){const i=8<n-e?8:n-e,o=new vi(new Uint32Array([Number.parseInt(t.slice(e,e+i),10),0])),a=new vi(new Uint32Array([gi[i],0]));r.times(a),r.plus(o),e+=i}return r}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,r=t.length;++n<r;)vi.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new vi(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new vi(new Uint32Array(t.buffer)).plus(e)}}class wi extends bi{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=0|this.buffer[1],n=0|t.buffer[1];return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return wi.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return wi.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.startsWith("-"),r=t.length,i=new wi(e);for(let e=n?1:0;e<r;){const n=8<r-e?8:r-e,o=new wi(new Uint32Array([Number.parseInt(t.slice(e,e+n),10),0])),a=new wi(new Uint32Array([gi[n],0]));i.times(a),i.plus(o),e+=n}return n?i.negate():i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,r=t.length;++n<r;)wi.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new wi(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new wi(new Uint32Array(t.buffer)).plus(e)}}class _i{constructor(t){this.buffer=t}high(){return new wi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new wi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new vi(new Uint32Array([this.buffer[3],0])),n=new vi(new Uint32Array([this.buffer[2],0])),r=new vi(new Uint32Array([this.buffer[1],0])),i=new vi(new Uint32Array([this.buffer[0],0])),o=new vi(new Uint32Array([t.buffer[3],0])),a=new vi(new Uint32Array([t.buffer[2],0])),s=new vi(new Uint32Array([t.buffer[1],0])),l=new vi(new Uint32Array([t.buffer[0],0]));let c=vi.multiply(i,l);this.buffer[0]=c.low();const u=new vi(new Uint32Array([c.high(),0]));return c=vi.multiply(r,l),u.plus(c),c=vi.multiply(i,s),u.plus(c),this.buffer[1]=u.low(),this.buffer[3]=u.lessThan(c)?1:0,this.buffer[2]=u.high(),new vi(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(vi.multiply(n,l)).plus(vi.multiply(r,s)).plus(vi.multiply(i,a)),this.buffer[3]+=vi.multiply(e,l).plus(vi.multiply(n,s)).plus(vi.multiply(r,a)).plus(vi.multiply(i,o)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${yi(this.buffer[3])} ${yi(this.buffer[2])} ${yi(this.buffer[1])} ${yi(this.buffer[0])}`}static multiply(t,e){return new _i(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new _i(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return _i.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return _i.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const n=t.startsWith("-"),r=t.length,i=new _i(e);for(let e=n?1:0;e<r;){const n=8<r-e?8:r-e,o=new _i(new Uint32Array([Number.parseInt(t.slice(e,e+n),10),0,0,0])),a=new _i(new Uint32Array([gi[n],0,0,0]));i.times(a),i.plus(o),e+=n}return n?i.negate():i}static convertArray(t){const e=new Uint32Array(4*t.length);for(let n=-1,r=t.length;++n<r;)_i.from(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e}}class xi extends ae{constructor(t,e,n,r){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=r}visit(t){return super.visit(t instanceof rr?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return er({type:t,length:e})}visitBool(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===a.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:e,nullCount:n}=this.nextFieldNode()){return er({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,n=this.nextBufferRange()){return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Ei extends xi{constructor(t,e,n,r){super(new Uint8Array(0),e,n,r),this.sources=t}readNullBitmap(t,e,{offset:n}=this.nextBufferRange()){return e<=0?new Uint8Array(0):Nn(this.sources[n])}readOffsets(t,{offset:e}=this.nextBufferRange()){return et(Uint8Array,et(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return et(Uint8Array,et(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:n}=this;return Ft.isTimestamp(t)||(Ft.isInt(t)||Ft.isTime(t))&&64===t.bitWidth||Ft.isDate(t)&&t.unit===u.MILLISECOND?et(Uint8Array,wi.convertArray(n[e])):Ft.isDecimal(t)?et(Uint8Array,_i.convertArray(n[e])):Ft.isBinary(t)||Ft.isFixedSizeBinary(t)?function(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t>>1]=Number.parseInt(e.slice(t,t+2),16);return n}(n[e]):Ft.isBool(t)?Nn(n[e]):Ft.isUtf8(t)?q(n[e].join("")):et(Uint8Array,et(t.ArrayType,n[e].map((t=>+t))))}}var Oi,Ii,Si,Ai,Li,ki,Ti,Ni,Bi,Ci;(Ii=Oi||(Oi={}))[Ii.BUFFER=0]="BUFFER",(Ai=Si||(Si={}))[Ai.LZ4_FRAME=0]="LZ4_FRAME",Ai[Ai.ZSTD=1]="ZSTD";class Mi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new Mi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new Mi).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Si.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Oi.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Si.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,Oi.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return Mi.startBodyCompression(t),Mi.addCodec(t,e),Mi.addMethod(t,n),Mi.endBodyCompression(t)}}class Di{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class Pi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class Fi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new Fi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+4),(e||new Fi).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Pi).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new Di).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new Mi).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}}class ji{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new ji).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+4),(e||new ji).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Fi).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(Li||(Li={}));class Ri{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new Ri).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new Ri).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Li.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,Li.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return Ri.startFloatingPoint(t),Ri.addPrecision(t,e),Ri.endFloatingPoint(t)}}class Ui{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new Ui).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new Ui).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,r){return Ui.startDecimal(t),Ui.addPrecision(t,e),Ui.addScale(t,n),Ui.addBitWidth(t,r),Ui.endDecimal(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(ki||(ki={}));class zi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new zi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+4),(e||new zi).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ki.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,ki.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return zi.startDate(t),zi.addUnit(t,e),zi.endDate(t)}}!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(Ti||(Ti={}));class Hi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new Hi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new Hi).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ti.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Ti.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return Hi.startTime(t),Hi.addUnit(t,e),Hi.addBitWidth(t,n),Hi.endTime(t)}}class Vi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new Vi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new Vi).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ti.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Ti.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return Vi.startTimestamp(t),Vi.addUnit(t,e),Vi.addTimezone(t,n),Vi.endTimestamp(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(Ni||(Ni={}));class Wi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new Wi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new Wi).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ni.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Ni.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return Wi.startInterval(t),Wi.addUnit(t,e),Wi.endInterval(t)}}!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(Bi||(Bi={}));class Yi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new Yi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new Yi).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bi.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Bi.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return Yi.startUnion(t),Yi.addMode(t,e),Yi.addTypeIds(t,n),Yi.endUnion(t)}}class Gi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new Gi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new Gi).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return Gi.startFixedSizeBinary(t),Gi.addByteWidth(t,e),Gi.endFixedSizeBinary(t)}}class $i{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new $i).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new $i).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return $i.startFixedSizeList(t),$i.addListSize(t,e),$i.endFixedSizeList(t)}}class Xi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new Xi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+4),(e||new Xi).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return Xi.startMap(t),Xi.addKeysSorted(t,e),Xi.endMap(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(Ci||(Ci={}));class Ki{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new Ki).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+4),(e||new Ki).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Dr.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Ci.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Vr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,Dr.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,Ci.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,r,i,o){return Ki.startMessage(t),Ki.addVersion(t,e),Ki.addHeaderType(t,n),Ki.addHeader(t,r),Ki.addBodyLength(t,i),Ki.addCustomMetadata(t,o),Ki.endMessage(t)}}class Zi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new Zi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new Zi).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Zi.startNull(t),Zi.endNull(t)}}class qi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new qi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new qi).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return qi.startBinary(t),qi.endBinary(t)}}class Ji{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new Ji).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new Ji).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Ji.startBool(t),Ji.endBool(t)}}class Qi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new Qi).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new Qi).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Qi.startUtf8(t),Qi.endUtf8(t)}}class to{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new to).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new to).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return to.startList(t),to.endList(t)}}class eo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new eo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new eo).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return eo.startStruct_(t),eo.endStruct_(t)}}var no=Br;const ro=new class extends ae{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return Zi.startNull(e),Zi.endNull(e)}visitInt(t,e){return Wr.startInt(e),Wr.addBitWidth(e,t.bitWidth),Wr.addIsSigned(e,t.isSigned),Wr.endInt(e)}visitFloat(t,e){return Ri.startFloatingPoint(e),Ri.addPrecision(e,t.precision),Ri.endFloatingPoint(e)}visitBinary(t,e){return qi.startBinary(e),qi.endBinary(e)}visitBool(t,e){return Ji.startBool(e),Ji.endBool(e)}visitUtf8(t,e){return Qi.startUtf8(e),Qi.endUtf8(e)}visitDecimal(t,e){return Ui.startDecimal(e),Ui.addScale(e,t.scale),Ui.addPrecision(e,t.precision),Ui.addBitWidth(e,t.bitWidth),Ui.endDecimal(e)}visitDate(t,e){return zi.startDate(e),zi.addUnit(e,t.unit),zi.endDate(e)}visitTime(t,e){return Hi.startTime(e),Hi.addUnit(e,t.unit),Hi.addBitWidth(e,t.bitWidth),Hi.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return Vi.startTimestamp(e),Vi.addUnit(e,t.unit),void 0!==n&&Vi.addTimezone(e,n),Vi.endTimestamp(e)}visitInterval(t,e){return Wi.startInterval(e),Wi.addUnit(e,t.unit),Wi.endInterval(e)}visitList(t,e){return to.startList(e),to.endList(e)}visitStruct(t,e){return eo.startStruct_(e),eo.endStruct_(e)}visitUnion(t,e){Yi.startTypeIdsVector(e,t.typeIds.length);const n=Yi.createTypeIdsVector(e,t.typeIds);return Yi.startUnion(e),Yi.addMode(e,t.mode),Yi.addTypeIds(e,n),Yi.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return Yr.startDictionaryEncoding(e),Yr.addId(e,new no(t.id,0)),Yr.addIsOrdered(e,t.isOrdered),void 0!==n&&Yr.addIndexType(e,n),Yr.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Gi.startFixedSizeBinary(e),Gi.addByteWidth(e,t.byteWidth),Gi.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return $i.startFixedSizeList(e),$i.addListSize(e,t.listSize),$i.endFixedSizeList(e)}visitMap(t,e){return Xi.startMap(e),Xi.addKeysSorted(e,t.keysSorted),Xi.endMap(e)}};function io(t){return new yo(t.count,ao(t.columns),so(t.columns))}function oo(t,e){return(t.children||[]).filter(Boolean).map((t=>rr.fromJSON(t,e)))}function ao(t){return(t||[]).reduce(((t,e)=>{return[...t,new vo(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...ao(e.children)];var n}),[])}function so(t,e=[]){for(let n=-1,r=(t||[]).length;++n<r;){const r=t[n];r.VALIDITY&&e.push(new bo(e.length,r.VALIDITY.length)),r.TYPE&&e.push(new bo(e.length,r.TYPE.length)),r.OFFSET&&e.push(new bo(e.length,r.OFFSET.length)),r.DATA&&e.push(new bo(e.length,r.DATA.length)),e=so(r.children,e)}return e}function lo(t){return new Map(Object.entries(t||{}))}function co(t){return new Rt(t.isSigned,t.bitWidth)}function uo(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new jt;case"binary":return new Ht;case"utf8":return new Vt;case"bool":return new Wt;case"list":return new Zt((e||[])[0]);case"struct":case"struct_":return new qt(e||[])}switch(n){case"int":{const e=t.type;return new Rt(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new zt(l[e.precision])}case"decimal":{const e=t.type;return new Yt(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new Gt(u[e.unit])}case"time":{const e=t.type;return new $t(h[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new Xt(h[e.unit],e.timezone)}case"interval":{const e=t.type;return new Kt(p[e.unit])}case"union":{const n=t.type;return new Jt(a[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new Qt(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new te(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new ee((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var ho=Br,fo=Hr,po=zr;class mo{constructor(t,e,n,r){this._version=e,this._headerType=n,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const n=new mo(0,i.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case y.Schema:return nr.fromJSON(t);case y.RecordBatch:return yo.fromJSON(t);case y.DictionaryBatch:return go.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${y[e]}, type: ${e} }`)}}(t,e),n}static decode(t){t=new po(rt(t));const e=Ki.getRootAsMessage(t),n=e.bodyLength(),r=e.version(),i=e.headerType(),o=new mo(n,r,i);return o._createHeader=function(t,e){return()=>{switch(e){case y.Schema:return nr.decode(t.header(new $r));case y.RecordBatch:return yo.decode(t.header(new Fi),t.version());case y.DictionaryBatch:return go.decode(t.header(new ji),t.version())}throw new Error(`Unrecognized Message type: { name: ${y[e]}, type: ${e} }`)}}(e,i),o}static encode(t){const e=new fo;let n=-1;return t.isSchema()?n=nr.encode(e,t.header()):t.isRecordBatch()?n=yo.encode(e,t.header()):t.isDictionaryBatch()&&(n=go.encode(e,t.header())),Ki.startMessage(e),Ki.addVersion(e,i.V4),Ki.addHeader(e,n),Ki.addHeaderType(e,t.headerType),Ki.addBodyLength(e,new ho(t.bodyLength,0)),Ki.finishMessageBuffer(e,Ki.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof nr)return new mo(0,i.V4,y.Schema,t);if(t instanceof yo)return new mo(e,i.V4,y.RecordBatch,t);if(t instanceof go)return new mo(e,i.V4,y.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===y.Schema}isRecordBatch(){return this.headerType===y.RecordBatch}isDictionaryBatch(){return this.headerType===y.DictionaryBatch}}class yo{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class go{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class bo{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class vo{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function wo(t,e){const n=[];for(let r,i=-1,o=-1,a=t.childrenLength();++i<a;)(r=t.children(i))&&(n[++o]=rr.decode(r,e));return n}function _o(t){const e=new Map;if(t)for(let n,r,i=-1,o=Math.trunc(t.customMetadataLength());++i<o;)(n=t.customMetadata(i))&&null!=(r=n.key())&&e.set(r,n.value());return e}function xo(t){return new Rt(t.isSigned(),t.bitWidth())}function Eo(t,e){const n=t.typeType();switch(n){case Ur.NONE:case Ur.Null:return new jt;case Ur.Binary:return new Ht;case Ur.Utf8:return new Vt;case Ur.Bool:return new Wt;case Ur.List:return new Zt((e||[])[0]);case Ur.Struct_:return new qt(e||[])}switch(n){case Ur.Int:{const e=t.type(new Wr);return new Rt(e.isSigned(),e.bitWidth())}case Ur.FloatingPoint:{const e=t.type(new Ri);return new zt(e.precision())}case Ur.Decimal:{const e=t.type(new Ui);return new Yt(e.scale(),e.precision(),e.bitWidth())}case Ur.Date:{const e=t.type(new zi);return new Gt(e.unit())}case Ur.Time:{const e=t.type(new Hi);return new $t(e.unit(),e.bitWidth())}case Ur.Timestamp:{const e=t.type(new Vi);return new Xt(e.unit(),e.timezone())}case Ur.Interval:{const e=t.type(new Wi);return new Kt(e.unit())}case Ur.Union:{const n=t.type(new Yi);return new Jt(n.mode(),n.typeIdsArray()||[],e||[])}case Ur.FixedSizeBinary:{const e=t.type(new Gi);return new Qt(e.byteWidth())}case Ur.FixedSizeList:{const n=t.type(new $i);return new te(n.listSize(),(e||[])[0])}case Ur.Map:{const n=t.type(new Xi);return new ee((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${Ur[n]}" (${n})`)}rr.encode=function(t,e){let n=-1,r=-1,i=-1;const o=e.type;let a=e.typeId;Ft.isDictionary(o)?(a=o.dictionary.typeId,i=ro.visit(o,t),r=ro.visit(o.dictionary,t)):r=ro.visit(o,t);const s=(o.children||[]).map((e=>rr.encode(t,e))),l=Gr.createChildrenVector(t,s),c=e.metadata&&e.metadata.size>0?Gr.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const r=t.createString(`${e}`),i=t.createString(`${n}`);return Vr.startKeyValue(t),Vr.addKey(t,r),Vr.addValue(t,i),Vr.endKeyValue(t)}))):-1;return e.name&&(n=t.createString(e.name)),Gr.startField(t),Gr.addType(t,r),Gr.addTypeType(t,a),Gr.addChildren(t,l),Gr.addNullable(t,!!e.nullable),-1!==n&&Gr.addName(t,n),-1!==i&&Gr.addDictionary(t,i),-1!==c&&Gr.addCustomMetadata(t,c),Gr.endField(t)},rr.decode=function(t,e){let n,r,i,o,a,s;return e&&(s=t.dictionary())?e.has(n=s.id().low)?(o=(o=s.indexType())?xo(o):new Ut,a=new ie(e.get(n),o,n,s.isOrdered()),r=new rr(t.name(),a,t.nullable(),_o(t))):(o=(o=s.indexType())?xo(o):new Ut,e.set(n,i=Eo(t,wo(t,e))),a=new ie(i,o,n,s.isOrdered()),r=new rr(t.name(),a,t.nullable(),_o(t))):(i=Eo(t,wo(t,e)),r=new rr(t.name(),i,t.nullable(),_o(t))),r||null},rr.fromJSON=function(t,e){let n,r,i,o,a,s;return e&&(o=t.dictionary)?e.has(n=o.id)?(r=(r=o.indexType)?co(r):new Ut,s=new ie(e.get(n),r,n,o.isOrdered),i=new rr(t.name,s,t.nullable,lo(t.customMetadata))):(r=(r=o.indexType)?co(r):new Ut,e.set(n,a=uo(t,oo(t,e))),s=new ie(a,r,n,o.isOrdered),i=new rr(t.name,s,t.nullable,lo(t.customMetadata))):(a=uo(t,oo(t,e)),i=new rr(t.name,a,t.nullable,lo(t.customMetadata))),i||null},nr.encode=function(t,e){const n=e.fields.map((e=>rr.encode(t,e)));$r.startFieldsVector(t,n.length);const r=$r.createFieldsVector(t,n),i=e.metadata&&e.metadata.size>0?$r.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const r=t.createString(`${e}`),i=t.createString(`${n}`);return Vr.startKeyValue(t),Vr.addKey(t,r),Vr.addValue(t,i),Vr.endKeyValue(t)}))):-1;return $r.startSchema(t),$r.addFields(t,r),$r.addEndianness(t,Oo?Pr.Little:Pr.Big),-1!==i&&$r.addCustomMetadata(t,i),$r.endSchema(t)},nr.decode=function(t,e=new Map){const n=function(t,e){const n=[];for(let r,i=-1,o=-1,a=t.fieldsLength();++i<a;)(r=t.fields(i))&&(n[++o]=rr.decode(r,e));return n}(t,e);return new nr(n,_o(t),e)},nr.fromJSON=function(t,e=new Map){return new nr(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>rr.fromJSON(t,e)))}(t,e),lo(t.customMetadata),e)},yo.encode=function(t,e){const n=e.nodes||[],r=e.buffers||[];Fi.startNodesVector(t,n.length);for(const e of n.slice().reverse())vo.encode(t,e);const i=t.endVector();Fi.startBuffersVector(t,r.length);for(const e of r.slice().reverse())bo.encode(t,e);const o=t.endVector();return Fi.startRecordBatch(t),Fi.addLength(t,new ho(e.length,0)),Fi.addNodes(t,i),Fi.addBuffers(t,o),Fi.endRecordBatch(t)},yo.decode=function(t,e=i.V4){if(null!==t.compression())throw new Error("Record batch compression not implemented");return new yo(t.length(),function(t){const e=[];for(let n,r=-1,i=-1,o=t.nodesLength();++r<o;)(n=t.nodes(r))&&(e[++i]=vo.decode(n));return e}(t),function(t,e){const n=[];for(let r,o=-1,a=-1,s=t.buffersLength();++o<s;)(r=t.buffers(o))&&(e<i.V4&&(r.bb_pos+=8*(o+1)),n[++a]=bo.decode(r));return n}(t,e))},yo.fromJSON=io,go.encode=function(t,e){const n=yo.encode(t,e.data);return ji.startDictionaryBatch(t),ji.addId(t,new ho(e.id,0)),ji.addIsDelta(t,e.isDelta),ji.addData(t,n),ji.endDictionaryBatch(t)},go.decode=function(t,e=i.V4){return new go(yo.decode(t.data(),e),t.id(),t.isDelta())},go.fromJSON=function(t){return new go(io(t.data),t.id,t.isDelta)},vo.encode=function(t,e){return Pi.createFieldNode(t,new ho(e.length,0),new ho(e.nullCount,0))},vo.decode=function(t){return new vo(t.length(),t.nullCount())},bo.encode=function(t,e){return Di.createBuffer(t,new ho(e.offset,0),new ho(e.length,0))},bo.decode=function(t){return new bo(t.offset(),t.length())};const Oo=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),Io=t=>`Expected ${y[t]} Message in stream, but was null or length 0.`,So=t=>`Header pointer of flatbuffer-encoded ${y[t]} Message is null or length 0.`,Ao=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,Lo=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class ko{constructor(t){this.source=t instanceof ui?t:new ui(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?oi:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Io(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=rt(this.source.read(t));if(e.byteLength<t)throw new Error(Lo(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=y.Schema,n=this.readMessage(e),r=null==n?void 0:n.header();if(t&&!r)throw new Error(So(e));return r}readMetadataLength(){const t=this.source.read(Bo),e=t&&new zr(t),n=(null==e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return oi;if(e.byteLength<t)throw new Error(Ao(t,e.byteLength));return{done:!1,value:mo.decode(e)}}}class To{constructor(t,e){this.source=t instanceof di?t:F(t)?new mi(t,e):new di(t)}[Symbol.asyncIterator](){return this}next(){return V(this,void 0,void 0,(function*(){let t;return(t=yield this.readMetadataLength()).done||-1===t.value&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?oi:t}))}throw(t){return V(this,void 0,void 0,(function*(){return yield this.source.throw(t)}))}return(t){return V(this,void 0,void 0,(function*(){return yield this.source.return(t)}))}readMessage(t){return V(this,void 0,void 0,(function*(){let e;if((e=yield this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Io(t));return e.value}))}readMessageBody(t){return V(this,void 0,void 0,(function*(){if(t<=0)return new Uint8Array(0);const e=rt(yield this.source.read(t));if(e.byteLength<t)throw new Error(Lo(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}))}readSchema(t=!1){return V(this,void 0,void 0,(function*(){const e=y.Schema,n=yield this.readMessage(e),r=null==n?void 0:n.header();if(t&&!r)throw new Error(So(e));return r}))}readMetadataLength(){return V(this,void 0,void 0,(function*(){const t=yield this.source.read(Bo),e=t&&new zr(t),n=(null==e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}))}readMetadata(t){return V(this,void 0,void 0,(function*(){const e=yield this.source.read(t);if(!e)return oi;if(e.byteLength<t)throw new Error(Ao(t,e.byteLength));return{done:!1,value:mo.decode(e)}}))}}class No extends ko{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof ai?t:new ai(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:mo.fromJSON(t.schema,y.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];return this._body=e.data.columns,{done:!1,value:mo.fromJSON(e,y.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];return this._body=e.columns,{done:!1,value:mo.fromJSON(e,y.RecordBatch)}}return this._body=[],oi}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,n)=>[...e,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE&&[n.TYPE]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...t(n.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Io(t));return e.value}readSchema(){const t=y.Schema,e=this.readMessage(t),n=null==e?void 0:e.header();if(!e||!n)throw new Error(So(t));return n}}const Bo=4,Co=new Uint8Array(6);for(let t=0;t<6;t+=1)Co[t]="ARROW1".codePointAt(t);function Mo(t,e=0){for(let n=-1,r=Co.length;++n<r;)if(Co[n]!==t[e+n])return!1;return!0}const Do=Co.length,Po=Do+Bo,Fo=2*Do+Bo;class jo extends si{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return B(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ei.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ei.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof jo?t:D(t)?function(t){return new Ro(new Xo(t))}(t):F(t)?function(t){return V(this,void 0,void 0,(function*(){const{size:e}=yield t.stat(),n=new mi(t,e);return e>=Fo&&Mo(yield n.readAt(0,Do+7&-8))?new Ho(new $o(n)):new Uo(new Yo(n))}))}(t):B(t)?(()=>V(this,void 0,void 0,(function*(){return yield jo.from(yield t)})))():j(t)||U(t)||z(t)||M(t)?function(t){return V(this,void 0,void 0,(function*(){const e=yield t.peek(Do+7&-8);return e&&e.byteLength>=4?Mo(e)?new zo(new Go(yield t.read())):new Uo(new Yo(t)):new Uo(new Yo(function(){return Y(this,arguments,(function*(){}))}()))}))}(new di(t)):function(t){const e=t.peek(Do+7&-8);return e&&e.byteLength>=4?Mo(e)?new zo(new Go(t.read())):new Ro(new Wo(t)):new Ro(new Wo(function*(){}()))}(new ui(t))}static readAll(t){return t instanceof jo?t.isSync()?Zo(t):qo(t):D(t)||ArrayBuffer.isView(t)||C(t)||P(t)?Zo(t):qo(t)}}class Ro extends jo{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Y(this,arguments,(function*(){yield W(yield*G($(this[Symbol.iterator]())))}))}}class Uo extends jo{constructor(t){super(t),this._impl=t}readAll(){var t,e;return V(this,void 0,void 0,(function*(){const n=new Array;try{for(var r,i=$(this);!(r=yield i.next()).done;){const t=r.value;n.push(t)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&(yield e.call(i))}finally{if(t)throw t.error}}return n}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class zo extends Ro{constructor(t){super(t),this._impl=t}}class Ho extends Uo{constructor(t){super(t),this._impl=t}}class Vo{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const n=this._loadVectors(t,e,this.schema.fields),r=er({type:new qt(this.schema.fields),length:t.length,children:n});return new wr(this.schema,r)}_loadDictionaryBatch(t,e){const{id:n,isDelta:r}=t,{dictionaries:i,schema:o}=this,a=i.get(n);if(r||!a){const i=o.dictionaries.get(n),s=this._loadVectors(t.data,e,[i]);return(a&&r?a.concat(new qn(s)):new qn(s)).memoize()}return a.memoize()}_loadVectors(t,e,n){return new xi(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class Wo extends Vo{constructor(t,e){super(e),this._reader=D(t)?new No(this._handle=t):new ko(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Ko(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):oi}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):oi}next(){if(this.closed)return oi;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),r=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,r)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),r=e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Er(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Yo extends Vo{constructor(t,e){super(e),this._reader=new To(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return V(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(t){return V(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=Ko(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(t){return V(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):oi}))}return(t){return V(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):oi}))}next(){return V(this,void 0,void 0,(function*(){if(this.closed)return oi;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),r=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,r)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),r=yield e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Er(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(t){return V(this,void 0,void 0,(function*(){return yield this._reader.readMessage(t)}))}}class Go extends Wo{constructor(t,e){super(t instanceof pi?t:new pi(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(y.RecordBatch);if(null==t?void 0:t.isRecordBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}_readDictionaryBatch(t){var e;const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(y.DictionaryBatch);if(null==t?void 0:t.isDictionaryBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,r)}}}_readFooter(){const{_handle:t}=this,e=t.size-Po,n=t.readInt32(e),r=t.readAt(e-n,n);return Jr.decode(r)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class $o extends Yo{constructor(t,...e){const n="number"!=typeof e[0]?e.shift():void 0,r=e[0]instanceof Map?e.shift():void 0;super(t instanceof mi?t:new mi(t,n),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return V(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)}))}readRecordBatch(t){var e;return V(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(y.RecordBatch);if(null==t?void 0:t.isRecordBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}))}_readDictionaryBatch(t){var e;return V(this,void 0,void 0,(function*(){const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(y.DictionaryBatch);if(null==t?void 0:t.isDictionaryBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,r)}}}))}_readFooter(){return V(this,void 0,void 0,(function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-Po,n=yield t.readInt32(e),r=yield t.readAt(e-n,n);return Jr.decode(r)}))}_readNextMessageAndValidate(t){return V(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null}))}}class Xo extends Wo{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new Ei(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function Ko(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*Zo(t){const e=jo.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}function qo(t){return Y(this,arguments,(function*(){const e=yield W(jo.from(t));try{if(!(yield W(e.open({autoDestroy:!1}))).closed)do{yield yield W(e)}while(!(yield W(e.reset().open())).closed)}finally{yield W(e.cancel())}}))}class Jo extends ae{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=t=>t.flatMap((t=>Array.isArray(t)?e(t):t instanceof wr?t.data.children:t.data)),n=new Jo;return n.visitMany(e(t)),n}visit(t){if(t instanceof qn)return this.visitMany(t.data),this;const{type:e}=t;if(!Ft.isDictionary(e)){const{length:n,nullCount:r}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Ft.isNull(e)||Qo.call(this,r<=0?new Uint8Array(0):Tn(t.offset,n,t.nullBitmap)),this.nodes.push(new vo(n,r))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Qo(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new bo(this._byteLength,e)),this._byteLength+=e,this}function ta(t){return Qo.call(this,t.values.subarray(0,t.length*t.stride))}function ea(t){const{length:e,values:n,valueOffsets:r}=t,i=r[0],o=r[e],a=Math.min(o-i,n.byteLength-i);return Qo.call(this,at(-r[0],e,r)),Qo.call(this,n.subarray(i,i+a)),this}function na(t){const{length:e,valueOffsets:n}=t;return n&&Qo.call(this,at(n[0],e,n)),this.visit(t.children[0])}function ra(t){return this.visitMany(t.type.children.map(((e,n)=>t.children[n])).filter(Boolean))[0]}Jo.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?Qo.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Qo.call(this,Tn(t.offset,t.length,e)):Qo.call(this,Nn(t.values))},Jo.prototype.visitInt=ta,Jo.prototype.visitFloat=ta,Jo.prototype.visitUtf8=ea,Jo.prototype.visitBinary=ea,Jo.prototype.visitFixedSizeBinary=ta,Jo.prototype.visitDate=ta,Jo.prototype.visitTimestamp=ta,Jo.prototype.visitTime=ta,Jo.prototype.visitDecimal=ta,Jo.prototype.visitList=na,Jo.prototype.visitStruct=ra,Jo.prototype.visitUnion=function(t){const{type:e,length:n,typeIds:r,valueOffsets:i}=t;if(Qo.call(this,r),e.mode===a.Sparse)return ra.call(this,t);if(e.mode===a.Dense){if(t.offset<=0)return Qo.call(this,i),ra.call(this,t);{const o=r.reduce(((t,e)=>Math.max(t,e)),r[0]),a=new Int32Array(o+1),s=new Int32Array(o+1).fill(-1),l=new Int32Array(n),c=at(-i[0],n,i);for(let t,e,i=-1;++i<n;)-1===(e=s[t=r[i]])&&(e=s[t]=c[t]),l[i]=c[i]-e,++a[t];Qo.call(this,l);for(let r,i=-1,o=e.children.length;++i<o;)if(r=t.children[i]){const t=e.typeIds[i],o=Math.min(n,a[t]);this.visit(r.slice(s[t],o))}}}return this},Jo.prototype.visitInterval=ta,Jo.prototype.visitFixedSizeList=na,Jo.prototype.visitMap=na;class ia extends si{constructor(t){super(),this._position=0,this._started=!1,this._sink=new ci,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,N(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return B(t)?t.then((t=>this.writeAll(t))):M(t)?la(this,t):sa(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var n;return t===this._sink||t instanceof ci?this._sink=t:(this._sink=new ci,t&&N(n=t)&&T(n.abort)&&T(n.getWriter)&&!R(n)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>N(t)&&T(t.end)&&T(t.write)&&k(t.writable)&&!R(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&gr(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof Sr&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof wr&&!(e=t.schema))return this.finish()&&void 0;if(e&&!gr(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof wr?t instanceof Er||this._writeRecordBatch(t):t instanceof Sr?this.writeAll(t.batches):C(t)&&this.writeAll(t)}_writeMessage(t,e=8){const n=e-1,r=mo.encode(t),i=r.byteLength,o=this._writeLegacyIpcFormat?4:8,a=i+o+n&~n,s=a-i-o;return t.headerType===y.RecordBatch?this._recordBatchBlocks.push(new ti(a,t.bodyLength,this._position)):t.headerType===y.DictionaryBatch&&this._dictionaryBlocks.push(new ti(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),i>0&&this._write(r),this._writePadding(s)}_write(t){if(this._started){const e=rt(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(mo.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Co)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:r,buffers:i}=Jo.assemble(t),o=new yo(t.numRows,n,r),a=mo.from(o,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(i)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:r,nodes:i,bufferRegions:o,buffers:a}=Jo.assemble(new qn([t])),s=new yo(t.length,i,o),l=new go(s,e,n),c=mo.from(l,r);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,n,r;for(let i=-1,o=t.length;++i<o;)(e=t[i])&&(n=e.byteLength)>0&&(this._write(e),(r=(n+7&-8)-n)>0&&this._writePadding(r));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=null==n?void 0:n.slice(t)).length>0)for(const r of n.data)this._writeDictionaryBatch(r,e,t>0),t+=r.length}return this}}class oa extends ia{static writeAll(t,e){const n=new oa(e);return B(t)?t.then((t=>n.writeAll(t))):M(t)?la(n,t):sa(n,t)}}class aa extends ia{static writeAll(t){const e=new aa;return B(t)?t.then((t=>e.writeAll(t))):M(t)?la(e,t):sa(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Jr.encode(new Jr(t,i.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function sa(t,e){let n=e;e instanceof Sr&&(n=e.batches,t.reset(void 0,e.schema));for(const e of n)t.write(e);return t.finish()}function la(t,e){var n,r,i,o;return V(this,void 0,void 0,(function*(){try{for(n=$(e);!(r=yield n.next()).done;){const e=r.value;t.write(e)}}catch(t){i={error:t}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}return t.finish()}))}function ca(t){const e=jo.from(t);return B(e)?e.then((t=>ca(t))):e.isAsync()?e.readAll().then((t=>new Sr(t))):new Sr(e.readAll())}function ua(t,e="stream"){return("stream"===e?oa:aa).writeAll(t).toUint8Array(!0)}var da,ha,fa=function(){function t(t,e,n,r){var i=this;this.getCell=function(t,e){var n=t<i.headerRows&&e<i.headerColumns,r=t>=i.headerRows&&e<i.headerColumns,o=t<i.headerRows&&e>=i.headerColumns;if(n){var a=["blank"];return e>0&&a.push("level"+t),{type:"blank",classNames:a.join(" "),content:""}}if(o)return{type:"columns",classNames:(a=["col_heading","level"+t,"col"+(l=e-i.headerColumns)]).join(" "),content:i.getContent(i.columnsTable,l,t)};if(r)return a=["row_heading","level"+e,"row"+(s=t-i.headerRows)],{type:"index",id:"T_".concat(i.uuid,"level").concat(e,"_row").concat(s),classNames:a.join(" "),content:i.getContent(i.indexTable,s,e)};a=["data","row"+(s=t-i.headerRows),"col"+(l=e-i.headerColumns)];var s,l,c=i.styler?i.getContent(i.styler.displayValuesTable,s,l):i.getContent(i.dataTable,s,l);return{type:"data",id:"T_".concat(i.uuid,"row").concat(s,"_col").concat(l),classNames:a.join(" "),content:c}},this.getContent=function(t,e,n){var r=t.getChildAt(n);return null===r?"":i.getColumnTypeId(t,n)===b.Timestamp?i.nanosToDate(r.get(e)):r.get(e)},this.dataTable=ca(t),this.indexTable=ca(e),this.columnsTable=ca(n),this.styler=r?{caption:r.caption,displayValuesTable:ca(r.displayValues),styles:r.styles,uuid:r.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{data:ua(this.dataTable),index:ua(this.indexTable),columns:ua(this.columnsTable)}},t.prototype.getColumnTypeId=function(t,e){return t.schema.fields[e].type.typeId},t.prototype.nanosToDate=function(t){return new Date(t/1e6)},t}(),pa=function(){return pa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pa.apply(this,arguments)};(ha=da||(da={})).COMPONENT_READY="streamlit:componentReady",ha.SET_COMPONENT_VALUE="streamlit:setComponentValue",ha.SET_FRAME_HEIGHT="streamlit:setFrameHeight";var ma,ya=function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new EventTarget,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(da.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){void 0===e&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(da.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var n;e instanceof fa?(n="dataframe",e=e.serialize()):function(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch(t){}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}(e)?(n="bytes",e=new Uint8Array(e.buffer)):e instanceof ArrayBuffer?(n="bytes",e=new Uint8Array(e)):n="json",t.sendBackMsg(da.SET_COMPONENT_VALUE,{value:e,dataType:n})},t.onMessageEvent=function(e){e.data.type===t.RENDER_EVENT&&t.onRenderMessage(e.data)},t.onRenderMessage=function(e){var n=e.args;null==n&&(console.error("Got null args in onRenderMessage. This should never happen"),n={});var r=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};n=pa(pa({},n),r);var i=Boolean(e.disabled),o=e.theme;o&&ga(o);var a={disabled:i,args:n,theme:o},s=new CustomEvent(t.RENDER_EVENT,{detail:a});t.events.dispatchEvent(s)},t.argsDataframeToObject=function(e){var n=e.map((function(e){var n=e.key,r=e.value;return[n,t.toArrowTable(r)]}));return Object.fromEntries(n)},t.toArrowTable=function(t){var e,n=(e=t.data).data,r=e.index,i=e.columns,o=e.styler;return new fa(n,r,i,o)},t.sendBackMsg=function(t,e){window.parent.postMessage(pa({isStreamlitMessage:!0,type:t},e),"*")},t}(),ga=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="\n    :root {\n      --primary-color: ".concat(t.primaryColor,";\n      --background-color: ").concat(t.backgroundColor,";\n      --secondary-background-color: ").concat(t.secondaryBackgroundColor,";\n      --text-color: ").concat(t.textColor,";\n      --font: ").concat(t.font,";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  ")},ba=(ma=function(t,e){return ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},ma(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ma(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function va(t){return va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},va(t)}function wa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_a(r.key),r)}}function _a(t){var e=function(t){if("object"!=va(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=va(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==va(e)?e:e+""}!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ba(e,t),e.prototype.componentDidMount=function(){ya.setFrameHeight()},e.prototype.componentDidUpdate=function(){ya.setFrameHeight()}}(x.PureComponent);var xa=function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.props={},this.listeners={onData:null,onReady:null},ya.events.addEventListener(ya.RENDER_EVENT,(function(t){var n=t.detail&&t.detail.args?t.detail.args:{};e.props=n,"function"==typeof e.listeners.onData&&e.listeners.onData(n),ya.setFrameHeight()}))},e=[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onData,n=t.onReady;"function"==typeof e&&(this.listeners.onData=e),"function"==typeof n&&(this.listeners.onReady=n),ya.setComponentReady(),ya.setFrameHeight(),this.listeners.onReady&&this.listeners.onReady()}},{key:"send",value:function(t){ya.setComponentValue(t)}},{key:"getProps",value:function(){return this.props}}],e&&wa(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();"undefined"!=typeof window&&(window.StreamlitUtil=new xa);const Ea=new xa;function Oa(t){return Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(t)}function Ia(){Ia=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Oa(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Oa(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function Sa(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Aa(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Sa(o,r,i,a,s,"next",t)}function s(t){Sa(o,r,i,a,s,"throw",t)}a(void 0)}))}}function La(t,e,n,r){return ka.apply(this,arguments)}function ka(){return(ka=Aa(Ia().mark((function t(e,n,i,o){var a;return Ia().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={"Content-Type":"application/json"},o&&(a.Authorization="Bearer ".concat(o)),t.abrupt("return",fetch(r+e,{method:i,mode:"cors",cache:"no-cache",credentials:"same-origin",headers:a,redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(n)}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ta(){return Na.apply(this,arguments)}function Na(){return(Na=Aa(Ia().mark((function t(){var n,i,o,a,s,l;return Ia().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=localStorage.getItem("rf_token")){t.next=3;break}throw new Error("No refresh token found. Please log in again.");case 3:return t.next=5,fetch("".concat(r,"auth/refresh?refresh_token=").concat(encodeURIComponent(n)),{method:"POST",headers:{"Content-Type":"application/json"}});case 5:return i=t.sent,t.next=8,i.json();case 8:if(!((o=t.sent)&&200===o.status_code&&o.data&&o.data.access_token)){t.next=18;break}return s=o.data.access_token,localStorage.setItem("token",s),localStorage.setItem("rf_token",o.data.refresh_token),l=(null===(a=e(s))||void 0===a?void 0:a.exp)||0,localStorage.setItem("expired",l.toString()),console.log("========:Token Refreshed:=========="),Ea.send({status:"OK",message:"Token_Refreshed",data:{access_token:s,refresh_token:o.data.refresh_token,expires_at:l}}),t.abrupt("return",o.data.access_token);case 18:throw new Error("Failed to refresh token. Please log in again.");case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ba(t,e,n){return Ca.apply(this,arguments)}function Ca(){return Ca=Aa(Ia().mark((function t(e,n,r){var i,o,a,s,l,c,u=arguments;return Ia().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=u.length>3&&void 0!==u[3]?u[3]:"",a=parseInt(localStorage.getItem("expired")),s=Math.floor(Date.now()/1e3),!(a-s<0)){t.next=8;break}return t.next=7,Ta();case 7:o=t.sent;case 8:return t.next=10,La(e,n,r,o);case 10:return l=t.sent,t.next=13,l.json();case 13:if(c=t.sent,"Could not validate credentials"!==(null===(i=c)||void 0===i?void 0:i.detail)){t.next=24;break}return t.next=17,Ta();case 17:return o=t.sent,t.next=20,La(e,n,r,o);case 20:return l=t.sent,t.next=23,l.json();case 23:c=t.sent;case 24:return t.abrupt("return",c);case 25:case"end":return t.stop()}}),t)}))),Ca.apply(this,arguments)}const Ma=function(){var t=document.getElementById("snackbar"),e=document.getElementById("snackbar-icon"),n=document.getElementById("snackbar-message"),r=null;t&&e&&n||console.warn("Snackbar elements missing. Check your HTML: #snackbar, #snackbar-icon, #snackbar-message");var i={loading:"<i class='fas fa-spinner fa-spin'></i>",success:"<i class='fas fa-check-circle' style='color:green;'></i>",error:"<i class='fas fa-times-circle' style='color:red;'></i>",info:"<i class='fas fa-info-circle' style='color:#006064;'></i>"};return{show:function(){var o=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Processing...",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t&&e&&n&&(n.textContent=a,e.innerHTML=i[s]||i.info,t.classList.remove("hidden"),r&&clearTimeout(r),l.autoHide&&l.duration&&(r=setTimeout((function(){return o.hide()}),l.duration)))},hide:function(){t&&t.classList.add("hidden")},done:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Done!";this.show(t,"success",{autoHide:!0,duration:1500})}}}();var Da="annotation",Pa="classes",Fa="image",ja="classes",Ra="annotations",Ua="images",za="activeAnnotationFile",Ha="validAnnotationFiles",Va="faltyAnnotationFiles",Wa="classesFiles",Ya="activeClassesFile",Ga="imageFiles",$a="COCO JSON",Xa="VGG JSON",Ka="CSV",Za="VOC XML",qa="YOLO TXT",Ja=".json, image/*",Qa=".json",ts=".xml",es=".txt",ns=".csv",rs="two tables",is="three tables";function os(t){return os="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},os(t)}function as(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ss(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?as(Object(n),!0).forEach((function(e){ls(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):as(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ls(t,e,n){return(e=function(t){var e=function(t){if("object"!=os(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=os(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==os(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var cs={};function us(){cs[Wa]=[],cs[Ya]=null,cs[Ha]=[],cs[Va]=[],cs[Ga]={}}function ds(t,e){for(var n=0;n<e.length;n+=1)if(e[n].body.fileMetaData.name===t)return n}function hs(t,e){if(Array.isArray(cs[e])){var n=cs[e],r=ds(t,n);void 0!==r&&n.splice(r,1)}else cs[e]&&delete cs[e][t]}function fs(t,e,n){if(cs[n]&&cs[n].body.fileMetaData.name===t){for(var r=null,i=0;i<cs[e].length;i+=1)cs[e][i].body.fileMetaData.name!==t&&(r=cs[e][i]);cs[n]=r,cs[n]&&(cs[n].newlyActive=!0)}}function ps(t,e){void 0===ds(t,cs[Va])&&cs[Va].push(e)}function ms(t,e){void 0===ds(t,cs[Ha])&&cs[Ha].push(e)}function ys(t,e){var n=t.body.fileMetaData.name;e?(fs(n,Ha,za),hs(n,Ha),ps(n,t)):(function(t,e){var n=ds(t,cs[Ha]);if(void 0===n){var r=cs[Ha];r.push(e),cs[za]=r[r.length-1]}else cs[za]=cs[Ha][n]}(n,t),hs(n,Va))}function gs(t,e){var n=t.body.fileMetaData.name;e?hs(n,Ha):ms(n,t)}function bs(t,e){var n=t.body.fileMetaData.name;e.error?(e.parsingError||ps(n,t),hs(n,Ha)):ms(n,t)}function vs(t,e){cs[Ga][t].error=e}function ws(t,e){var n;n=t.body.fileMetaData.name,cs[Ga][n]||(t.error=e.error,t.alreadyUploaded=e.alreadyUploaded,cs[Ga][t.body.fileMetaData.name]=t)}function _s(){return cs[za]}function xs(){return cs[Ha]}function Es(){return cs[Va]}function Os(){return cs[Ga]}function Is(){return cs}cs[za]=null,cs[Ha]=[],cs[Va]=[],cs[Ya]=null,cs[Wa]=[],cs[Ga]={};var Ss={removeFile:hs,addImageFile:ws,getImageFiles:Os,getDatasetObject:Is,clearDatasetObject:us,getAnnotationFiles:xs,getFaltyAnnotationFiles:Es,getActiveAnnotationFile:_s,updateImageFileErrorStatus:vs,replaceActiveFileIfRemoving:fs,addFile:function(t,e){t.fileFormat===Fa?ws(t,e):t.fileFormat===Da&&ys(t,e.error)},addAnnotationFile:ys},As={removeFile:hs,addImageFile:ws,getImageFiles:Os,getDatasetObject:Is,getAnnotationFiles:xs,clearDatasetObject:us,getActiveAnnotationFile:_s,getFaltyAnnotationFiles:Es,updateImageFileErrorStatus:vs,replaceActiveFileIfRemoving:fs,addFile:function(t,e){t.fileFormat===Fa?ws(t,e):t.fileFormat===Da&&gs(t,e.error)},addAnnotationFile:gs},Ls={removeFile:hs,addImageFile:ws,getImageFiles:Os,getDatasetObject:Is,getAnnotationFiles:xs,clearDatasetObject:us,getFaltyAnnotationFiles:Es,getActiveAnnotationFile:_s,updateImageFileErrorStatus:vs,replaceActiveFileIfRemoving:fs,moveAnnotationFileToFaltyArray:function(t){hs(t.body.fileMetaData.name,Ha),cs[Va].push(t)},moveAnnotationFileToValidArray:function(t){hs(t.body.fileMetaData.name,Va),cs[Ha].push(t)},addFile:function(t,e){var n,r,i;t.fileFormat===Fa?ws(t,e):t.fileFormat===Da?bs(t,e):t.fileFormat===Pa&&(n=t,r=e.error,i=n.body.fileMetaData.name,r?(fs(i,Wa,Ya),hs(i,Wa)):function(t,e){var n=ds(t,cs[Wa]);if(void 0===n){var r=cs[Wa];r.push(e),cs[Ya]=r[r.length-1]}else cs[Ya]=cs[Wa][n]}(i,n))},addAnnotationFile:bs},ks=function(){return ss({},Ss)},Ts=function(){return ss({},As)},Ns=function(){return ss({},Ls)};const Bs=ks();function Cs(t){return Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(t)}function Ms(){Ms=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Cs(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Cs(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function Ds(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Ps(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ps(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Fs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function js(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fs(Object(n),!0).forEach((function(e){Rs(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rs(t,e,n){return(e=function(t){var e=function(t){if("object"!=Cs(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Cs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cs(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Us(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function zs(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Us(o,r,i,a,s,"next",t)}function s(t){Us(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Hs(){return Hs=zs(Ms().mark((function t(e){var n,r,i,o,a,s,l,c,u,d,h,f,p,m,y,g,b,v,w,_,x,E,O=arguments;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=function(){return u=zs(Ms().mark((function t(e,n){var r,i,o;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],i=e.slice(),o=Array(Math.min(n,e.length)).fill(null).map(zs(Ms().mark((function t(){var e,n;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.length){t.next=8;break}return e=i.shift(),t.next=4,s(e.blobUrl||e.img_url);case 4:n=t.sent,r.push({img:e,res:n}),t.next=0;break;case 8:case"end":return t.stop()}}),t)})))),t.next=5,Promise.all(o);case 5:return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)},c=function(t,e){return u.apply(this,arguments)},l=function(){return l=zs(Ms().mark((function t(e){var n,r,i;return Ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{mode:"cors"});case 3:if((n=t.sent).ok){t.next=6;break}throw new Error("fetch failed ".concat(n.status));case 6:return t.next=8,n.blob();case 8:return r=t.sent,t.next=11,a(r);case 11:return i=t.sent,t.abrupt("return",{dataUrl:i,type:r.type||"image/jpeg",size:r.size,blob:r});case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",{dataUrl:null,type:null,size:0,blob:null,error:t.t0});case 18:case"end":return t.stop()}}),t,null,[[0,15]])}))),l.apply(this,arguments)},s=function(t){return l.apply(this,arguments)},a=function(t){return new Promise((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(){return e(r.result)},r.readAsDataURL(t)}))},r=(n=O.length>1&&void 0!==O[1]?O[1]:{}).annotationFileName||"inMemoryCOCO.json",i=!1!==n.fetchImages,o=n.concurrentFetch||6,d=(e.images||[]).map((function(t){return js({},t)})),h=[],!(i&&d.length>0)){t.next=17;break}return t.next=14,c(d,o);case 14:h=t.sent,t.next=18;break;case 17:h=d.map((function(t){return{img:t,res:{dataUrl:null}}}));case 18:f=Ds(h);try{for(f.s();!(p=f.n()).done;)m=p.value,y=m.img,g=m.res,b={name:y.file_name,type:g.type||"image/jpeg",size:g.size||0},v={body:{fileMetaData:b,fileFormat:"image",dataUrl:g.dataUrl||y.blobUrl||y.img_url||null,blobUrl:y.blobUrl||y.img_url||null,originalImageRecord:y},error:!1,alreadyUploaded:!0},w={error:!1,alreadyUploaded:!0},Bs.addImageFile(v,w)}catch(t){f.e(t)}finally{f.f()}return _={name:r,type:"application/json",size:JSON.stringify(e).length},x={images:(e.images||[]).map((function(t,e){return{id:e,file_name:t.file_name,license:1,date_captured:"",blobUrl:t.blobUrl||null,dbImgId:t.id,isLabeled:t.isLabeled,taskId:t.taskId}})),annotations:(e.annotations||[]).map((function(t,n){return{id:n,annots_id:t.id,image_id:(e.images||[]).findIndex((function(e){return e.id===t.image_id})),category_id:t.category_id,category_name:t.category_name,segmentation:JSON.parse(t.segmentation),area:parseFloat(t.area),bbox:JSON.parse(t.bbox),isCrowd:t.is_crowd,db_img_id:t.image_id,img_url:t.img_url,is_labeled:Boolean(t.is_labeled),task_id:t.task_id}})),licenses:[{id:1,name:"Unknown",url:""}],categories:(e.categories||[]).map((function(t){return{id:t.id,name:t.name,supercategory:t.supercategory,product_id:t.id}}))},E={body:{fileMetaData:_,fileFormat:"annotation",parsedObject:x,annotationData:x,images:x.images,annotations:x.annotations,categories:x.categories,raw:JSON.stringify(x),originalAnnotationRecord:e}},Bs.addAnnotationFile(E,!1),t.abrupt("return",Bs.getDatasetObject());case 25:case"end":return t.stop()}}),t)}))),Hs.apply(this,arguments)}const Vs=function(t){return Hs.apply(this,arguments)},Ws=fabric;var Ys=n.n(Ws),Gs=!1;function $s(){if(window.innerHeight<500||window.innerWidth<800){var t=document.getElementById("inadequate-client-resources-overlay");if("block"===t.style.display)return;var e=document.getElementById("inadequate-client-resources-overlay-text");e.innerHTML="Minimum window size to use MyVision is 500 x 800 px",e.style.marginLeft="-28px",e.style.maxWidth="none",t.style.display="block",Gs=!0}else{if(!Gs)return;document.getElementById("inadequate-client-resources-overlay").style.display="none",Gs=!1}}var Xs="MyVision";function Ks(){return localStorage.getItem(Xs)}var Zs,qs="language",Js={EN:{WELCOME:"Welcome",WELCOME_MODAL_DESCRIPTION_PAR_1:"MyVision is a free computer vision based training data generation tool.",WELCOME_MODAL_DESCRIPTION_PAR_2:"It supports a variety of popular data formats to help you build a model that suits your needs.",WELCOME_MODAL_DESCRIPTION_PAR_3:"Label all your images automatically by utilizing an embedded machine learning model.",WELCOME_MODAL_DESCRIPTION_PAR_4:"No data will ever leave the privacy of your computer as this tool is built to operate locally on your browser.",START:"Start",LABEL_NAME:"Label name:",SUBMIT:"Submit",CANCEL:"Cancel",MACHINE_LEARNING:"Machine Learning",LOADING:"Loading...",UPLOAD_DATASETS:"Upload Datasets",CHOOSE_FORMAT:"Choose Format",CHOOSE_FORMAT_COLON:"Choose Format:",CLASSES:"Classes (.txt)",ANNOTATIONS_JSON:"Annotations (.json)",LABELS:"Labels:",IMAGES:"Images:",EDIT_SHAPES:"Edit Shapes (E)",NEW_BOUNDING_BOX:"New Bounding box (W)",NEW_POLYGON:"New Polygon (Q)",ADD_NEW_POINTS_TO_POLYGON:"Add Points to Polygon (A)",REMOVE_POLYGON_POINTS:"Remove Polygon points (R)",EXPORT_DATASETS:"Export Datasets",ZOOM_IN:"Zoom In",ZOOM_OUT:"Zoom Out",SETTINGS:"Settings",REMOVE_LABEL:"Remove label",LABEL_VISIBILITY:"Label Visibility",MOVABLE_OBJECTS:"Movable Objects",CONTINUOUS_DRAWING:"Continuous Drawing",BOUNDING_BOX_CROSSHAIR:"Bounding box Crosshair",VISIBILITY:"Visibility",COLOR:"Color",EXPORT:"Export",YES:"Yes",NO:"No",BACK:"Back",NEXT:"Next",RETRY:"Retry",FINISH:"Finish",CLOSE:"Close",UPLOAD:"Upload",REMOVE_IMAGE:"Remove image",REMOVE_IMAGE_DESCRIPTION:"Are you sure you want to remove the selected image?",REMOVE_IMAGE_NOT_SHOW_AGAIN:"Do not show again",UPLOAD_IMAGES:"Upload images",IMAGE_NAME:"Image name",PREVIOUS_IMAGE:"Previous Image (",NEXT_IMAGE:"Next Image (",ALL_IMAGES:"All Images",NEW_IMAGES:"New Images",ML_MODAL_PLEASE_UPLOAD_IMAGE:"Please upload an image to get started.",UPLOAD_DATASETS_MODAL_DESCRIPTION_PAR_1:"Upload existing images/datasets and continue working on them in MyVision.",UPLOAD_DATASETS_MODAL_DESCRIPTION_PAR_2:"It is important to note that everything you upload will never leave the privacy of your computer.",UPLOAD_DATASETS_MODAL_REUSE_IMAGES:"Reuse already uploaded Images?",ANNOTATIONS:"Annotations",ONE_ANNOTATION_FILE_ALLOWED_ERROR_MESSAGE:"Only one annotation file is allowed per dataset (app version 1.0)",ONE_CLASSES_FILE_ALLOWED_ERROR_MESSAGE:"Only one classes file is allowed per dataset (app version 1.0)",BOUNDING_BOXES_ONLY:"Bounding boxes only",UPLOAD_DATASETS_FORMAT_VALIDATAOR_IMAGE_NOT_SPECIFIED:"This image is not specified in the annotations file(s)",ML_MODAL_DESCRIPTION_PAR_1:"You can use a pre-trained Machine Learning model to automatically annotate objects with bounding boxes!",ML_MODAL_DESCRIPTION_PAR_2:"Click 'Start' to download the 'COCO-SSD' model and use it to generate bounding boxes for your images.",ML_MODAL_DESCRIPTION_PAR_3:"In addition, because this model operates locally on the browser, your data will never leave the privacy of your computer.",FINISHED:"Finished!",ML_MODAL_ERROR:"ERROR! Something went wrong, please try again later.",ML_SUCCESSFUL_ANNOTATION_RESULT:"The following names were automatically assigned to the generated objects, you can edit them below:",ML_NO_ANNOTATED_IMAGES_RESULT:"The model has not identified any objects within the uploaded images.",THE_FOLLOWING_SHORT:"The following ",ARE:" are ",THE_FOLLOWING_HAS_NOT_BEEN_FOUND:"The following ",THE_FOLLOWING_HAVE_NOT_BEEN_FOUND:"The following ",CONTAIN_INCORRECT_TYPE:" contain an incorrect type",PROPERTIES:"properties",ATTRIBUTES:"attributes",TAGS:"tag(s)",HAS_NOT_FOUND:" has not been found",HAVE_NOT_FOUND:" have not been found",IN_1:"in ",IN_2:"",THE:"The ",OBJECT_NO_PROPERTIES:"object does not contain any properties",VGG_EQUAL_SIZE_ARRAYS:"all_points_x and all_points_y arrays must have equal size",SHAPE_NOT_SUPPORTED:"The following shape type is not supported",ANNOTATION_OBJECT:"annotation object",IMAGE_NOT_VALID_IN_ANNOTATIONS:"This image is not specified in any of the valid annotations file(s)",ARRAY_EMPTY:"array is empty",CSV_ATTRIBUTES_1:"Row ",CSV_ATTRIBUTES_2:" contains ",CSV_ATTRIBUTES_3:" attributes, but the expected number is 8",YOLO_ROW_1:"on row ",YOLO_ROW_2:"",YOLO_CLASS_1:"This file contains a class number of ",YOLO_CLASS_2:"however the classes file only contains ",YOLO_CLASS_3:" class(es) with the first reference starting from 0",SHARED_ARRAY_CONTAIN:"array must contain ",SHARED_ELEMENTS_BUT_FOUND_AT_MOST_0:"array must contain ",SHARED_ELEMENTS_BUT_FOUND_1:" elements but instead found ",SHARED_ELEMENTS_BUT_FOUND_AT_MOST_1:" elements at most but instead found ",SHARED_ELEMENTS_BUT_FOUND_2:"",SHARED_ARRAY_CONTAIN_AT_LEAST:"array must contain at least ",SHARED_EVEN_NUMBER_OF_ELEMENTS_1:"array must contain an even number of elements but instead found ",SHARED_ELEMENTS_INCORRECT_TYPE:"array contains elements of incorrect type",INVALID:"Invalid",TXT_FILE_EMPTY:"Text file is empty",TXT_FILE_INVALID:"Invalid text file",DIFFERENT_TABLE_INFO:"If this file belongs in the annotations table, make sure that each row contains exactly 5 attributes: class x y width height"},CN:{WELCOME:"欢迎",WELCOME_MODAL_DESCRIPTION_PAR_1:"MyVision 是一个免费的基于计算机视觉的训练数据生成工具。",WELCOME_MODAL_DESCRIPTION_PAR_2:"它支持多种流行的数据格式，帮助您构建适合您需求的模型。",WELCOME_MODAL_DESCRIPTION_PAR_3:'利用嵌入式机器学习模型自动标记所有图像。<span class="hidden-text">利用嵌入式机器学习模型自动标记所有图像。</span>',WELCOME_MODAL_DESCRIPTION_PAR_4:"任何数据都不会泄露您的计算机隐私，因为此工具构建的基础是在您的本地浏览器上运行的。",START:"开始",LABEL_NAME:"标签名称:",SUBMIT:"提交",CANCEL:"取消",MACHINE_LEARNING:"机器学习",LOADING:"正在加载...",UPLOAD_DATASETS:"上传数据集",CHOOSE_FORMAT:"选择格式",CHOOSE_FORMAT_COLON:"选择格式:",CLASSES:"类文件 (.txt)",ANNOTATIONS_JSON:"注释 (.json)",LABELS:"标签:",IMAGES:"图像:",EDIT_SHAPES:"编辑形状 (E)",NEW_BOUNDING_BOX:"新边界框 (W)",NEW_POLYGON:"新多边形 (Q)",ADD_NEW_POINTS_TO_POLYGON:"向多边形添加点 (A)",REMOVE_POLYGON_POINTS:"删除多边形点 (R)",EXPORT_DATASETS:"导出数据集",ZOOM_IN:"放大",ZOOM_OUT:"缩小",SETTINGS:"设置",REMOVE_LABEL:"删除标签",LABEL_VISIBILITY:"标签可见性",MOVABLE_OBJECTS:"可移动物体",CONTINUOUS_DRAWING:"连续绘图",BOUNDING_BOX_CROSSHAIR:"边界框十字准线",VISIBILITY:"能见度",COLOR:"颜色",EXPORT:"出口",YES:"是的",NO:"不",BACK:"后退",NEXT:"下一个",RETRY:"重试",FINISH:"结束",CLOSE:"关闭",UPLOAD:"上传",REMOVE_IMAGE:"移除图片",REMOVE_IMAGE_DESCRIPTION:"您确定要删除所选择的图像吗？",REMOVE_IMAGE_NOT_SHOW_AGAIN:"不再显示",UPLOAD_IMAGES:"上传图片",IMAGE_NAME:"图片名称",PREVIOUS_IMAGE:"上一张图片 (",NEXT_IMAGE:"下一张图片 (",ALL_IMAGES:"所有图片",NEW_IMAGES:"新图像",ML_MODAL_PLEASE_UPLOAD_IMAGE:"请上传图像以开始使用。",UPLOAD_DATASETS_MODAL_DESCRIPTION_PAR_1:"上传现有图像/数据集并继续在 MyVision 中处理它们。",UPLOAD_DATASETS_MODAL_DESCRIPTION_PAR_2:"请务必注意，您上传的所有内容都不会泄露您计算机的隐私。",UPLOAD_DATASETS_MODAL_REUSE_IMAGES:"重复使用已上传的图片？",ANNOTATIONS:"注释",ONE_ANNOTATION_FILE_ALLOWED_ERROR_MESSAGE:"每个数据集只允许一个注释文件 (app version 1.0)",ONE_CLASSES_FILE_ALLOWED_ERROR_MESSAGE:"每个数据集只允许一个类别文件",BOUNDING_BOXES_ONLY:"只有边界框",UPLOAD_DATASETS_FORMAT_VALIDATAOR_IMAGE_NOT_SPECIFIED:"此图像未在注释文件中指定",ML_MODAL_DESCRIPTION_PAR_1:"您可以使用预训练的机器学习模型自动用边界框注释对象！",ML_MODAL_DESCRIPTION_PAR_2:"单击“开始”下载“COCO-SSD”模型并使用它为您的图像生成边界框。",ML_MODAL_DESCRIPTION_PAR_3:"此外，由于该模型在浏览器本地运行，因此您的隐私数据永远不会离开您的计算机范围。",FINISHED:"完成的！",ML_MODAL_ERROR:"错误！发生错误。请稍后再试。",ML_SUCCESSFUL_ANNOTATION_RESULT:"以下名称已自动分配给生成的对象，您可以在下面编辑它们：",ML_NO_ANNOTATED_IMAGES_RESULT:"该模型尚未识别上传图像中的任何对象。",THE_FOLLOWING_SHORT:"以下",ARE:"为",THE_FOLLOWING_HAS_NOT_BEEN_FOUND:"未找到以下",THE_FOLLOWING_HAVE_NOT_BEEN_FOUND:"未找到以下",CONTAIN_INCORRECT_TYPE:"包含不正确的类型",PROPERTIES:"属性",ATTRIBUTES:"属性",TAGS:"标签",HAS_NOT_FOUND:"",HAVE_NOT_FOUND:"",IN_1:"在",IN_2:"中",THE:"",OBJECT_NO_PROPERTIES:"对象不包含任何属性",VGG_EQUAL_SIZE_ARRAYS:"all_points_x 和 all_points_y 数组必须具有相等的大小",SHAPE_NOT_SUPPORTED:"不支持以下形状类型",ANNOTATION_OBJECT:"注释对象",IMAGE_NOT_VALID_IN_ANNOTATIONS:"此图像未在任何有效的注释文件中指定",ARRAY_EMPTY:"数组为空",CSV_ATTRIBUTES_1:"第",CSV_ATTRIBUTES_2:"行包含",CSV_ATTRIBUTES_3:"个属性, 但预期数量为8个",YOLO_ROW_1:"在第",YOLO_ROW_2:"行",YOLO_CLASS_1:"该文件包含类别编号为",YOLO_CLASS_2:"然而类别文件只包含",YOLO_CLASS_3:"个类别, 第一个引用从0开始",SHARED_ARRAY_CONTAIN:"数组应包含",SHARED_ELEMENTS_BUT_FOUND_AT_MOST_0:"数组最多应包含",SHARED_ELEMENTS_BUT_FOUND_1:"个元素，但实际上只找到",SHARED_ELEMENTS_BUT_FOUND_AT_MOST_1:"个元素，但实际上只找到",SHARED_ELEMENTS_BUT_FOUND_2:"个",SHARED_ARRAY_CONTAIN_AT_LEAST:"数组至少应包含",SHARED_EVEN_NUMBER_OF_ELEMENTS_1:"数组应包含偶数个元素，但实际上只找到",SHARED_ELEMENTS_INCORRECT_TYPE:"数组包含不正确类型的元素",INVALID:"无效的",TXT_FILE_EMPTY:"文本文件为空",TXT_FILE_INVALID:"无效的文本文件",DIFFERENT_TABLE_INFO:"If this file belongs in the annotations table, make sure that each row contains exactly 5 attributes: class x y width height"}},Qs=(Zs=qs,(Ks()?JSON.parse(Ks())[Zs]:null)||Object.keys(Js)[0]),tl=Js[Qs];function el(t){return tl[t]}var nl=1,rl=0;function il(){return nl}var ol=0;function al(){return ol}var sl=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;function ll(t,e,n){for(var r=0;r<t.length;r+=1)t[r].style[e]=n}var cl=!1,ul=!1,dl=!1,hl=!0,fl=!0,pl=null,ml=!1,yl=null,gl=null,bl=!0,vl=null,wl=!1,_l=!1,xl=1,El=!1,Ol=!1,Il=!1,Sl=!1,Al=!1,Ll=!1,kl=!1,Tl=!1,Nl=!1,Bl=!1,Cl=!1,Ml=!1,Dl=!1,Pl=!1,Fl=!1,jl=!1,Rl=!0,Ul=!1,zl=!1,Hl="init";function Vl(){return Hl}function Wl(){return cl}function Yl(){return ul||dl}function Gl(){return ul}function $l(){return dl}function Xl(){return hl}function Kl(){return fl}function Zl(){return pl}function ql(){return ml}function Jl(){return yl}function Ql(){return gl}function tc(){return bl}function ec(){return xl}function nc(){return El}function rc(){return Ol}function ic(){return Il}function oc(){return Al}function ac(){return Ll}function sc(){return Bl}function lc(){return Cl}function cc(){return Ml}function uc(){return Dl}function dc(){return kl}function hc(){return Tl}function fc(){return Pl}function pc(){return Fl}function mc(){return Rl}function yc(){return Ul}function gc(){return zl}function bc(t){Hl=t}function vc(t){cl=t}function wc(t){ul=t,dl=t}function _c(t){ul=t}function xc(t){dl=t}function Ec(t){hl=t}function Oc(t){fl=t}function Ic(t){pl=t}function Sc(t){ml=t}function Ac(t){yl=t}function Lc(t){gl=t}function kc(t){bl=t}function Tc(t){vl=t}function Nc(t){_l=t}function Bc(t){xl=t}function Cc(t){El=t}function Mc(t){Ol=t}function Dc(t){Il=t}function Pc(t){Al=t}function Fc(t){Sl=t}function jc(t){Ll=t}function Rc(t){Bl=t}function Uc(t){Cl=t}function zc(t){Ml=t}function Hc(t){Dl=t}function Vc(t){kl=t}function Wc(t){Tl=t}function Yc(t){Pl=t}function Gc(t){Fl=t}function $c(t){jl=t}function Xc(t){Rl=t}function Kc(t){Ul=t}function Zc(t){zl=t}var qc=null,Jc=null;function Qc(){return sl?function(){var t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t);var e=t.offsetWidth-t.clientWidth;return t.remove(),e/2}():6}var tu={},eu={uploaded:!1,name:null},nu={},ru=null,iu=null,ou=!0;function au(t){t?function(t){ru.setWidth(Math.ceil(t.width)),ru.setHeight(Math.ceil(t.height)),Ys().Image.fromURL(iu.src,(function(t){eu.scaleX=ru.width/t.width,eu.scaleY=ru.height/t.height,eu.originalWidth=t.width,eu.originalHeight=t.height,ru.setBackgroundImage(t,ru.renderAll.bind(ru),{scaleX:eu.scaleX,scaleY:eu.scaleY})})),eu.width=t.width,eu.height=t.height}(t):(ru.setWidth(Math.ceil(iu.width)),ru.setHeight(Math.ceil(iu.height)),Ys().Image.fromURL(iu.src,(function(t){eu.originalWidth=t.width,eu.originalHeight=t.height,ru.setBackgroundImage(t,ru.renderAll.bind(ru),{})})),eu.scaleX=1,eu.scaleY=1,eu.width=iu.width,eu.height=iu.height)}function su(){var t={},e=nu.maximumCanvasHeight/iu.height;return t.height=nu.maximumCanvasHeight,t.width=iu.width*e,t}function lu(t){var e={},n=nu.maximumCanvasWidth/t.width;return e.width=nu.maximumCanvasWidth,e.height=t.height*n,e}function cu(){var t=document.getElementById("canvas-wrapper");t.style.maxWidth="".concat(nu.maximumCanvasWidth,"px"),t.style.maxHeight="".concat(nu.maximumCanvasHeight,"px")}function uu(){var t=qc.offsetWidth+Jc.offsetWidth,e=window.innerHeight-Math.ceil(35+29/il()),n=window.innerWidth-t;nu.maximumCanvasHeight=ou?e-.0382263*window.innerHeight:e,nu.maximumCanvasWidth=sl?ou?n-.5-.020237453*window.innerWidth:n-.5:ou?n-.020237453*window.innerWidth:n}function du(){if(uu(),nu.maximumCanvasHeight<iu.height){var t=su();nu.maximumCanvasWidth<t.width&&(t=lu(t)),au(t)}else nu.maximumCanvasWidth<iu.width?au(lu(iu)):au();cu(),tu.width=eu.width,tu.height=eu.height}function hu(){ou=!0,uu()}function fu(t){eu.uploaded=!0,iu=this?this:t,du(),ru.setZoom(1)}function pu(){return nu}function mu(){return eu}function yu(){if(uu(),iu)if(nu.maximumCanvasHeight<iu.height){var t=su();nu.maximumCanvasWidth<t.width&&(t=lu(t)),au(t)}else nu.maximumCanvasWidth<iu.width?au(lu(iu)):au();return(e={}).width=eu.width/tu.width,e.height=eu.height/tu.height,tu.width=eu.width,tu.height=eu.height,e;var e}function gu(){return iu}var bu={},vu=2,wu=1.75;function _u(t){t.discardActiveObject(),function(t){t.forEachObject((function(t){"tempPoint"!==t.shapeName&&"firstPoint"!==t.shapeName&&("bndBox"!==t.shapeName&&(t.perPixelTargetFind=!1),t.selectable=!1,t.hoverCursor="crosshair")}))}(t),t.defaultCursor="crosshair",t.hoverCursor="crosshair",t.renderAll()}function xu(t){Xl()?t.forEachObject((function(t){t.hoverCursor=null})):t.forEachObject((function(t){t.hoverCursor="default"})),t.renderAll()}bu.tempBoundingBoxProps=function(t){return{left:t.origX,top:t.origY,stroke:"hsla(112, 57%, 50%, 1)",strokeWidth:vu,fill:"rgba(255,0,0,0)",shapeName:"bndBoxTemp",objectCaching:!1}},bu.finalBoundingBoxProps=function(){return{shapeName:"bndBox",objectCaching:!1,selectable:!1,hasRotatingPoint:!1,perPixelTargetFind:!1,cornerSize:8,strokeWidth:wu,lockScalingFlip:!0}},bu.setZoomInProperties=function(t){vu-=vu*t,wu-=wu*t},bu.setZoomOutProperties=function(t){vu*=t,wu*=t},bu.getStandaloneBoundingBoxProperties=function(t){return{shapeName:"bndBox",objectCaching:!1,selectable:!1,hasRotatingPoint:!1,perPixelTargetFind:!1,cornerSize:8,strokeWidth:wu,left:t.left*t.scaleX,top:t.top*t.scaleY,width:t.width*t.scaleX,height:t.height*t.scaleY,stroke:"hsla(112, 57%, 50%, 1)",fill:"rgba(255,0,0,0)",lockScalingFlip:!0}};var Eu={},Ou=1,Iu=.7,Su=.3;Eu.crosshairProps=function(){var t=document.getElementById("settings-popup-bounding-box-crosshair-color-picker").value;return{fill:t,shapeName:"crosshairLine",stroke:t,strokeWidth:Ou,selectable:!1,evented:!1}},Eu.strokeWidth=function(){return Ou},Eu.verticalDelta=function(){return Iu},Eu.horizontalDelta=function(){return Su},Eu.setZoomInProperties=function(t){Ou-=Ou*t,Iu-=Iu*t,Su-=Su*t},Eu.setZoomOutProperties=function(t){Ou*=t,Iu*=t,Su*=t};var Au=!1,Lu=null,ku=null;function Tu(){Lu=null}function Nu(t){Lu=t}var Bu=null;function Cu(t){Bu=t}function Mu(){return Bu}var Du=!0,Pu=null,Fu=null,ju=null,Ru=null,Uu=null,zu=0;function Hu(){return Uu}function Vu(){Fu.preserveObjectStacking=!1}function Wu(){Fu&&(Fu.preserveObjectStacking=!0)}var Yu=null,Gu=null,$u=null,Xu=null,Ku=null,Zu=null,qu=null,Ju=null,Qu=null,td=null,ed=null;function nd(t){Xu&&(Xu.style.backgroundColor=t.value,Ku.style.backgroundColor=t.value),Gu&&(Gu.set({fill:t.value,stroke:t.value}),$u.set({fill:t.value,stroke:t.value}),Yu.renderAll())}function rd(){Gu.setCoords(),$u.setCoords()}function id(t,e){t.pointer.x&&(Gu.set({x1:t.pointer.x+ed,x2:t.pointer.x+ed}),$u.set({y1:t.pointer.y-td,y2:t.pointer.y-td}),rd(),e.renderAll())}function od(t,e){if(t.pointer.x){var n=e.getPointer(t.e);Gu.set({x1:n.x+ed,x2:n.x+ed}),$u.set({y1:n.y-td-1.2,y2:n.y-td-1.2}),rd(),e.renderAll()}}function ad(t){t.pageY||(t=Mu()),Xu.style.top="".concat(t.pageY-td,"px"),Ku.style.left="".concat(t.pageX+ed,"px")}function sd(t){t.pageY||(t=Mu()),Xu.style.top="".concat(t.pageY-td-2.25,"px"),Ku.style.left="".concat(t.pageX+ed,"px")}function ld(){Ju=od,Qu=sd,ed=Eu.verticalDelta(),td=Eu.horizontalDelta()}function cd(t){Gu&&$u&&(Gu.set({x1:-10,x2:-10}),$u.set({y1:-10,y2:-10}),t.renderAll())}function ud(){Xu&&Ku&&(Xu.style.top="-10px",Ku.style.left="-10px")}function dd(t){cd(t||Yu),ud()}function hd(t,e){Ju(t,e)}function fd(t){Qu(t)}function pd(t){t&&t.removeEventListener("mousemove",fd)}function md(){pd(Zu),pd(qu)}function yd(t){t.addEventListener("mousemove",fd)}function gd(t){Gu&&t.remove(Gu),$u&&t.remove($u),md()}function bd(t){gd(t),ud(),md()}function vd(t,e){var n=Mu();if(n){var r={pointer:t.getPointer(n)};e?e(r,t):hd(r,t)}}function wd(t,e){setTimeout((function(){var n=Hu().getBoundingClientRect(),r=n.left,i=n.top,o=n.right,a=n.bottom,s=Mu(),l=s.clientX,c=s.clientY;l<=o&&l>=r&&c>=i&&c<=a?vd(t||Yu,e):dd(t)}),15)}function _d(t,e){vd(t||Yu,e),Zu&&(Zu.dispatchEvent(new Event("mousemove")),qu.dispatchEvent(new Event("mousemove")))}function xd(t){Gu&&(Gu.set({y2:t.height}),$u.set({x2:t.width}),t.renderAll())}function Ed(){return new(Ys().Line)([0,0,0,0],Eu.crosshairProps())}function Od(t){t.forEachObject((function(t){t.selectable=!1,t.hoverCursor="none"}))}function Id(t,e){Yu=t,ed=Eu.verticalDelta(),td=Eu.horizontalDelta(),Xu=document.getElementById("crosshair-line-x"),Ku=document.getElementById("crosshair-line-y"),Zu=document.getElementById("canvas-absolute-container-1"),qu=document.getElementById("canvas-absolute-container-2"),t.discardActiveObject(),t.defaultCursor="none",t.hoverCursor="none",Od(t),ec()>1.000001?(Ju=od,Qu=sd):(Ju=id,Qu=ad),nd(document.getElementById("settings-popup-bounding-box-crosshair-color-picker")),e?(Nu(_d),function(t){Gu&&(t.bringToFront(Gu),t.bringToFront($u),t.renderAll())}(t)):(gd(t),function(t){Gu=Ed(),$u=Ed(),Gu.set({orientation:"x"}),$u.set({orientation:"y"}),xd(t),t.add(Gu),t.add($u),cd(t)}(t),yd(Zu),yd(qu),Au&&_d(t,id),ec()>1.00001&&rd(),ku=dd,t.renderAll())}var Sd=500,Ad=.25,Ld=.5,kd="rgba(0,0,0,0.25)",Td="rgba(0,0,0,0.09)",Nd=null,Bd=null;function Cd(t){Nd.style.backgroundColor="rgba(0,0,0,0)",window.setTimeout((function(){Nd.style.position="unset",Bd.upperCanvasEl.dispatchEvent(new Event("mousemove"))}),t)}function Md(t,e){yc()&&(Cd(200),1)||Cd(t)}function Dd(t,e){Nd.style.transitionDuration="".concat(t,"s"),Nd.style.MozTransitionDuration="".concat(t,"s"),Nd.style.position="absolute",Nd.style.backgroundColor=e}function Pd(t,e){yc()&&(Dd(Ad,Td),1)||Dd(t,e)}function Fd(t){return Fd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(t)}function jd(){jd=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Fd(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(Fd(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function Rd(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var Ud=0,zd=0,Hd=["hsl(0, 100%, 48%","hsl(321, 94%, 34%","hsl(175, 75%, 51%","hsl(241, 86%, 49%","hsl(64, 99%, 40%","hsl(106, 85%, 49%","hsl(355, 80%, 56%","hsl(182, 46%, 60%","hsl(7, 93%, 41%","hsl(220, 65%, 39%","hsl(121, 60%, 39%","hsl(220, 100%, 48%","hsl(21, 65%, 33%","hsl(82, 100%, 33%","hsl(294, 100%, 37%"],Vd=[{text:"dog",default:!0,color:{default:"hsl(82, 93%, 45%, 0.01)",highlight:"hsl(82, 93%, 45%, 0.3)",stroke:"hsl(82, 93%, 45%)",label:"hsl(82, 93%, 45%, 0.25)"}},{text:"cat",default:!0,color:{default:"hsl(45, 77%, 53%, 0.01)",highlight:"hsl(45, 77%, 53%, 0.3)",stroke:"hsl(45, 77%, 53%)",label:"hsl(45, 77%, 53%, 0.28)"}},{text:"chicken",default:!0,color:{default:"hsl(338 ,100%, 68%, 0.01)",highlight:"hsl(338, 100%, 68%, 0.3)",stroke:"hsl(338, 100%, 68%)",label:"hsl(338, 100%, 68%, 0.28)"}},{text:"dolphin",default:!0,color:{default:"hsl(198, 98%, 61%, 0.01)",highlight:"hsl(198, 98%, 61% ,0.3)",stroke:"hsl(198, 98%, 61%)",label:"hsl(198, 98%, 61%, 0.25)"}},{text:"panda",default:!0,color:{default:"hsl(21, 70%, 40%, 0.01)",highlight:"hsl(21, 70%, 40% ,0.3)",stroke:"hsl(21, 70%, 40%)",label:"hsl(21, 70%, 40%, 0.25)"}}],Wd=Vd,Yd=!0,Gd=0;function $d(t){!function(t){if(Yd){for(var e=Wd[t],n=!1,r=0;r<Wd.length;r+=1)if(e.text===Wd[r].text&&!0===Wd[r].default){n=!0;break}n&&(Yd=!1)}}(t);for(var e=Wd[t],n=t;n>0;n-=1)Wd[n]=Wd[n-1];Wd[0]=e}function Xd(){return 0===Ud?(Ud+=1,{default:"hsl(154, 98%, 54%,0.01)",highlight:"hsl(154, 98%, 54%,0.3)",stroke:"hsl(154, 98%, 54%)",label:"hsl(154, 98%, 54%,0.28)"}):Ud<Hd.length?(r=Hd[Ud],Ud+=1,{default:"".concat(i=r,",0.01)"),highlight:"".concat(i,",0.3)"),stroke:"".concat(i,")"),label:"".concat(i,",0.28)")}):(t=Math.floor(360*Math.random()+0),e=Math.floor(30*Math.random()+70),n=Math.floor(30*Math.random()+40),{default:"hsl(".concat(t,",").concat(e,"%,").concat(n,"%,0.01)"),highlight:"hsl(".concat(t,",").concat(e,"%,").concat(n,"%,0.3)"),stroke:"hsl(".concat(t,",").concat(e,"%,").concat(n,"%)"),label:"hsl(".concat(t,",").concat(e,"%,").concat(n,"%, 0.25)")});var t,e,n,r,i}function Kd(t){zd<t?zd=t:zd===t&&(zd+=1)}function Zd(t){for(var e,n=0;n<Wd.length;n+=1)if(Wd[n].text===t){e=n;break}if(void 0!==e)Kd(e),$d(e);else{var r=Xd();Kd(zd+1),Wd.unshift({text:t,color:r}),Yd&&Wd.length>6&&(Wd.pop(),5===(Gd+=1)&&(Yd=!1))}}function qd(){return Jd.apply(this,arguments)}function Jd(){var t;return t=jd().mark((function t(){var e,n,r,i,o,a;return jd().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=localStorage.getItem("labelOptions"))||"undefined"===e||""===e){t.next=4;break}return Wd=JSON.parse(e),t.abrupt("return",Wd);case 4:return n={skip:0,limit:20,is_active:1},r=localStorage.getItem("token"),t.next=8,Ba("products/getProducts",n,"POST",r);case 8:if(i=t.sent,o=i.data.items||[],console.log("Response from getLabelOptions:",i),i.success&&Array.isArray(o)){t.next=13;break}return t.abrupt("return",Vd);case 13:return a=o.map((function(t,e){var n=Math.floor(360*Math.random());return{text:t.product_name,client_id:t.client_id,id:t.id,default:0===e,color:{default:"hsl(".concat(n,", 93%, 45%, 0.01)"),highlight:"hsl(".concat(n,", 93%, 45%, 0.3)"),stroke:"hsl(".concat(n,", 93%, 45%)"),label:"hsl(".concat(n,", 93%, 45%, 0.25)")}}})),console.log("Label Options:",a),Wd=a.length>0?a:Vd,localStorage.setItem("labelOptions",JSON.stringify(Wd)),t.abrupt("return",Wd);case 18:case"end":return t.stop()}}),t)})),Jd=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Rd(o,r,i,a,s,"next",t)}function s(t){Rd(o,r,i,a,s,"throw",t)}a(void 0)}))},Jd.apply(this,arguments)}function Qd(t){for(var e=0;e<Wd.length;e+=1)if(Wd[e].text===t)return Wd[e].color;return{highlight:"hsl(0, 100%, 50%, 0.2)",default:"hsl(0, 100%, 50%, 0.01)"}}function th(t){return th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},th(t)}function eh(){eh=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==th(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(th(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function nh(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function rh(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){nh(o,r,i,a,s,"next",t)}function s(t){nh(o,r,i,a,s,"throw",t)}a(void 0)}))}}Hd.sort((function(){return Math.random()-.5}));var ih=null,oh=null,ah=null,sh=null,lh=0,ch=0,uh=null,dh=!1,hh=!1,fh=!1,ph=!1,mh=!1,yh=200,gh=Ad,bh=Td,vh=1;function wh(t,e){var n=document.createElement("div");n.innerHTML='<div class="labelDropdownOption" ondblclick="labelShape()" onmousedown="selectLabelOption(innerHTML, this, \''.concat(e,"')\">").concat(t,"</div>");var r=oh.insertRow(-1).insertCell(0);r.onmouseenter=window.mouseEnterLabelDropdownOption.bind(this,r,e),r.onmouseleave=window.mouseLeaveLabelDropdownOption.bind(this,r,!1),r.appendChild(n)}function _h(){return oh.scrollWidth>oh.clientWidth}function xh(){if(!fh){var t=uh;!hh&&_h()&&(t+=Qc(),uh=t,hh=!0,fh=!0),oh.style.height="".concat(t,"px")}}function Eh(){return(Eh=rh(eh().mark((function t(){var e;return eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qd();case 2:e=t.sent,oh.deleteRow(e.length-1),!dh&&e.length>=6&&(uh=lh+ch,hh=!1,dh=!0,xh()),7===e.length&&wh("temp horizontal"),window.setTimeout((function(){var t=e[e.length-1];wh(t.text,t.color.label),7===e.length&&oh.deleteRow(6)}),0);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oh(){Md(yh),ih.style.display="none",sh.value=sh.value.trim(),jc(!1)}function Ih(t){document.body.scrollHeight<document.documentElement.scrollHeight?(ih.style.top="",ih.style.bottom="5px"):t||(ih.style.bottom="")}function Sh(){oh.style.width=il()>1.0000001?"150.4px":"165px"}function Ah(){return(Ah=rh(eh().mark((function t(){return eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sh=document.getElementById("labeller-modal-input"),ih=document.getElementById("labeller-modal-parent"),oh=document.getElementById("labeller-modal-options"),ah=document.getElementById("labeller-modal-submit-button"),vh=Number(getComputedStyle(oh,null).getPropertyValue("border-left-width").replace(/[^0-9.]+/g,"")),sl?(lh=Math.ceil(107.5/il()),ch=Math.ceil(21.5/il())):(lh=Math.ceil(105/il()),ch=Math.ceil(21/il())),uh=lh,sh.addEventListener("input",kh),t.next=3,qd();case 3:t.sent.forEach((function(t){wh(t.text,t.color.label)})),Sh();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Lh(t){oh.innerHTML="",t.forEach((function(t){wh(t.text,t.color.label)})),Sh()}function kh(){return Th.apply(this,arguments)}function Th(){return(Th=rh(eh().mark((function t(){var e,n;return eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=sh.value.toLowerCase(),t.next=3,qd();case 3:if(n=t.sent,""!==e){t.next=9;break}return Lh(n.slice(0,10)),addNewItem.style.display="none",t.abrupt("return");case 9:Lh(n.filter((function(t){return t.text.toLowerCase().includes(e)})));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nh(){return Bh.apply(this,arguments)}function Bh(){return(Bh=rh(eh().mark((function t(){return eh().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return oh.innerHTML="",t.next=3,qd();case 3:t.sent.forEach((function(t){wh(t.text,t.color.label)}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ch(){Pd(gh,bh);var t=Mu();ih.style.top="".concat(t.clientY,"px"),ih.style.left="".concat(t.clientX,"px"),function(){Eh.apply(this,arguments)}(),ih.style.display="block",xh(),sl||(oh.scrollHeight>oh.clientHeight&&function(){if(!ph){var t=document.getElementById("chromium-fake-popup-table-right-border-fix");t.style.height="".concat(uh,"px"),t.style.display="",t.style.right=il()>1.000001?"".concat(9/il(),"px"):"9.8px",ph=!0}}(),_h()&&function(){if(!mh){var t=document.getElementById("chromium-fake-popup-table-bottom-border-fix"),e=document.getElementById("labeller-modal-title").getBoundingClientRect().height+sh.getBoundingClientRect().height,n=oh.getBoundingClientRect().height,r=2/il();t.style.top="".concat(Math.floor(e+n+2*Qc()-r+vh),"px"),t.style.display="",oh.style.paddingBottom="0px",mh=!0}}()),oh.scrollTop=0,oh.scrollLeft=0,Ih(),jc(!0),window.setTimeout((function(){sh.select(),window.labellerModalKeyDown({key:"stub"})}),0)}function Mh(t,e,n){yh=t,gh=e,bh=n}var Dh={},Ph=10,Fh=0,jh=10,Rh=12;Dh.pointOffsetProperties=function(){return{left:jh,top:Rh-Fh}},Dh.boundingBoxOffsetProperties=function(){return{left:2}},Dh.getLabelProps=function(t,e){return{fontSize:Ph,fill:"yellow",left:t.left,top:t.top,shapeName:"label",attachedShape:e,hasControls:!1,selectable:!1,hasBorders:!1,objectCaching:!1,evented:!1}},Dh.setZoomInProperties=function(t){Ph-=Ph*t,Fh+=.5},Dh.setZoomOutProperties=function(t){Ph*=t,Fh-=.5},Dh.updatePolygonOffsetProperties=function(t){jh*=t.width,Rh*=t.height},Dh.setPolygonOffsetProperties=function(t){jh=t.width,Rh=t.height};var Uh={polygons:0,boundingBoxes:0};function zh(t){"polygon"===t.shapeName?Uh.polygons+=1:"bndBox"===t.shapeName&&(Uh.boundingBoxes+=1)}function Hh(t){"polygon"===t.shapeName?Uh.polygons-=1:"bndBox"===t.shapeName&&(Uh.boundingBoxes-=1)}function Vh(){return Uh}var Wh={},Yh=null;function Gh(t,e){var n={shapeRef:t,color:e,visibility:!0};return n.shapeRef.set("fill",e.default),n.shapeRef.set("stroke",e.stroke),n}function $h(t,e,n){Wh[n]=Gh(t,e),zh(t)}function Xh(t){return Wh[t].shapeRef}function Kh(){return Wh}function Zh(){Wh={}}function qh(t,e){Wh[t].color=e,Wh[t].shapeRef.set("fill",e.default),Wh[t].shapeRef.set("stroke",e.stroke),Yh.renderAll()}function Jh(t){var e=Wh[t].color.highlight;Wh[t].shapeRef.set("fill",e),Yh.renderAll()}function Qh(t){var e=Wh[t].color.default;Wh[t].shapeRef.set("fill",e),Yh.renderAll()}function tf(){Object.keys(Wh).forEach((function(t){var e=Wh[t].color.default;Wh[t].shapeRef.set("fill",e)})),Yh.renderAll()}function ef(t){Hh(Wh[t].shapeRef),Yh.remove(Wh[t].shapeRef),delete Wh[t]}var nf=null,rf=[],of=null,af=null,sf=0;function lf(t){sf=t}var cf={},uf=.5,df=4,hf=3.5,ff=3.9,pf=3.7,mf=3,yf=3.7,gf=1.75,bf=.8,vf=1.1,wf=0;function _f(t){var e=t._calcDimensions();t.set({left:e.left,top:e.top,height:e.height,width:e.width,pathOffset:{x:e.left+e.width/2,y:e.top+e.height/2}}),t.setCoords()}function xf(t,e){e.forEachObject((function(n){switch(n.shapeName){case"polygon":n.points.forEach((function(e){e.x*=t.width,e.y*=t.height})),_f(n),C_(n,n.points[0]);break;case"tempPolygon":n.points.forEach((function(e){e.x*=t.width,e.y*=t.height}));break;case"point":case"invisiblePoint":case"firstPoint":case"tempPoint":case"initialAddPoint":case"label":n.top*=t.height,n.left*=t.width;break;case"addPointsLine":n.top*=t.height,n.left*=t.width,n.height*=t.height,n.width*=t.width,n.x1*=t.width,n.x2*=t.width,n.y1*=t.height,n.y2*=t.height;break;case"bndBox":n.height*=t.height,n.width*=t.width,n.top*=t.height,n.left*=t.width}"crosshairLine"===n.shapeName?function(t,e){"x"===t.orientation?t.set({y2:e.height}):"y"===t.orientation&&t.set({x2:e.width})}(n,e):n.setCoords()})),e.renderAll()}function Ef(t,e){t.top*=e,t.left*=e}function Of(t,e){switch(t.shapeName){case"polygon":t.points.forEach((function(t){t.x*=e,t.y*=e})),_f(t),C_(t,t.points[0]);break;case"tempPolygon":t.points.forEach((function(t){t.x*=e,t.y*=e}));break;case"point":case"invisiblePoint":case"firstPoint":case"tempPoint":case"initialAddPoint":case"label":Ef(t,e);break;case"addPointsLine":t.top*=e,t.left*=e,t.height*=e,t.width*=e,t.x1*=e,t.x2*=e,t.y1*=e,t.y2*=e;break;case"bndBox":t.height*=e,t.width*=e,t.top*=e,t.left*=e}t.setCoords()}cf.newPolygon=function(){return{stroke:"hsla(186, 8%, 50%, 1)",strokeWidth:gf,fill:"rgba(237, 237, 237, 0.01)",perPixelTargetFind:!0,hasBorders:!1,hasControls:!1,shapeName:"polygon",selectable:!1,evented:!0,objectCaching:!1,numberOfNullPolygonPoints:0}},cf.newTempPolygon=function(){return{stroke:"#333333",strokeWidth:bf,fill:"#cccccc",opacity:.3,selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1,numberOfNullPolygonPoints:0,shapeName:"tempPolygon"}},cf.newLine=function(){return{strokeWidth:vf,fill:"#999999",stroke:"#999999",class:"line",originX:"center",originY:"center",selectable:!1,hasBorders:!1,hasControls:!1,evented:!1,objectCaching:!1,shapeName:"addPointsLine"}},cf.firstPoint=function(){return{fill:"red",shapeName:"firstPoint",lockMovementX:!0,lockMovementY:!0}},cf.removablePoint=function(){return{radius:df,fill:"red",selectable:!0}},cf.defaultPoint=function(){return{fill:"blue",radius:hf,hoverCursor:"move"}},cf.additionalPoint=function(){return{fill:"green",radius:df,hoverCursor:"default"}},cf.disabledAddPoint=function(){return{fill:"white",radius:mf}},cf.disabledRemovePoint=function(){return{fill:"black",radius:yf}},cf.selectedStartingAddPoint=function(){return{shapeName:"initialAddPoint",radius:hf}},cf.newPoint=function(t,e,n){return{radius:hf,fill:"#ffffff",stroke:"#333333",strokeWidth:uf,left:e.x,top:e.y,selectable:!0,hasBorders:!1,hasControls:!1,originX:"center",originY:"center",shapeName:"tempPoint",pointId:t,objectCaching:!1,hoverCursor:n?"default":"move"}},cf.invisiblePoint=function(t){return{radius:ff,fill:"green",stroke:"#333333",left:t.x,top:t.y,selectable:!0,hasBorders:!1,hasControls:!1,originX:"center",originY:"center",shapeName:"invisiblePoint",objectCaching:!1,opacity:0,hoverCursor:"default"}},cf.changeRemovablePointToTemp=function(t){return{radius:hf,fill:"#ffffff",stroke:"#333333",strokeWidth:uf,selectable:!0,shapeName:"tempPoint",pointId:t,lockMovementX:!1,lockMovementY:!1,hoverCursor:"move"}},cf.existingPolygonPoint=function(t,e){return{radius:hf,fill:"blue",stroke:"#333333",strokeWidth:uf,left:e.x,top:e.y,selectable:!0,hasBorders:!1,hasControls:!1,originX:"center",originY:"center",shapeName:"point",objectCaching:!1,pointId:t,perPixelTargetFind:!0,hoverCursor:"move"}},cf.removablePolygonPoint=function(t,e,n){var r={radius:df,fill:"red",stroke:"#333333",strokeWidth:uf,selectable:!0,hasBorders:!1,hasControls:!1,originX:"center",originY:"center",shapeName:"point",objectCaching:!1,pointId:t,perPixelTargetFind:!0,lockMovementX:!0,lockMovementY:!0,hoverCursor:"default"};return e&&(r.left=e.x,r.top=e.y,n<4&&(r.fill="black",r.radius=pf)),r},cf.startingAddPolygonPoint=function(t,e){var n={radius:df,fill:"green",stroke:"#333333",strokeWidth:uf,selectable:!0,hasBorders:!1,hasControls:!1,originX:"center",originY:"center",shapeName:"point",objectCaching:!1,pointId:t,perPixelTargetFind:!0,lockMovementX:!0,lockMovementY:!0};return e&&(n.left=e.x,n.top=e.y),n},cf.setZoomInProperties=function(t,e){hf-=hf*t,uf-=uf*t,df-=df*t,ff-=ff*t,pf-=pf*t,mf-=mf*t,yf-=yf*t,gf-=gf*e,bf-=bf*e,vf-=vf*e,wf+=.05},cf.setZoomOutProperties=function(t,e){uf*=t,df*=e,hf*=t,ff*=t,pf*=t,mf*=t,yf*=t,gf*=e,bf*=e,vf*=e,wf-=.05},cf.getPolygonAlignmentAfterPointMove=function(){return wf};var If=0;function Sf(t,e){if(t.setCoords(),ec()>1.00001){var n=mu(),r=n.height,i=n.width,o=r*ec(),a=i*ec();t.left+t.width>a/ec()-ec()&&(t.left=a/ec()-t.width-2),t.top+t.height>o/ec()-ec()&&(t.top=o/ec()-t.height-2)}else"bndBox"===t.shapeName?function(t,e){t.left+t.width>e.width-If&&(t.left=Math.floor(e.width-t.width-If))}(t,e):"polygon"===t.shapeName&&function(t,e){t.left+t.width>e.width-1.8&&(t.left=Math.floor(e.width-t.width-1.8))}(t,e),t.top+t.height>e.height-2&&(t.top=e.height-t.height-2);t.top<0&&(t.top=0),t.left<0&&(t.left=0)}function Af(t,e){if(t.setCoords(),ec()>1.00001){var n=mu(),r=n.height,i=n.width,o=r*ec(),a=i*ec();t.left+t.width/2>a/ec()+.75&&(t.left=a/ec()-t.width/2),t.top+t.height/2>o/ec()+1&&(t.top=o/ec()-t.height/2+1)}else t.left+t.width/2>e.width+1.5&&(t.left=e.width-t.width/2+1.5),t.top+t.height/2>e.height+1.5&&(t.top=e.height-t.height/2+1.5);t.top+t.height/2<0&&(t.top=0),t.left+t.width/2<0&&(t.left=0)}function Lf(t){If=t}var kf=0;function Tf(t,e,n){var r=n.height*e.scaleY,i=n.width*e.scaleX;t.setCoords(),"bndBox"===t.shapeName?(function(t,e){t.left+t.width>e-kf&&(t.width=e-t.left-2.4)}(t,i),function(t,e){t.top+t.height>e-2&&(t.height=e-t.top-2)}(t,r),function(t){t.top<0&&(t.top=0)}(t),function(t){t.left<0&&(t.left=0)}(t)):"polygon"===t.shapeName&&(function(t,e){t.left+t.width>e-1.8&&t.points.forEach((function(t){t.x+1>e-1.8&&(t.x-=1.8)}))}(t,i),function(t,e){t.top+t.height>e-2&&t.points.forEach((function(t){t.y+1>e-2&&(t.y-=1.8)}))}(t,r),function(t){t.top<0&&t.points.forEach((function(t){t.y<0&&(t.y=0)}))}(t),function(t){t.left<0&&t.points.forEach((function(t){t.x<0&&(t.x=0)}))}(t))}function Nf(t){kf=t}function Bf(t){return t instanceof Element||t instanceof HTMLDocument}function Cf(t){Bf(t)&&"toolkit-button-active"===t.classList[1]||(t.classList.replace(t.classList[1],"toolkit-button-active"),t.childNodes[1].style.filter="invert(54%) sepia(52%) saturate(682%) hue-rotate(163deg) brightness(95%) contrast(87%)",t.style.backgroundColor="#f1f5fd")}function Mf(t){Bf(t)&&"toolkit-button-default"===t.classList[1]||(t.classList.replace(t.classList[1],"toolkit-button-default"),t.childNodes[1].style.filter="",t.style.backgroundColor="")}function Df(t){Bf(t)&&"toolkit-button-disabled"===t.classList[1]||(t.classList.replace(t.classList[1],"toolkit-button-disabled"),t.childNodes[1].style.filter="invert(77%) sepia(0%) saturate(716%) hue-rotate(155deg) brightness(92%) contrast(83%)",t.style.backgroundColor="")}var Pf="active",Ff="default",jf="disabled",Rf=Ff,Uf=Ff,zf=Ff,Hf=Ff,Vf=Ff,Wf=null,Yf=null,Gf=null,$f=null,Xf=null,Kf=null,Zf=null,qf=null,Jf=null;function Qf(){for(var t=Kh(),e=Object.keys(t),n=0;n<e.length;n+=1)if("polygon"===t[e[n]].shapeRef.shapeName)return!0;return!1}function tp(){Mf($f),Vf=Ff}function ep(){Df($f),Vf=jf}function np(){Mf(Zf),zf=Ff}function rp(){Df(Zf),zf=jf}function ip(){return zf}function op(){Mf(qf),Hf=Ff}function ap(){Df(qf),Hf=jf}function sp(){Df(Jf)}function lp(){Mf(Yf),Uf=Ff}function cp(){Df(Yf),Uf=jf}function up(){Mf(Wf),Rf=Ff}function dp(){Df(Wf),Rf=jf}function hp(){Mf(Gf)}function fp(){Df(Gf)}function pp(){Mf(Xf)}function mp(){Df(Xf)}function yp(){Df(Kf)}function gp(){return!Qf()&&(dp(),cp(),!0)}function bp(){Qf()&&!cc()?lp():cp()}function vp(){Qf()||cc()?up():dp()}function wp(){bp(),vp()}function _p(){Cf(qf),Hf=Pf,zf===Pf&&np(),Vf===Pf&&tp()}function xp(){Cf($f),Vf=Pf,zf===Pf&&np(),Hf===Pf&&op()}function Ep(){Cf(Zf),zf=Pf,Vf===Pf&&tp(),Hf===Pf&&op()}var Op,Ip,Sp,Ap,Lp,kp=null,Tp=[],Np=!0,Bp=null,Cp=0,Mp=null,Dp=null,Pp=null,Fp=!1,jp=null,Rp=!1,Up=null,zp=!1,Hp={x:-1,y:-1},Vp=!1,Wp=!1,Yp=!1;function Gp(){kp.remove(Bp),Bp=null}function $p(t){if(Bp)if(Vp)!function(t){var e=Bp.get("points");e[Tp.length]={x:t.x,y:t.y},Bp.set({points:e});var n=new(Ys().Polygon)(Bp.get("points"),cf.newTempPolygon());Gp(),Bp=n,kp.add(n),n.sendToBack(),zc(!0)}(t),Vp=!1;else{var e=Bp.get("points");e[Tp.length]={x:t.x,y:t.y},Bp.set({points:e}),kp.renderAll()}}function Xp(t){Xl()||t.set({lockMovementX:!0,lockMovementY:!0,hoverCursor:"default"})}function Kp(){var t=[];Tp.forEach((function(e){t.push({x:e.left,y:e.top}),kp.remove(e)})),kp.remove(jp),jp=null,Gp();var e=new(Ys().Polygon)(t,cf.newPolygon());Xp(e),kp.add(e),Bp=null,Np=!1,Rp=!0,Y_(e,kp),Ch(),zc(!1),$c(!0)}function Zp(t){zc(!0);var e=new(Ys().Circle)(cf.newPoint(Cp,t,!0));Cp+=1;var n=[t.x,t.y,t.x,t.y];if(Bp){(n=Bp.get("points")).push({x:t.x,y:t.y});var r=new(Ys().Polygon)(n,cf.newTempPolygon());kp.remove(Bp),kp.add(r),Bp=r,Up=e,kp.renderAll()}else{var i=[{x:t.x,y:t.y}],o=new(Ys().Polygon)(i,cf.newTempPolygon());Bp=o,kp.add(o)}kp.add(e),0===Tp.length&&(jp=new(Ys().Circle)(cf.invisiblePoint(t)),kp.add(jp),e.set(cf.firstPoint()),bp(),vp(),hp()),Af(e,kp),Tp.push(e),$p(t),Bp.sendToBack(),kp.selection=!1;var a=t.x,s=t.y;Hp={x:a,y:s}}function qp(){Tp[0]&&(Tp.forEach((function(t){kp.remove(t)})),kp.remove(jp),jp=null,Gp(),Tp=[],Bp=null,Cp=0,Fp=!1,Rp=!1,zp=!1,zc(!1),Dp=null,Wp=!1,Hp={x:-1,y:-1})}function Jp(){kp&&xu(kp),qp()}function Qp(t){Tp.length>2&&(Tp[0].stroke=t)}function tm(t){var e=kp.getPointer(t.e);(function(t){return!(!Bp||kp.getPointer(Dp.e).x===t.x)})(e)||(Sc(!1),t.target&&t.target.shapeName?"invisiblePoint"===t.target.shapeName?Tp.length>2&&Kp():"tempPoint"===t.target.shapeName?Yp=!0:Np&&Zp(e):Np&&Zp(e),Dp=t)}function em(){}function nm(){kp.__eventListeners["mouse:down"]=[],kp.on("mouse:down",(function(t){(!t.target||t.target&&"tempPoint"!==t.target.shapeName)&&tm(t)})),Mp=em}function rm(){Np=!0,_p(),Sc(!0),Rp=!1,qp(),_u(kp)}function im(){var t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t);var e=t.offsetWidth-t.clientWidth;return t.remove(),2*e}var om,am,sm,lm,cm,um=1,dm=null,hm=null;function fm(t,e){Ap-=t,Lp-=e}function pm(t,e){var n=Hu();n.style.left=t||"50%",n.style.top=e||"50%"}function mm(t,e,n){Ip.style.width=t,Ip.style.maxWidth=e,Ip.style.maxHeight=n}function ym(t,e,n,r,i){Op.style.width=t,Op.style.height=e,Op.style.marginLeft=r,Op.style.marginTop=i,Op.style.left=n||"50%"}function gm(t,e,n,r){Sp.style.width=t,Sp.style.height=e,Sp.style.marginLeft=n,Sp.style.marginTop=r}function bm(){Ip.style.backgroundColor="#b1b1b1"}function vm(){Ip.style.backgroundColor=""}function wm(t,e,n,r,i,o,a,s){!function(t,e,n,r){Ap=t,Lp=e,dm=n,um=r}(i,o,a,s),t?e?(Cc(!0),function(t,e){var n="".concat(Math.round(Ap-1),"px"),r="".concat(Math.round(Lp),"px"),i="calc(50% - ".concat(Math.round(4.5),"px)"),o="".concat(5.5,"px"),a="".concat(Math.round(t)-4,"px"),s="".concat(Math.round(e)-12-(um+4.5/il()),"px"),l="calc(50% - ".concat(3.25*il(),"px)");mm(n,"",r),ym("","",i,o,""),gm("","",a,s),pm(l,"calc(50% - 3.2px)"),fm(7,7),bm()}(n,r)):(Cc(!1),function(t,e){var n="".concat(t+.5,"px"),r="".concat(Lp,"px"),i="".concat(7,"px"),o="".concat(e-5-13,"px");mm(n,"",r),ym("","","",i,""),gm("","","",o),pm("",""),bm()}(n,r),Math.round(Ap)+10>=dm.maximumCanvasWidth-1&&(function(t,e){var n="".concat(Math.round(t)+.3,"px"),r="".concat(Lp,"px"),i="calc(50% - ".concat(2.5,"px)"),o="".concat(t-1,"px"),a="".concat(5,"px"),s="calc(50% - ".concat(4,"px)"),l="".concat(e-18,"px");mm(n,"",r),ym(o,"",i,a,""),gm("","","",l),pm(s,""),bm()}(n,r),Math.round(Ap)+5>=dm.maximumCanvasWidth-1&&(Cc(!0),function(t,e){var n,r="".concat(dm.maximumCanvasWidth,"px"),i="".concat(dm.maximumCanvasHeight,"px"),o="calc(50% - ".concat(4,"px)"),a="".concat(5,"px"),s="".concat(Math.round(t)+1.5,"px"),l="".concat(e-18,"px"),c="calc(50% - ".concat(Math.round(2.5)-.5,"px)"),u="calc(50% - ".concat(Math.round(2.5),"px)"),d=t+5-dm.maximumCanvasWidth+2.3;(n=Ip).scrollWidth,n.clientWidth,mm(r,"",i),ym("","",o,a,""),gm(s,"","",l),pm(c,u),fm(d,7),bm()}(n,r)))):e?(Cc(!1),function(t,e){var n="".concat(Ap-1,"px"),r="".concat(Math.round(2.5)-.1,"px"),i="".concat(t-5,"px"),o="".concat(e-14,"px");mm("",n,""),ym("","","calc(50% + 1px)","",r),gm("","",i,o),pm("calc(50% + 0.5px)","calc(50% + 1px)"),vm()}(n,r),Lp+10>dm.maximumCanvasHeight-4&&(function(t,e){var n="".concat(Ap-1,"px"),r="calc(50% - ".concat(2.5,"px)"),i="".concat(2.5,"px"),o="".concat(t-1,"px"),a="".concat(e-18,"px"),s="calc(50% - ".concat(Math.round(2.5),"px)");mm("",n,""),ym("","",r,i,""),gm(o,"","",a),pm("",s),bm()}(n,r),Lp+5>dm.maximumCanvasHeight-1&&(Cc(!0),function(t,e){var n="".concat(dm.maximumCanvasWidth,"px"),r="".concat(Math.round(dm.maximumCanvasHeight),"px"),i="calc(50% - ".concat(Math.round(2.5)-2,"px)"),o="".concat(Math.round(2.5)-2,"px"),a="".concat(Math.round(t)-1.5,"px"),s="".concat(e-17.5,"px"),l="calc(50% - ".concat(3,"px)"),c="calc(50% - ".concat(Math.round(2.5)+.5,"px)"),u=Math.round(Lp)+5-dm.maximumCanvasHeight+1.75;mm("",n,r),ym("","",i,o,""),gm("","",a,s),pm(l,c),fm(8,u),bm()}(n,r)))):(Cc(!1),mm("","",""),gm("","","",""),ym("","","","",""),pm("",""),vm());var l={width:Ap,height:Lp};hm.setDimensions(l)}function _m(t,e,n){Sp=t,Ip=e,Op=n}var xm=1,Em=6,Om=null,Im=null;function Sm(t,e){lm-=t,cm-=e}function Am(t,e){var n=Hu();n.style.left=t||"50%",n.style.top=e||"50%"}function Lm(t,e,n){am.style.width=t,am.style.maxWidth=e,am.style.maxHeight=n}function km(t,e,n,r,i){om.style.width=t,om.style.height=e,om.style.marginLeft=r,om.style.marginTop=i,om.style.left=n||"50%"}function Tm(t,e,n,r){sm.style.width=t,sm.style.height=e,sm.style.marginLeft=n,sm.style.marginTop=r}function Nm(){am.style.backgroundColor="#b1b1b1"}function Bm(){am.style.backgroundColor=""}function Cm(t,e,n,r,i,o,a,s){il()>1.000001&&(o+=1),function(t,e,n,r){lm=t,cm=e,Om=n,xm=r}(i,o,a,s),Em=function(){var t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t);var e=t.offsetWidth-t.clientWidth;return t.remove(),e}()/2,t?e?(Cc(!0),function(t,e){var n="".concat(lm+.5,"px"),r="".concat(cm,"px"),i="calc(50% - ".concat(Math.round(Em/2)-1.25,"px)"),o="".concat(Em/2-1,"px"),a=il()>1.000001?"".concat(Math.round(t)-3/il(),"px"):"".concat(Math.round(t)-4.5,"px"),s="".concat(Math.round(e)-16.5-xm,"px"),l="calc(50% - ".concat(Math.round(Em/2),"px)"),c="calc(50% - ".concat(Math.round(Em/2)+.5,"px)");Lm(n,"",r),km("","",i,o,""),Tm("","",a,s),Am(l,c),Sm(Em+.25,Em+.2),Nm()}(n,r)):(Cc(!1),function(t,e){var n="".concat(Math.round(t)-1,"px"),r="".concat(cm,"px"),i="".concat(Em+1,"px"),o=il()>1.000001?"".concat(e-Em-10/il(),"px"):"".concat(e-Em-13,"px");Lm(n,"",r),km("","","",i,""),Tm("","","",o),Am("",""),Nm()}(n,r),Math.round(lm)+2*Em>=Om.maximumCanvasWidth-1&&(function(t,e){var n="".concat(Math.round(t),"px"),r="".concat(cm,"px"),i="calc(50% - ".concat(Em/2-.5,"px)"),o="".concat(t-1,"px"),a="".concat(Em,"px"),s="calc(50% - ".concat(Em/2,"px)"),l="".concat(e-18,"px");Lm(n,"",r),km(o,"",i,a,""),Tm("","","",l),Am(s,""),Nm()}(n,r),Math.round(lm)+Em>=Om.maximumCanvasWidth&&(Cc(!0),function(t,e){var n="".concat(Om.maximumCanvasWidth+.5,"px"),r="".concat(Om.maximumCanvasHeight-1,"px"),i="calc(50% - ".concat(Em,"px)"),o="".concat(Em,"px"),a="".concat(Math.round(t)+1,"px"),s="".concat(e-19,"px"),l="calc(50% - ".concat(Math.round(Em/2),"px)"),c="calc(50% - ".concat(Math.round(Em/2)+.5,"px)"),u=t+Em-Om.maximumCanvasWidth+.5;Lm(n,"",r),km("","",i,o,""),Tm(a,"","",s),Am(l,c),Sm(u,Em+1),Nm()}(n,r)))):e?(Cc(!1),function(t,e){var n="".concat(lm-1,"px"),r="".concat(Math.round(Em/2)-1.5,"px"),i="".concat(t-4,"px"),o="".concat(e-15,"px");Lm("",n,""),km("","","calc(50% + 1px)","",r),Tm("","",i,o),Am("",""),Bm()}(n,r),cm+2*Em>Om.maximumCanvasHeight-1&&(function(t,e){var n="".concat(lm-1,"px"),r="calc(50% - ".concat(Em/2,"px)"),i="".concat(Em/2,"px"),o="".concat(t-.5,"px"),a="".concat(e-18,"px"),s="calc(50% - ".concat(Math.round(Em/2),"px)");Lm("",n,""),km("","",r,i,""),Tm(o,"","",a),Am("",s),Nm()}(n,r),cm+Em>Om.maximumCanvasHeight&&(Cc(!0),function(t,e){var n="".concat(Om.maximumCanvasWidth-1,"px"),r="".concat(Math.round(Om.maximumCanvasHeight-2),"px"),i="calc(50% - ".concat(Math.round(Em/2)-2.5,"px)"),o="".concat(Math.round(Em/2)-2,"px"),a="".concat(Math.round(t)-5,"px"),s="".concat(e-19,"px"),l="calc(50% - ".concat(Em/2,"px)"),c="calc(50% - ".concat(Math.round(Em/2)+.5,"px)"),u=Math.round(cm)+Em-Om.maximumCanvasHeight+2;Lm("",n,r),km("","",i,o,""),Tm("","",a,s),Am(l,c),Sm(Em+.5,u),Nm()}(n,r)))):(Cc(!1),Lm("","",""),Tm("","","",""),km("","","","",""),Am("",""),Bm());var l={width:lm,height:cm};Im.setDimensions(l)}function Mm(t,e,n){sm=t,am=e,om=n}var Dm,Pm,Fm,jm=null,Rm=null,Um=null,zm=null,Hm=null,Vm=0,Wm=!1,Ym=!1,Gm={},$m={polygon:.104,point:.1,label:.08,bndBox:.104,popup:.1,crosshair:.104};function Xm(){cf.setZoomOutProperties(Gm.point,Gm.polygon),Dh.setZoomOutProperties(Gm.label),bu.setZoomOutProperties(Gm.bndBox),Eu.setZoomOutProperties(Gm.crosshair)}function Km(t){t.fontSize*=Gm.label,"polygon"===t.attachedShape&&(t.top-=.5)}function Zm(t){switch(t.shapeName){case"polygon":t.strokeWidth*=Gm.polygon,t.labelOffsetTop=t.top-(t.points[0].y-Dh.pointOffsetProperties().top);break;case"tempPolygon":case"addPointsLine":t.strokeWidth*=Gm.polygon;break;case"point":case"invisiblePoint":case"firstPoint":case"tempPoint":case"initialAddPoint":t.radius*=Gm.point,t.strokeWidth*=Gm.point,t.polygonMoved&&(t.left+=.05,t.top+=.05);break;case"label":Km(t);break;case"bndBox":t.strokeWidth*=Gm.bndBox;break;case"crosshairLine":t.strokeWidth*=Gm.crosshair}}function qm(){Xm(),Rm.forEachObject((function(t){Zm(t)})),Rm.renderAll()}function Jm(t,e){Object.keys(t).forEach((function(n){Zm(t[n].shapeRef),Km(e[n])}))}function Qm(t){var e=!1,n=!1,r=zm.width*jm,i=r,o=zm.height*jm,a=o;return Um.maximumCanvasHeight<o&&(o=Um.maximumCanvasHeight,e=!0),Um.maximumCanvasWidth<r&&(r=Um.maximumCanvasWidth,n=!0),1===jm&&(r=Math.ceil(r),o=Math.ceil(o)),t&&Hm(e,n,i,a,r,o,Um,jm),!n&&!e}function ty(){Rm.forEachObject((function(t){t.setCoords()})),Rm.renderAll()}function ey(){Qm(!0),ty(),Bc(jm)}function ny(){jm<=2&&Ym&&(lf(0),Ym=!1)}function ry(){for(hu(),jm=1,Rm.setZoom(jm);0!==Vm;)Vm-=1,qm(),ny();var t=yu();Dh.updatePolygonOffsetProperties(t),xf(t,Rm),pp(),yp(),Ym=!1}function iy(){jm<1.0001&&(ou=!1,uu()),Vm+=1,jm+=.2,Rm.setZoom(jm),cf.setZoomInProperties($m.point,$m.polygon),Dh.setZoomInProperties($m.label),bu.setZoomInProperties($m.bndBox),Eu.setZoomInProperties($m.crosshair),Rm.forEachObject((function(t){switch(t.shapeName){case"polygon":t.strokeWidth-=t.strokeWidth*$m.polygon,t.labelOffsetTop=t.top-(t.points[0].y-Dh.pointOffsetProperties().top);break;case"tempPolygon":case"addPointsLine":t.strokeWidth-=t.strokeWidth*$m.polygon;break;case"point":case"invisiblePoint":case"firstPoint":case"tempPoint":case"initialAddPoint":t.radius-=t.radius*$m.point,t.strokeWidth-=t.strokeWidth*$m.point,t.polygonMoved&&(t.left-=.05,t.top-=.05);break;case"label":t.fontSize-=t.fontSize*$m.label,"polygon"===t.attachedShape&&(t.top+=.5);break;case"bndBox":t.strokeWidth-=t.strokeWidth*$m.bndBox;break;case"crosshairLine":t.strokeWidth-=t.strokeWidth*$m.crosshair}})),Rm.renderAll(),jm>2&&!Ym&&(lf(.6),Ym=!0),ey(),Mf(Kf),jm>=3.69999&&mp()}function oy(t,e,n){n?(Um=pu(),zm=mu(),Qm(!0)):(Um=pu(),zm=mu(),Object.keys($m).forEach((function(t){var e=1/$m[t],n=e-1;Gm[t]=e/n})),"in"===e&&jm<3.7?iy():"out"===e&&jm>1.0001&&function(){if(!Dm.style.marginTop&&zm.scaleX<1)ry();else if(Vm-=1,jm-=.2,qm(),ny(),jm<1.0001){hu();var t=yu();Dh.updatePolygonOffsetProperties(t),xf(t,Rm),Rm.setZoom(jm),yp()}else Qm()&&zm.scaleX<1?ry():(pp(),Rm.setZoom(jm));ey()}(),yc()&&ld())}function ay(t){jm=1;for(var e,n=Vm;0!==Vm;)Vm-=1,Xm(),ny();return function(t){var e;Pm.style.width="",Pm.style.maxWidth="",Pm.style.maxHeight="",Dm.style.width="",Dm.style.height="",Dm.style.marginLeft="",Dm.style.marginTop="",Fm.style.width="",Fm.style.height="",Fm.style.marginLeft="",Fm.style.marginTop="",Fm.style.left="50%",t||((e=Hu()).style.left="50%",e.style.top="50%"),Pm.style.backgroundColor=""}(t),Cc(!1),Bc(jm),hu(),yp(),yc()&&(ld(),e=Rm,Gu&&(Gu.set({strokeWidth:Eu.strokeWidth()}),$u.set({strokeWidth:Eu.strokeWidth()}),e.renderAll())),n}function sy(t,e,n){for(;0!==n;)n-=1,Jm(t,e)}function ly(t){Dm=document.getElementById("stub"),Pm=document.getElementById("zoom-overflow"),Fm=document.getElementById("zoom-overflow-wrapper"),t(Dm,Pm,Fm)}window.zoomOverflowScroll=function(t){Rm.viewportTransform[4]=-t.scrollLeft,Rm.viewportTransform[5]=-t.scrollTop,Wm?Wm=!1:Bp&&(Vp=!0),ty()};var cy={},uy=!1,dy=[],hy=null,fy=!1,py=!1;function my(){py=!1}function yy(t){return"settings-button"!==t.target.id||!rc()}function gy(t){return"export-datasets-button"!==t.target.id||!ic()}function by(t,e){for(var n=0;n<t.length;n+=1)if(!t[n]())return;dy[0].style.display="block",hy=cy[e]}function vy(){sl&&uy&&(uy=!1,1)||(py=!0),hy&&(hy.style.display="none",hy=null)}function wy(t){return yy(t)}function _y(t){return gy(t)}function xy(t,e){var n=document.getElementById(t),r=document.getElementById(e);n.addEventListener("mouseenter",(function(t){!function(t,e){var n=this,r=t.target.tagName;"BUTTON"!==r&&"A"!==r||(dy.unshift(cy[e]),fy?by([wy.bind(this,t),_y.bind(this,t)],e):setTimeout((function(){1!==dy.length||cy[e]!==dy[0]||py||by([yy.bind(n,t),gy.bind(n,t)],e),py=!1}),500))}(t,r.id)})),n.addEventListener("mouseleave",(function(t){!function(t){var e=t.target.tagName;"BUTTON"!==e&&"A"!==e||(null!==hy&&(hy.style.display="none",hy=null,fy=!0,setTimeout((function(){fy=!1}),200)),dy.pop()),py=!1}(t)})),cy[r.id]=r}function Ey(t){return t.replace(/(\r\n|\n|\r)/gm,"")}function Oy(t){return t.trim()}var Iy=null;function Sy(){var t,e=oc(),n=Iy[e];if(n.numberOfMLGeneratedShapes>0&&(n.numberOfMLGeneratedShapes-=1,0===n.numberOfMLGeneratedShapes)){var r=n.thumbnailElementRef.childNodes;(t=r[1]).classList.contains("image-list-thumbnail-machine-learning-selected")&&t.classList.replace("image-list-thumbnail-machine-learning-selected","image-list-thumbnail-default"),function(t){t.style.display="block"}(r[2])}}function Ay(t,e){sl?function(t,e){(function(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return!(n.top<r.top||function(t){return t.scrollWidth>t.clientWidth}(e)&&n.bottom>r.bottom-Qc()||n.bottom>r.bottom)})(t,e)||t.scrollIntoView()}(t,e):t.scrollIntoViewIfNeeded()}function Ly(t,e){return 0!==e.length?(e.forEach((function(e){t.remove(e)})),t.renderAll(),[]):e}function ky(t,e){var n=e.id;ef(n),B_(n)}function Ty(t,e,n){var r=0,i=[],o=e.points.length;return e.get("points").forEach((function(a){var s=new(Ys().Circle)(n(r,a,o));e.polygonMoved&&(s.left+=1,s.top+=1),t.add(s),i.push(s),r+=1})),i}function Ny(t){!function(t,e){t.forEachObject((function(t){e&&"bndBox"!==t.shapeName&&(t.perPixelTargetFind=!0),"bndBox"===t.shapeName?t.selectable=!1:(t.lockMovementX=!0,t.lockMovementY=!0),"point"===t.shapeName&&t.set(cf.additionalPoint()),t.hoverCursor="default"})),t.renderAll()}(t,!(Wl()||$l())),t.defaultCursor="default",t.hoverCursor="default"}var By=null,Cy=null,My=[],Dy=0,Py=null,Fy=[],jy=!0;function Ry(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Cy=new(Ys().Line)(e,cf.newLine()),By.add(Cy),By.renderAll()}function Uy(){By.remove(Cy),Fy.forEach((function(t){By.remove(t)})),Fy=[],Dy=0}function zy(){My.forEach((function(t){By.remove(t)})),My=[],Cy=null}function Hy(){Cy&&(Uy(),zy(),By.forEachObject((function(t){("point"===t.shapeName||"initialAddPoint"===t.shapeName)&&By.remove(t)})),By.renderAll())}function Vy(t){for(var e=0,n=0;n<t.length-1;n+=1)e+=Math.hypot(t[n+1].x-t[n].x,t[n+1].y-t[n].y);return e}function Wy(t,e,n){if(e<n)Fy.forEach((function(e){t.push({x:e.left,y:e.top})}));else for(var r=Fy.length-1;r>-1;r-=1)t.push({x:Fy[r].left,y:Fy[r].top})}function Yy(t,e,n,r,i){var o=function(t,e,n){return!!t&&function(t,e){for(var n=0;n<e;n+=1)if(0!==Object.keys(t.points[n]).length)return!1;return!0}(e,n)}(i,e,r);if(e.points.length-e.numberOfNullPolygonPoints>3){if(0===Object.keys(e.points[r]).length){for(var a=r-1;a>-1;a-=1)if(0!==Object.keys(e.points[a]).length){e.points[e.points.length-1]=e.points[a],e.points[a]={};break}}else if(e.points.length-1===r){for(var s=r-1;s>-1;s-=1)if(0!==Object.keys(e.points[s]).length){e.points[r]=e.points[s],e.points[s]={};break}}else e.points[r]={};t.remove(n[r]),n[r]=null,e.numberOfNullPolygonPoints+=1,e.points.length-e.numberOfNullPolygonPoints==3&&n.forEach((function(t){t&&t.set(cf.disabledRemovePoint())})),o&&function(t){for(var e=0;0===Object.keys(t.points[e]).length;)e+=1;var n=N_(t.id);n.left=t.points[e].x-Dh.pointOffsetProperties().left,n.top=t.points[e].y-Dh.pointOffsetProperties().top,C_(t,t.points[e])}(e),t.renderAll()}}var Gy=null,$y=null,Xy=[],Ky=!1,Zy=!1;function qy(){return Ky}function Jy(t){Ky=t}function Qy(){return Ky?$y.id:null}function tg(t){var e,n;n=Xy,(e=Gy=Gy||t).discardActiveObject(),n.forEach((function(t){t&&e.bringToFront(t)})),Jy(!0)}function eg(){Xy=function(t,e){var n=[];if(e.forEach((function(t){t&&n.push(t)})),!t)return[];for(var r=t.points,i=[],o=0;o<r.length;o+=1)0!==Object.keys(r[o]).length&&i.push(r[o]);return t.set("points",i),t.numberOfNullPolygonPoints=0,function(t){var e=0;t.forEach((function(t){t.pointId=e,e+=1}))}(n),n}($y,Xy)}function ng(){wl?null===vl||_l?Xy=Ly(Gy,Xy):Zy=!0:Xy=Ly(Gy,Xy),Nc(!1),Jy(!1)}function rg(t){var e;(e=Gy=t||Gy)&&e.forEachObject((function(t){var e;e=t,Xl()||"bndBox"!==e.shapeName&&"polygon"!==e.shapeName?(e.lockMovementX=!1,e.lockMovementY=!1,e.hoverCursor="move"):"bndBox"===e.shapeName&&(e.lockMovementX=!0,e.lockMovementY=!0,e.hoverCursor="default"),e.selectable=!0,"point"===t.shapeName&&t.set(cf.defaultPoint())}))}function ig(){$y=function(t,e,n,r){!function(t,e,n,r){nf=t,rf=e,of=n,af=r}(t,e,n,r);var i=function(){var t=new(Ys().Polygon)([],af.newPolygon());return t.set({id:nf.id,selectable:!0,hoverCursor:"move",shapeLabelText:nf.shapeLabelText}),t}();of.add(i);var o,a,s,l,c,u,d=(o=nf.calcTransformMatrix(),l=nf.get("points").map((function(t){return new(Ys().Point)(t.x-nf.pathOffset.x,t.y-nf.pathOffset.y)})).map((function(t){return Ys().util.transformPoint(t,o)})),c=0,u=[],l.forEach((function(t){var e=new(Ys().Circle)(af.existingPolygonPoint(c,t,!0));e.set("polygonMoved",!0),of.add(e),rf.push(e),u.push({x:e.left-1,y:e.top-1}),c+=1})),u),h=(a=nf.id,Wh[a].color);return ef(nf.id),$h(i,h,i.id),(nf=i).set("polygonMoved",!0),nf.set("points",d),s=nf._calcDimensions(),nf.set({left:s.left,top:s.top,height:s.height,width:s.width,pathOffset:{x:s.left+s.width/2-sf,y:s.top+s.height/2-sf}}),nf.setCoords(),of.renderAll(),C_(nf,nf.points[0]),nf}($y,Xy,Gy,cf),Jy(!0)}function og(t,e){Gy=t,$y=e}function ag(){!function(t,e){var n=e._calcDimensions(),r={height:n.height,width:n.width,pathOffset:{x:n.left+n.width/2,y:n.top+n.height/2}};if(e.polygonMoved){var i=cf.getPolygonAlignmentAfterPointMove();r.left=n.left+i,r.top=n.top+i}else r.left=n.left,r.top=n.top;e.set(r),e.setCoords(),C_(e,e.points[0]),t.renderAll()}(Gy,$y)}function sg(t,e){!function(t,e,n){var r=t.target.left,i=t.target.top,o=t.target;if(e.polygonMoved){var a=cf.getPolygonAlignmentAfterPointMove();e.points[o.pointId]={x:r-a,y:i-a}}else e.points[o.pointId]={x:r,y:i};n&&(n.left=r-Dh.pointOffsetProperties().left,n.top=i-Dh.pointOffsetProperties().top)}(t,$y,e)}function lg(t,e){Yy(Gy,$y,Xy,t,e)}function cg(t,e){!function(t,e,n){var r;t.stroke="#333333",function(t,e){t.forEachObject((function(t){"point"===t.shapeName?t.set(cf.disabledAddPoint()):"polygon"!==t.shapeName&&"bndBox"!==t.shapeName||(t.hoverCursor="crosshair"),t.selectable=!1})),e.set(cf.selectedStartingAddPoint()),t.renderAll()}(r=By=n,t),r.defaultCursor="crosshair",r.hoverCursor="crosshair",Ry(t.left,t.top,e.x,e.y),Py=t,By.bringToFront(Py),jy=!1}(t,e,Gy)}function ug(t){!function(t){Cy.set({x2:t.x,y2:t.y}),Cy.setCoords(),By.renderAll()}(t)}function dg(t){!function(t){Af(t.target,By);var e=t.target.getCenterPoint().x,n=t.target.getCenterPoint().y,r=t.target.pointId;My[r].set({x2:e,y2:n}),r+1!==Dy?My[r+1].set({x1:e,y1:n}):Cy.set({x1:e,y1:n})}(t)}function hg(){Hy()}function fg(){Cy&&(Uy(),zy(),By.forEachObject((function(t){"initialAddPoint"===t.shapeName&&(t.shapeName="point")})),By.renderAll())}function pg(){return Cy}function mg(){Qh($y.id)}function yg(t,e,n,r,i){var o,a,s;og(t,e),t.discardActiveObject(),$y.bringToFront(),i?Xy=Ty(Gy,$y,cf.startingAddPolygonPoint):n?r?(o=$y,a=0,s=[],Gy.forEachObject((function(t){"tempPoint"!==t.shapeName&&"firstPoint"!==t.shapeName||(t.set(cf.removablePolygonPoint(a)),s.push(t),a+=1)})),s.length<4&&s.forEach((function(t){t.set(cf.disabledRemovePoint())})),o.sendBackwards(),Xy=s):Xy=Ty(Gy,$y,cf.removablePolygonPoint):Zy?(Zy=!1,tg()):Xy=Ty(Gy,$y,cf.existingPolygonPoint),Jy(!0)}function gg(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var bg=null,vg=null,wg=null,_g=null;function xg(){null!==vg&&(vg.style.backgroundColor=wg),vg=null}function Eg(t){xg();var e,n,r=(e=bg.getElementsByClassName("label".concat(t)),n=1,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,n)||function(t,e){if(t){if("string"==typeof t)return gg(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gg(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());vg=r[0],wg=vg.style.backgroundColor;var i="".concat(wg.substring(0,wg.length-5)," 0.6)");vg.style.backgroundColor=i,Ay(vg,_g)}function Og(t){wg=t,vg.style.backgroundColor=t}function Ig(){return vg}var Sg=0,Ag=0,Lg=0,kg=0,Tg=0,Ng={middleTop:!1,topRight:!1,middleRight:!1,bottomRight:!1,middleBottom:!1,bottomLeft:!1,middleLeft:!1,topLeft:!1};function Bg(t){Tg=t}function Cg(){Object.keys(Ng).forEach((function(t){Ng[t]=!1}))}function Mg(t){t.scaleX=1,t.scaleY=1}var Dg=null,Pg=null,Fg=!1,jg=!1,Rg=!1,Ug=null,zg=!1,Hg=!1,Vg=null,Wg=!1,Yg=!1,Gg=!1,$g=!1,Xg=null;function Kg(){Dg.discardActiveObject(),Dg.renderAll()}function Zg(t){Eg(t),hp()}function qg(){xg(),fp()}function Jg(t){qy()&&ng(),yg(Dg,t.target),Ug=t.target.id}function Qg(){ag(),Rg=!1}function tb(){ng(),Ug=null}function eb(t){Sy(),t.fill=t.trueFill,t.stroke=t.trueStroke,t.MLPallette=!1}function nb(t){$g=!0,t.target?(Vu(),"bndBox"===t.target.shapeName?(qg(),t.target.MLPallette&&(eb(t.target),Jh(t.target.id)),t.transform&&t.transform.corner&&function(t){var e,n,r,i,o;switch(Rc(!0),e=t.target,r=(n=mu()).height,i=n.width,o=ec(),e.top+e.height>r*o-2?e.height=r*o-2-e.top:e.left+e.width>i*o-2&&(e.width=i*o-2-e.left),t.transform.corner){case"ml":kg=t.target.left+t.target.width,Ng.middleLeft=!0;break;case"mt":Sg=t.target.top+t.target.height,Ng.middleTop=!0;break;case"tl":kg=t.target.left+t.target.width,Sg=t.target.top+t.target.height,Ng.topLeft=!0;break;case"tr":Sg=t.target.top+t.target.height,Ag=t.target.left,Ng.topRight=!0,t.target.left=Ag+t.target.width;break;case"mr":Ng.middleRight=!0;break;case"br":Ag=t.target.left,Lg=t.target.top,Ng.bottomRight=!0;break;case"mb":Ng.middleBottom=!0;break;case"bl":kg=t.target.left+t.target.width,Lg=t.target.top,Ng.bottomLeft=!0;break;default:Cg()}}(t),Zg(t.target.id),qy()&&(tb(),Hg=!1),Pg=N_(t.target.id),Ug=t.target.id,Yg=!0,Wu()):("polygon"===t.target.shapeName&&t.target.id!==Ug?(Yg&&(qg(),Yg=!1),Pg=N_(t.target.id),Hg=!0):Hg=!1,Wu())):Hg=!1,(Hg||Yg)&&Ql()&&Lc(!1)}function rb(t){sc()||lc()?Gg=!0:"point"===t.target.shapeName?mg():Qh(t.target.id)}function ib(t){$g=!1,t.target&&"bndBox"===t.target.shapeName?(jg&&(jg=!1),sc()&&(Rc(!1),Gg&&(rb(t),Gg=!1)),Dg.bringToFront(t.target),Dg.bringToFront(Pg),Cg()):Fg?(Zg(t.target.id),t.target.points.forEach((function(t){t.x<0&&(t.x=0),t.y<0&&(t.y=0)})),function(t){var e;Hg?(og(e=Dg,t.target),e.discardActiveObject(),ig(),Ug=t.target.id):ig()}(t),Jh(t.target.id),Dg.bringToFront(Pg),wl=!0):Hg?(Wg?Wg=!1:Zg(t.target.id),Dg.bringToFront(t.target),Vg(t),Dg.bringToFront(Pg)):Rg?(Qg(),$c(!0)):t.target&&"polygon"===t.target.shapeName?(Zg(t.target.id),tg(Dg)):!t.target&&qy()?(qg(),tb()):(null!=Ug||zg)&&(qg(),zg=!1),lc()&&(function(t){var e=Dg.getPointer(Dg.e),n=ec(),r=mu(),i=r.height*n,o=r.width*n;(e.x<0||o/n<e.x||e.y<0||i/n<e.y)&&("point"===t.target.shapeName?mg():Qh(t.target.id)),Uc(!1)}(t),Fg&&(Fg=!1),$c(!0))}function ob(t){if(t.target){Uc(!0);var e=t.target.shapeName;"polygon"===e?(Sf(t.target,Dg),qy()&&ng(),Pg.setCoords(),Pg.top=t.target.top-t.target.labelOffsetTop,Pg.left=t.target.left-t.target.labelOffsetLeft,Fg=!0):"point"===e?(Af(t.target,Dg),0===t.target.pointId?sg(t,Pg):sg(t),Qg(),Rg=!0):"bndBox"===e&&(Sf(t.target,Dg),Pg.setCoords(),Pg.top=t.target.top,Pg.left=t.target.left+Dh.boundingBoxOffsetProperties().left,t.target.isGeneratedViaML&&(t.target.isGeneratedViaML=!1),jg=!0)}}function ab(){Ug=null}function sb(){Ug=null,zg=!0}function lb(){Dg.__eventListeners["mouse:down"]=[],Dg.on("mouse:down",(function(t){nb(t)})),Vg=Jg}function cb(){var t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t);var e=t.offsetWidth-t.clientWidth;return t.remove(),2*e}function ub(t,e){if("mb"===t.transform.corner)t.target.top<e&&t.target.set({top:t.target.top}),t.target.set({height:Math.abs(t.target.top-e)});else if("mt"===t.transform.corner)if(t.target.top>e){var n=Math.abs(t.target.top-e+t.target.height);t.target.set({height:n}),t.target.set({top:e})}else if(e<t.target.top+t.target.height){var r=Math.abs(t.target.height-(e-t.target.top));t.target.set({height:r}),t.target.set({top:e})}}var db=null,hb=!1,fb=null,pb=!1,mb=!1,yb=!1,gb=null,bb=null,vb=!1;function wb(t){Eg(t),hp()}function _b(){ng(),db=null,xg(),fp()}function xb(t){t.target?(Vu(),"point"===t.target.shapeName?(lg(t.target.pointId,!0),pb=!0,gb=null,$c(!0)):("polygon"===t.target.shapeName&&(hb=t.target.id!==db),Wu()),mb=!1):mb=!0}function Eb(t){t.target&&"polygon"===t.target.shapeName&&(mb||hb)?function(t){pb&&(eg(),pb=!1),ng(),ab(),yg(fb,t.target,!0),wb(db=t.target.id),yb=!1,gb=null,bb=null,vb=!1}(t):(!t.target&&qy()||t.target&&"bndBox"===t.target.shapeName)&&_b()}var Ob=null,Ib=!1,Sb=null,Ab=!1,Lb=!1,kb=!1,Tb=null,Nb=!1,Bb=null,Cb=null,Mb=null,Db=!1,Pb=null,Fb=!1;function jb(t){Eg(t),hp()}function Rb(t){return Tb.x!==t.x}function Ub(t){Sb=t,Bb=Ky?$y:null,Ob=Qy(),Ab=!1,kb=!1,Db=!1,Pb=null,Fb=!1,Cb=null,function(t){!function(t){By=t,jy=!0}(t)}(t),null!=Ob&&jb(Ob)}function zb(t){ng(),ab(),yg(Sb,t,!1,!1,!0),jb(Ob=t.id),Mb=null,Db=!1,Pb=null,Fb=!1}function Hb(){ng(),Ob=null,xg(),fp()}function Vb(t){var e;if(kb)(t&&!t.target||t&&t.target&&"point"!==t.target.shapeName&&"initialAddPoint"!==t.target.shapeName)&&(Rb(Sb.getPointer(t.e))||(function(t){!function(t){var e;(e=By).forEachObject((function(t){"point"===t.shapeName&&t.set(cf.additionalPoint())})),e.renderAll();var n=By.getPointer(t.e);My.push(Cy),Ry(n.x,n.y,n.x,n.y);var r=new(Ys().Circle)(cf.newPoint(Dy,n,!0));By.add(r),Fy.push(r),Dy+=1,By.bringToFront(Py),jy=!0}(t)}(t),kb=!1));else if(t&&t.target&&"point"===t.target.shapeName)Ab=!1,e=t.target,function(t,e,n){for(var r=e.slice(),i=[],o=Math.min(Py.pointId,n.pointId),a=Math.max(Py.pointId,n.pointId),s=[],l=o;l<a+1;l+=1)s.push(r[l]);for(var c=Vy(s),u=[],d=a;d<r.length;d+=1)u.push(r[d]);for(var h=0;h<o+1;h+=1)u.push(r[h]);if(c<Vy(u)){o+=1,Wy(i=r.slice(0,o),Py.pointId,n.pointId);for(var f=a;f<r.length;f+=1)i.push(r[f])}else Wy(i=r.slice(o,a+1),n.pointId,Py.pointId);t.set({points:i}),Ny(By),Hy(),function(t){var e=N_(t.id);e.left=t.points[0].x-Dh.pointOffsetProperties().left,e.top=t.points[0].y-Dh.pointOffsetProperties().top}(t)}($y,$y.points,e),Xy=[],ag(),Jy(!1),zb(Bb),Cb=function(t,e){for(var n=e.left,r=e.top,i=0;i<t.length;i+=1){var o=t[i];if(n===o.left&&r===o.top)return o}return t[0]}(Xy,t.target),$c(!0);else if(!t.target||t.target&&"initialAddPoint"!==t.target.shapeName&&"tempPoint"!==t.target.shapeName){var n=Sb.getPointer(t.e);Rb(n)||function(t){My.push(Cy),Ry(t.x,t.y,t.x,t.y);var e=new(Ys().Circle)(cf.newPoint(Dy,t,!0));By.add(e),Fy.push(e),Af(e,By),Dy+=1}(n)}else t.target&&"tempPoint"===t.target.shapeName&&(Nb=!0)}function Wb(t){if(Ab)Vb(t);else if(t.target){if(Vu(),"point"===t.target.shapeName){var e=Sb.getPointer(t.e);cg(t.target,e),Ab=!0,kb=!0}else"polygon"===t.target.shapeName&&(Ib=t.target.id!==Ob),Wu();Lb=!1}else Lb=!0}function Yb(t){Nb=!1,t.target&&"polygon"===t.target.shapeName&&(Ib||Lb)?(Bb=t.target,zb(t.target),Lb=!1,Ib=!1):(!t.target&&qy()||t.target&&"bndBox"===t.target.shapeName)&&(Ab||Hb())}function Gb(){var t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t);var e=t.offsetWidth-t.clientWidth;return t.remove(),2*e}function $b(t){t.childNodes[1].style.display="none",t.childNodes[3].style.display=""}function Xb(t){t.childNodes[1].style.display="",t.childNodes[3].style.display="none"}function Kb(t){t.childNodes[5].style.display="none",t.childNodes[7].style.display=""}function Zb(t){t.childNodes[5].style.display="",t.childNodes[7].style.display="none"}function qb(t){t.childNodes[1].style.display="",t.childNodes[5].style.display="none"}function Jb(t){t.childNodes[3].style.display="none",t.childNodes[7].style.display=""}function Qb(t){t.childNodes[3].style.display="",t.childNodes[7].style.display="none"}function tv(t){var e=window.getComputedStyle(t,null),n=e.getPropertyValue("font-size"),r=e.getPropertyValue("font-family");return"".concat(n," ").concat(r)}function ev(t){"<br>"===t.innerHTML&&(t.innerHTML="")}function nv(t){return t.scrollHeight>t.clientHeight}function rv(t,e){var n;if(document.createRange){(n=document.createRange()).setStart(e.childNodes[0],t),n.collapse(!1);var r=window.getSelection();r.removeAllRanges(),r.addRange(n)}else document.selection&&((n=document.body.createTextRange()).moveToElementText(e),n.collapse(!1),n.select())}function iv(t,e,n,r){try{rv(t,e),n||r(e.innerHTML.substring(0,t))}catch(t){rv(0,e),n||r("")}}function ov(t,e){var n={position:0,highlightRangeOnPaste:0},r=null;if(window.getSelection){var i=window.getSelection();i.rangeCount&&((r=i.getRangeAt(0)).commonAncestorContainer.parentNode===t&&(n.position=r.endOffset),e&&(n.highlightRangeOnPaste=Math.abs(i.focusOffset-i.anchorOffset)))}else if(document.selection&&document.selection.createRange&&(r=document.selection.createRange()).parentElement()===t){var o=document.createElement("span");t.insertBefore(o,t.firstChild);var a=r.duplicate();a.moveToElementText(a),a.setEndPoint("EndToEnd",r),n.position=a.text.length}return n}function av(t){return av="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(t)}function sv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return lv(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function cv(){cv=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==av(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(av(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function uv(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function dv(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){uv(o,r,i,a,s,"next",t)}function s(t){uv(o,r,i,a,s,"throw",t)}a(void 0)}))}}var hv=!1,fv=0,pv=!1,mv=!1,yv=null,gv=null,bv=null,vv=!1,wv=!1,_v=null,xv=null,Ev=null,Ov=null,Iv=0,Sv=null,Av=null,Lv=null,kv=[],Tv=0,Nv=0,Bv=null,Cv=!1,Mv=!1,Dv=0,Pv=null,Fv=null,jv=0,Rv=!1,Uv=null,zv=0,Hv="label-container-";function Vv(){return Wv.apply(this,arguments)}function Wv(){return(Wv=dv(cv().mark((function t(){var e,n,r,i;return cv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qd();case 2:for(e=t.sent,n="<tbody>",r=0;r<e.length;r+=1)i='<tr><td><div id="labelOption'.concat(r,'" onMouseEnter="mouseEnterLabelDropdownOption(this, \'').concat(e[r].color.label,'\')" onMouseLeave="mouseLeaveLabelDropdownOption(this, true)" class="labelDropdownOption">').concat(e[r].text,"</div></td></tr>\n"),n+=i;return n+="</tbody>",t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Yv(){dv(cv().mark((function t(){var e,n,r;return cv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Vv();case 2:for(e=t.sent,n=document.getElementsByClassName("dropdown-content"),r=0;r<n.length;r+=1)n[r].innerHTML=e;case 5:case"end":return t.stop()}}),t)})))()}function Gv(t,e,n,r){return'\n  <div id="labelId'.concat(e,'" onMouseEnter="mouseEnterLabel(').concat(e,')" onMouseLeave="mouseLeaveLabel(').concat(e,')" onClick="labelBtnClick(').concat(e,')" class="label').concat(e,' labelListItem" style="background-color: ').concat(n,"; transition: ").concat(.3,'s; transform: translateX(-100%);">\n    <div id="').concat(r,'" onMouseEnter="mouseEnterVisibilityBtn(id, this)" onMouseLeave="mouseLeaveVisibilityBtn(id, this)" onClick="visibilityBtnClick(').concat(e,', this)" style="float:left; user-select: none; padding-right: 5px; width: 12px; cursor: pointer; padding-top: 1px">\n      ').concat((i=r,"default"===i?'\n      <img class="defaultVisibilityIcon" src="assets/svg/visibility-button.svg" alt="visibility">\n      <img class="highlightedVisibilityIcon" src="assets/svg/visibility-button-highlighted.svg" style="display: none" alt="visibility">\n      <img class="defaultVisibilityIcon" src="assets/svg/invisible-button.svg" style="display: none" alt="visibility">\n      <img class="highlightedVisibilityIcon" src="assets/svg/invisible-button-highlighted.svg" style="display: none" alt="visibility">\n    ':'\n    <img class="defaultVisibilityIcon" src="assets/svg/visibility-button.svg" style="display: none" alt="visibility">\n    <img class="highlightedVisibilityIcon" src="assets/svg/visibility-button-highlighted.svg" style="display: none" alt="visibility">\n    <img class="defaultVisibilityIcon" src="assets/svg/invisible-button.svg" alt="visibility">\n    <img class="highlightedVisibilityIcon" src="assets/svg/invisible-button-highlighted.svg" style="display: none" alt="visibility">\n  '),'\n    </div>\n    <div id="editButton').concat(e,'" onMouseEnter="mouseEnterLabelEditBtn(this)" onMouseLeave="mouseLeaveLabelEditBtn(this)" onClick="labelEditBtnClick(').concat(e,', this)" style="float:left; user-select: none; padding-right: 5px; width: 11px; cursor: pointer; padding-top: ').concat(il()>1.000001?.5:0,'px">\n      <img class="defaultLabelEditIcon" id="editButton').concat(e,'" src="assets/svg/edit.svg" style="padding-left: 1px" alt="edit">\n      <img class="highlightedLabelEditIcon" id="editButton').concat(e,'" src="assets/svg/edit-highlighted.svg" style="display: none" alt="edit">\n      <img class="defaultLabelEditIcon" id="editButton').concat(e,'" src="assets/svg/done-tick.svg" style="display: none" alt="edit">\n      <img class="highlightedLabelEditTickIcon" id="editButton').concat(e,'" src="assets/svg/done-tick-highlighted.svg" style="display: none" alt="edit">\n    </div>\n    <div id="labelText').concat(e,'" spellcheck="false" onkeydown="labelTextKeyDown(event)" ondblclick="labelDblClicked(').concat(e,')" class="labelText" contentEditable="false" style="user-select: none; padding-right: 32px; border: 1px solid transparent; display: flow-root; padding-top: ').concat(il()>1?2:0,'px;">').concat(t,'</div>\n      <table class="dropdown-content labelDropdown').concat(e,'">\n      </table>\n      <div id="chromium-fake-dropdown-border-fix').concat(e,'">\n        <div class="chromium-fake-dropdown-border-fix chromium-fake-dropdown-border-fix-width chromium-right-border-fix" style="display: none"></div>\n        <div class="chromium-fake-dropdown-border-fix chromium-bottom-border-fix" style="display: none"></div>\n      </div>\n    </div>\n  </div>\n  ');var i}function $v(){return document.createElement("div")}function Xv(t){var e=document.createElement("canvas"),n=e.getContext("2d");n.font=tv(gv);var r=n.measureText(t);nv(Bv)&&r.width>170-Qc()?Bv.scrollLeft=r.width-165+Qc()/2:!nv(Bv)&&r.width>170?Bv.scrollLeft=r.width-165:Bv.scrollLeft=0,e=null}function Kv(){return Bv.scrollWidth>Bv.clientWidth}function Zv(t){t.stopPropagation(),t.preventDefault();var e=(t.clipboardData||window.clipboardData).getData("Text"),n=ov(gv,!0),r=n.position,i=r-n.highlightRangeOnPaste,o=Ey(e);gv.innerHTML=gv.innerHTML.slice(0,i)+o+gv.innerHTML.slice(r),iv(i+o.length,gv,!1,Xv)}function qv(t){t.style.transform="",t.style.transition=""}function Jv(t){var e=document.getElementById("labelId".concat(t));setTimeout((function(){e.style.transform="translateX(0%)"})),setTimeout((function(){qv(e)}),300)}function Qv(t){if(null!=t){for(var e=0,n="".concat(Hv).concat(t),r=Ov.childNodes[0].childNodes;e!==r.length;){if(r[e].childNodes[0].childNodes[0].id===n){r[e].remove();break}e+=1}_v=null,bc("changed")}}function tw(t){var e;!function(t,e){k_[t].text=e,L_.renderAll()}(bv,t),e=t,Wh[bv].shapeRef.set("shapeLabelText",e)}function ew(t,e,n,r){var i=$v();i.innerHTML='<div class="labelDropdownOption" id="labelOption'.concat(n,'" onMouseEnter="mouseEnterLabelDropdownOption(this, \'').concat(r,'\')" onMouseLeave="mouseLeaveLabelDropdownOption(this, true)">').concat(t,"</div>"),e.insertRow(-1).insertCell(0).appendChild(i)}function nw(){if(gv){var t=gv.getBoundingClientRect(),e=t.height+t.top;yv&&yv[0]&&(yv[0].style.top="".concat(e,"px"))}}function rw(t){return iw.apply(this,arguments)}function iw(){return(iw=dv(cv().mark((function t(e){var n;return cv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qd();case 2:n=t.sent,e.deleteRow(n.length-1),6===n.length?Sv.style.height="126px":7===n.length&&ew("temp horizontal",e),window.setTimeout((function(){var t=n[n.length-1];ew(t.text,e,n.length-1,t.color.label),7===n.length&&e.deleteRow(6),window.labelTextKeyDown({key:"stub"})}),0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ow(){return yv[0].scrollHeight>yv[0].clientHeight}function aw(){var t=Math.max(-4,31-Bv.scrollLeft),e=Math.min(Nv,Tv+Bv.scrollLeft);yv[0].style.marginLeft="".concat(t,"px"),yv[0].style.width="".concat(e,"px"),function(t){if(!sl){var e=document.getElementById("chromium-fake-dropdown-border-fix".concat(t)),n=yv[0].getBoundingClientRect();ow()&&(Pv=e.childNodes[1],function(t){Pv.style.top="".concat(t.top,"px"),Pv.style.height="".concat(t.height,"px"),Pv.style.display=""}(n)),yv[0].scrollWidth>yv[0].clientWidth?(Fv=e.childNodes[3],function(t){"none"===yv[0].style.borderBottom&&(Rv||(jv=zv-t.height,ow()&&jv<1&&(jv=1),Rv=!0));var e=parseInt(yv[0].style.width,10);Fv.style.width="".concat(e,"px"),Uv||(Uv=t.height+t.top+jv-.6),Fv.style.top="".concat(Uv,"px"),zv=parseInt(t.height,10),yv[0].style.borderBottom="none",Fv.style.display=""}(n)):Fv&&(Fv.style.display="none",yv[0].style.borderBottom="",jv=0,Rv=!1)}}(bv)}function sw(t){(gv=document.getElementById("labelText".concat(t))).contentEditable=!0,gv.style.backgroundColor="white",gv.style.borderColor="#a39f9e",gv.style.paddingLeft="2px",(Ev=document.getElementById("editButton".concat(t))).style.paddingRight="3px",bv=t,iv(gv.innerHTML.length,gv,!1,Xv),yv=document.getElementsByClassName("labelDropdown".concat(t)),Uv=null,aw(),yv[0].classList.toggle("show"),yv[0].scrollTop=0,yv[0].scrollLeft=0}function lw(t){return cw.apply(this,arguments)}function cw(){return(cw=dv(cv().mark((function t(e){return cv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return sw(e),rw(yv[0]),Ay(gv,Bv),nw(),Lv=gv.innerHTML,t.next=7,qd();case 7:kv=t.sent,Iv=Bv.scrollTop,Cv=Kv(),hv=!0;case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function uw(){return _v}function dw(){var t,e={};e.target=_v,Gl()?(xb(e),Eb(e)):$l()?(pg()&&window.addPoints(),Wb(e),Yb(e)):(nb(e),ib(e)),_v&&"bndBox"===_v.shapeName&&(Gl()||$l()||(t=_v,Dg.setActiveObject(t)))}function hw(t){Nc(t!==Ug),Tc(t),_v=Xh(t),dw(),lw(t),wv=!1,xv="labelId".concat(t)}function fw(){yv[0].classList.contains("show")&&yv[0].classList.remove("show"),Pv&&(Pv.style.display="none"),Fv&&(Fv.style.display="none"),hv=!1}function pw(){fw(),gv.contentEditable=!1,gv.style.backgroundColor=null,gv.style.borderColor="transparent",gv.style.paddingLeft="",Ev.style.paddingRight="5px",Bv.scrollLeft=0,Tc(null)}function mw(t){var e=Oy(t);if(gv.innerHTML!==Lv)if(""===e)gv.innerHTML=Lv;else{gv.innerHTML=e,Zd(e);var n=Qd(e);qh(bv,n),Og(n.label),Yv(),Nh()}}function yw(){_v=null,qb(Ev),pw()}function gw(t,e){var n=sv(yv[0].childNodes,1),r=sv(n[0].childNodes[e].childNodes[0].childNodes,1);Av=r[0];var i=kv[t].color.label;Av.style.backgroundColor=i,Ay(Av,yv[0]),Dv=t}function bw(){var t=document.createElement("tbody");Ov.childNodes[0]&&Ov.replaceChild(t,Ov.childNodes[0])}function vw(t,e){var n=void 0!==e?e:bv;Gl()||$l()?"bndBox"!==t&&(Eg(n),hp()):(Eg(n),hp())}function ww(){vv=!0;var t=_v.shapeName;_v=null,Mv?Qb(Ev):qb(Ev),mw(gv.innerHTML),pw(),vw(t)}function _w(){return hv}function xw(t){var e=Ig().parentElement.parentElement.parentElement;"ArrowDown"===t?e.nextSibling&&e.nextSibling.childNodes[0].childNodes[0].childNodes[1].dispatchEvent(new Event("click")):"ArrowUp"===t&&e.previousSibling&&e.previousSibling.childNodes[0].childNodes[0].childNodes[1].dispatchEvent(new Event("click"))}function Ew(t){if("ArrowDown"===t)if(null!==Dv){var e=Dv===kv.length-2,n=e?2*Dv+1:2*Dv,r=yv[0].childNodes[0].childNodes[n].nextSibling.nextSibling;if(r){var i=r.childNodes[0].childNodes[0],o=e?i.childNodes[0].innerHTML:i.innerHTML;gv.innerHTML=o}}else gv.innerHTML=yv[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].innerHTML;else if("ArrowUp"===t)if(null!==Dv){var a=yv[0].childNodes[0].childNodes[2*Dv].previousSibling;a&&(gv.innerHTML=a.previousSibling.childNodes[0].childNodes[0].innerHTML)}else gv.innerHTML=yv[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].innerHTML}window.labelTextKeyDown=function(t){"Delete"!==t.key&&("Enter"===t.key?ww():window.setTimeout((function(){"Space"===t.code&&iv(ov(gv).position,gv,!0,Xv),sl&&"Backspace"===t.code&&ev(gv),Av&&(Av.style.backgroundColor="");for(var e=!1,n=0;n<kv.length-1;n+=1)if(kv[n].text===gv.innerHTML){gw(n,2*n),e=!0;break}if(!e){var r=kv.length-1;Dv=null,kv[r].text===gv.innerHTML&&gw(r,2*r+1)}aw(),tw(gv.innerHTML)}),fv))},window.labelBtnClick=function(t){$l()||(Gl()?cc()&&(window.editShapes(),my()):(window.editShapes(),my())),vw((_v=Xh(t)).shapeName,t),pv?(mv?(Gl()?_b():$l()&&Hb(),dw()):(ng(),sb(),_v&&"bndBox"===_v.shapeName&&Kg()),pv=!1):function(t){return Wh[t].shapeRef.visible}(t)?dw():_v&&"bndBox"===_v.shapeName?Kg():(ng(),Gl()?_b():$l()?Hb():(ab(),sb()))},window.labelListScroll=function(){Iv!==Bv.scrollTop&&((!Cv&&Kv()?(Iv=Bv.scrollTop,Cv=!0,nw(),1):Cv&&!Kv()&&(Iv=Bv.scrollTop,Cv=!1,nw(),1))||yv&&yv[0]&&yv[0].classList.contains("show")&&(mw(gv.innerHTML),yw()))},window.mouseEnterLabelDropdownOption=function(t,e){t.style.backgroundColor=e},window.mouseLeaveLabelDropdownOption=function(t,e){if(e){var n=parseInt(t.id.match(/\d+$/)[0],10);Dv!==n&&(t.style.backgroundColor="")}else"used"!==t.id&&(t.style.backgroundColor="")},window.mouseEnterVisibilityBtn=function(t,e){"default"===t?$b(e):Kb(e)},window.mouseLeaveVisibilityBtn=function(t,e){"default"===t?Xb(e):Zb(e)},window.visibilityBtnClick=function(t,e){mv=function(t){return Wh[t].shapeRef.visible=!Wh[t].shapeRef.visible,Wh[t].visibility=!Wh[t].visibility,Wh[t].visibility}(t),tc()&&function(t){k_[t].visible=!k_[t].visible,L_.renderAll()}(t),function(t){k_[t].visibilityButtonActive=!k_[t].visibilityButtonActive}(t),pv=!0,"default"===e.id?(e.id="highlighted",Gl()?_b():$l()&&(pg()&&window.addPoints(),Hb()),Jb(e)):(e.id="default",function(t){t.childNodes[3].style.display="",t.childNodes[7].style.display="none"}(e))},window.mouseEnterLabelEditBtn=function(t){Mv=!hv||t.id==="editButton".concat(bv),hv?Ev.id!==t.id?$b(t):Kb(t):$b(t)},window.mouseLeaveLabelEditBtn=function(t){Mv=!1,hv?Ev.id!==t.id?Xb(t):Zb(t):Xb(t)},window.labelEditBtnClick=function(t,e){t!==bv?(hw(t),Jb(e)):vv?(vv=!1,wv=!0):vv||(hw(t),Jb(e))},window.labelDblClicked=function(t){var e;hv||(lw(t),(e=document.getElementById("editButton".concat(t))).childNodes[1].style.display="none",e.childNodes[5].style.display="",wv=!1)},window.mouseEnterLabel=function(t){var e;sc()||lc()||(Xh(t).MLPallette&&(e=Xh(t),Sy(),e.fill=e.trueFill,e.stroke=e.trueStroke,e.MLPallette=!1),Jh(t))},window.mouseLeaveLabel=function(t){sc()||lc()||Qh(t)};var Ow=null,Iw=null,Sw=null;function Aw(){return{canvas1:Ow,canvas2:Iw}}function Lw(t){var e,n,r;t.__eventListeners&&(t.__eventListeners["mouse:down"]=[],t.__eventListeners["mouse:over"]=[],t.__eventListeners["mouse:out"]=[],t.__eventListeners["mouse:move"]=[],t.__eventListeners["mouse:up"]=[],t.__eventListeners["mouse:wheel"]=[],t.__eventListeners["object:moving"]=[],n=(e=Aw()).canvas1,r=e.canvas2,n&&n.__eventListeners&&n.__eventListeners["object:scaling"]&&n.__eventListeners["object:scaling"].length>1&&n.__eventListeners["object:scaling"].pop(),r&&r.__eventListeners&&r.__eventListeners["object:scaling"].length>1&&r.__eventListeners["object:scaling"].pop())}function kw(t,e,n){!function(t,e,n){Dg=t,Xg=document.getElementById("zoom-overflow"),null!=e&&(Pg=N_(Ug=e),Zg(Ug)),n?(Ug=null,Hg=!0,Wg=!0,Yg=!1,Vg=lb):Vg=Jg,Lc(!1)}(t,e,n),t.on("mouse:down",(function(t){nb(t)})),t.on("mouse:up",(function(t){ib(t)})),t.on("object:moving",(function(t){ob(t)})),t.on("object:scaling",(function(t){(function(t,e,n){if("bndBox"===t.target.shapeName){var r=Dh.boundingBoxOffsetProperties().left,i=mu(),o=i.height,a=i.width,s=ec(),l=n.getPointer(n.e),c=o*s,u=a*s,d=t.target;d.setCoords();var h=!1,f=!1,p=!1,m=!1;d.top<=0?(f=!0,Ng.topLeft?(h=!0,d.top=0,d.height=Sg,d.width<=0?(d.left=kg-1,d.width=1):(d.left=l.x,d.width=kg-l.x),e.left=d.left+r,e.top=d.top,Mg(d)):Ng.topRight?(h=!0,d.height=Sg,d.top=0,d.width<=0?(d.left=Ag,d.width=1):(d.left=Ag,d.width=l.x-Ag),e.left=d.left+r,e.top=d.top,Mg(d)):Ng.middleTop&&(h=!0,d.top=0,d.height=Sg,Mg(d))):Ng.middleTop&&(d.height=Sg-l.y),d.left<=0?(m=!0,Ng.topLeft?(h=!0,f||(d.height<=0?(d.top=Sg-1,d.height=1):(d.top=l.y,d.height=Sg-l.y)),d.left=0,d.width=kg,e.left=d.left+r,e.top=d.top,Mg(d)):Ng.bottomLeft?(h=!0,d.height<=0?(d.top=Lg,d.height=1):(d.top=Lg,d.height=l.y-Lg),d.left=0,d.width=kg,e.left=d.left+r,e.top=d.top,Mg(d)):Ng.middleLeft&&(h=!0,d.left=0,Mg(d),d.width=kg)):Ng.middleLeft&&(d.width=kg-l.x),s>1.00001?(d.width+d.left>u/s-1&&(p=!0,Ng.topRight?(h=!0,f||(d.height<=0?(d.top=Sg-1,d.height=1):(d.top=l.y,d.height=Sg-l.y)),d.width=u/s-d.left-2,d.left=Ag,e.left=d.left+r,e.top=d.top):Ng.bottomRight?(h=!0,d.height<=0?(d.top=Lg,d.height=1):(d.top=Lg,d.height=l.y-Lg),d.width=u/s-d.left-2,d.left=Ag,e.left=d.left+r,e.top=d.top):d.width=u/s-d.left-2),d.height+d.top>c/s-2&&(Ng.bottomRight?(h=!0,p||(d.width<=0?(d.left=Ag,d.width=1):(d.left=Ag,d.width=l.x-Ag)),d.height=c/s-d.top-2,e.left=d.left+r,e.top=d.top):Ng.bottomLeft?(h=!0,m||(d.width<=0?(d.left=kg-1,d.width=1):(d.width=kg-l.x,d.left=l.x)),d.height=c/s-d.top-2,e.left=d.left+r,e.top=d.top):d.height=c/s-d.top-2)):(d.width+d.left>n.width-Tg&&(p=!0,Ng.topRight?(h=!0,f||(d.height<=0?(d.top=Sg-1,d.height=1):(d.top=l.y,d.height=Sg-l.y)),d.width=Math.floor(n.width-d.left-Tg),d.left=Ag,e.left=d.left+r,e.top=d.top):Ng.bottomRight?(h=!0,d.height<=0?(d.top=Lg,d.height=1):(d.top=Lg,d.height=l.y-Lg),d.width=Math.floor(n.width-d.left-Tg),d.left=Ag,e.left=d.left+r,e.top=d.top):d.width=Math.floor(n.width-d.left-Tg)),d.height+d.top>n.height-2&&(Ng.bottomRight?(h=!0,p||(d.width<=0?(d.left=Ag,d.width=1):(d.left=Ag,d.width=l.x-Ag)),d.height=Math.floor(n.height-d.top-2),e.left=d.left+r,e.top=d.top):Ng.bottomLeft?(h=!0,m||(d.width<=0?(d.left=kg-1,d.width=1):(d.width=kg-l.x,d.left=l.x)),d.height=Math.floor(n.height-d.top-2),e.left=d.left+r,e.top=d.top):d.height=n.height-d.top-2)),h||function(t,e,n,r){Ng.topLeft?(t.width<=0?(t.left=kg,t.width=1):(t.left=r.x,t.width=kg-r.x),t.height<=0?(t.top=Sg,t.height=1):(t.top=r.y,t.height=Sg-r.y)):Ng.topRight?(t.width<=0?(t.left=Ag,t.width=1):(t.left=Ag,t.width=r.x-Ag),t.height<=0?(t.top=Sg,t.height=1):(t.top=r.y,t.height=Sg-r.y)):Ng.bottomLeft?(t.width<=0?(t.left=kg,t.width=1):(t.left=r.x,t.width=kg-r.x),t.height<=0?(t.top=Lg,t.height=1):(t.top=Lg,t.height=r.y-Lg)):Ng.bottomRight?(t.width<=0?(t.left=Ag,t.width=1):(t.left=Ag,t.width=r.x-Ag),t.height<=0?(t.top=Lg,t.height=1):(t.top=Lg,t.height=r.y-Lg)):(t.width*=t.scaleX,t.height*=t.scaleY),Mg(t),e.left=t.left+n,e.top=t.top}(d,e,r,l)}})(t,Pg,Dg),$c(!0)})),t.on("mouse:over",(function(t){var e;(e=t).target&&"label"!==e.target.shapeName&&(e.target.MLPallette&&eb(e.target),"point"===e.target.shapeName?Jh($y.id):Jh(e.target.id))})),t.on("mouse:wheel",(function(t){!function(t){if($g&&("point"===t.target.shapeName||"polygon"===t.target.shapeName||"bndBox"===t.target.shapeName)&&ec()>1.00001){var e=document.getElementById("stub").style.marginTop,n=e.substring(0,e.length-2),r=parseInt(n,10),i=Xg.scrollTop+Xg.offsetHeight+t.e.deltaY,o=nc()?cb():cb()/2;Xg.scrollTop+t.e.deltaY<0?function(t){var e=Xg.scrollTop/ec(),n=Dg.getPointer(t.e).y-e;"bndBox"===t.target.shapeName?"scaleY"===t.transform.action?ub(t,n):t.target.top=n-t.transform.offsetY:"polygon"===t.target.shapeName?t.target.top=n-t.transform.offsetY:"point"===t.target.shapeName&&(t.target.top=n)}(t):i>r+o?function(t,e,n){var r=e+n-(Xg.scrollTop+Xg.offsetHeight),i=Dg.getPointer(t.e).y+r/ec();"bndBox"===t.target.shapeName?"scaleY"===t.transform.action?ub(t,i):t.target.top=i-t.transform.offsetY:"polygon"===t.target.shapeName?t.target.top=i-t.transform.offsetY:"point"===t.target.shapeName&&(t.target.top=i)}(t,r,o):function(t){var e=t.e.deltaY/ec(),n=Dg.getPointer(t.e).y+e;if("bndBox"===t.target.shapeName)"scaleY"===t.transform.action?ub(t,n):t.target.top=n-t.transform.offsetY;else if("polygon"===t.target.shapeName)t.target.top=n-t.transform.offsetY;else if("point"===t.target.shapeName){var r=t.e.deltaX/ec();t.target.left=Dg.getPointer(t.e).x+r,t.target.top=n}}(t),ob(t)}}(t)})),t.on("mouse:out",(function(t){t.target&&rb(t)}))}function Tw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var Nw=null,Bw=null,Cw=null,Mw=0,Dw=37,Pw="toolkit-button-default",Fw="toolkit-button-disabled",jw="image-switch-button-enabled";function Rw(t){t.classList.replace(Pw,Fw),t.classList.remove(jw)}function Uw(t){t.classList.replace(Fw,Pw),t.classList.add(jw)}function zw(t){t.defaultCursor="default",Xl()?t.hoverCursor="move":t.hoverCursor="default",t.renderAll()}function Hw(t){t.forEachObject((function(t){"bndBox"!==t.shapeName&&(t.perPixelTargetFind=!0),t.selectable=!0,Xl()?t.hoverCursor="move":t.hoverCursor="default"})),zw(t)}function Vw(t){rg(t),zw(t)}function Ww(t){Xl()?Object.keys(t).forEach((function(e){var n=t[e].shapeRef;"polygon"!==n.shapeName&&"bndBox"!==n.shapeName||(n.lockMovementX=!1,n.lockMovementY=!1,Wl()&&(n.hoverCursor="move"))})):Object.keys(t).forEach((function(e){var n=t[e].shapeRef;"polygon"!==n.shapeName&&"bndBox"!==n.shapeName||(n.lockMovementX=!0,n.lockMovementY=!0,Wl()&&(n.hoverCursor="default"))}))}function Yw(){Xl()?Ec(!1):Ec(!0),Ww(Kh())}var Gw=!1;function $w(){if(!Gw){var t=document.getElementById("canvas-wrapper-parent");t.style.backgroundImage="url('assets/svg/watermark 1.svg')",t.style.backgroundAttachment="fixed",t.style.backgroundPosition="center",t.style.backgroundPositionX="calc((100% - 210px - (59px / var(--screen-size-delta))) / 2 + 70px)",t.style.backgroundSize="500px 220px",t.style.backgroundRepeat="no-repeat",Gw=!0}}var Xw=null,Kw=!1;function Zw(t,e,n,r){setTimeout((function(){0!==r&&Kw?(t.style.backgroundColor=n,Zw(t,n,e,r-1)):function(t){t.style.backgroundColor="",setTimeout((function(){t.style.transitionDuration=""}),700),Xw=null}(t)}),700)}function qw(t,e,n,r,i){t.style.transitionDuration="".concat(.7,"s"),t.style.backgroundColor=i?e:"";var o=i?2*r-1:2*r;i?Zw(t,e,n,o):Zw(t,n,e,o),Xw=t,Kw=!0}var Jw=null,Qw=null,t_=[],e_=0,n_=null,r_=0,i_=!1;function o_(t,e){e_=t,r_=e}function a_(){return t_}function s_(t){var e=c_(t);"init"===Vl()?t_[e].hasChanged=!1:"changed"===Vl()&&(t_[e].hasChanged=!0)}function l_(){for(var t=0;t<t_.length;t+=1)t_[t].hasChanged&&(t_[t].hasChanged=!1);bc("changed")}function c_(t){for(var e=0;e<t_.length;e+=1)if(t===t_[e].name)return e;return null}function u_(t){for(var e=t_.length-1;e>=0;e-=1)if(t===t_[e].name)return e;return null}function d_(){return document.createElement("img")}function h_(){return document.createElement("div")}function f_(t){var e=d_();e.id=r_,e.classList.add("image-list-thumbnail-image"),e.src=t.src,e.setAttribute("draggable",!1),e.setAttribute("ondragstart","return false"),function(t){t.style.transition="".concat(.3,"s"),t.style.maxHeight="0%"}(e);var n=h_();n.classList.add("image-list-thumbnail-color-overlay"),n.classList.add("image-list-thumbnail-default");var r=d_();r.classList.add("image-list-thumbnail-SVG-tick-icon"),r.src="assets/svg/done-tick-highlighted.svg";var i=h_();return i.classList.add("image-list-thumbnail"),i.onclick=window.switchImage.bind(this,r_),i.appendChild(e),i.appendChild(n),i.appendChild(r),Qw.appendChild(i),function(t){setTimeout((function(){t.style.maxHeight="100%",setTimeout((function(){t.style.transition=""}),300)}))}(e),i}function p_(t){var e=t_[void 0!==t?t:e_];e&&e.thumbnailElementRef&&e.thumbnailElementRef.childNodes[2]&&(e.thumbnailElementRef.childNodes[2].style.display="block",e.isLabeled=!0)}function m_(t){var e=t_[t];e&&e.thumbnailElementRef&&e.thumbnailElementRef.childNodes[2]&&(e.thumbnailElementRef.childNodes[2].style.display="none",e.isLabeled=!1)}function y_(t){(function(){var t;Jw&&(Jw.style.display="none",(t=Jw).classList.contains("image-list-thumbnail-machine-learning-selected")&&(t.classList.replace("image-list-thumbnail-machine-learning-selected","image-list-thumbnail-default"),p_()))})(),function(t){t.classList.contains("image-list-thumbnail-machine-learning")&&t.classList.replace("image-list-thumbnail-machine-learning","image-list-thumbnail-machine-learning-selected")}(t),i_&&(t.style.borderColor="#ff4d4d"),t.style.display="block",Jw=t}function g_(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i={data:e,name:t,shapes:{},labels:{},thumbnailElementRef:f_(e),url:n,imgId:r,hasChanged:!1};t_.push(i)}function b_(){var t,e;t_[e_].labels=(t={},Object.keys(k_).forEach((function(e){t[e]=k_[e],L_.remove(k_[e])})),t),t_[e_].shapes=(e={},Object.keys(Wh).forEach((function(t){e[t]=Wh[t],Yh.remove(Wh[t].shapeRef)})),Wh={},e),D_(),Zh();var n=mu(),r={};r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.originalWidth=n.originalWidth,r.originalHeight=n.originalHeight,r.oldImageHeightRatio=eu.height/eu.originalHeight,r.polygonOffsetLeft=Dh.pointOffsetProperties().left,r.polygonOffsetTop=Dh.pointOffsetProperties().top,t_[e_].imageDimensions=r}function v_(t,e){t.imageDimensions={scaleX:1,scaleY:1},t.shapes={},t.labels={},t.size=e.size,t.numberOfMLGeneratedShapes=0,t.analysedByML=!1}function w_(){if(!Wl()&&Kl()){var t=Zl();"polygon"===t?(_p(),np()):"boundingBox"===t?(Ep(),op()):(kw(n_,null,!1),op(),np())}else op(),np();var e;wp(),Bf(e=Jf)&&"toolkit-button-default"===e.classList[1]||(e.classList.replace(e.classList[1],"toolkit-button-default"),e.childNodes[1].style.filter="invert(42%) sepia(0%) saturate(1409%) hue-rotate(134deg) brightness(100%) contrast(77%)",e.style.backgroundColor=""),pp()}function __(t,e){!function(t,e,n,r){var i;Cw.innerHTML=t,(i=Cw.clientWidth-Dw)>Mw&&(Cw.style.minWidth="".concat(i,"px"),Mw=i),1===e.length?(Cw.style.color="black",r?Uw(Nw):(Rw(Nw),Rw(Bw))):e.length>1&&(e.length-1===n?(r?Uw(Nw):Rw(Nw),Uw(Bw)):0===n?(Rw(Bw),Uw(Nw)):(Uw(Nw),Uw(Bw)))}(t,t_,e_,e)}function x_(t,e){var n;y_(t_[r_].thumbnailElementRef.childNodes[1]),function(){t_.length>1?b_():xp(),bw();var t=ay(!1);sy(t_[e_].shapes,t_[e_].labels,t),t_[e_].numberOfMLGeneratedShapes>0&&(Object.keys(t_[e_].shapes).forEach((function(t){var e=t_[e_].shapes[t].shapeRef;e.MLPallette&&(e.fill=e.trueFill,e.stroke=e.trueStroke,e.MLPallette=!1)})),t_[e_].numberOfMLGeneratedShapes=0),e_=r_,Pc(r_)}(),__(t.name,e),function(){if(Gw){var t=document.getElementById("canvas-wrapper-parent");t.style.backgroundImage="",t.style.backgroundAttachment="",t.style.backgroundPosition="",t.style.backgroundPositionX="",t.style.backgroundSize="",t.style.backgroundRepeat="",Gw=!1}}(),w_(),Nl||(qw(document.getElementById("machine-learning-button"),"rgb(184 233 179)","white",5,!0),Nl=!0),yc()&&(n=n_,setTimeout((function(){dd(n),xd(n||Yu)}),16))}function E_(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;g_(t.name,e,r,i),v_(t_[r_],t),(1===t_.length||n)&&x_(t,n),r_+=1}function O_(){Lw(n_),Hw(n_),kw(n_,null,!1),n_&&(n_.getObjects().forEach((function(t){t.lockMovementX=!0,t.lockMovementY=!0})),n_.requestRenderAll())}function I_(t){e_>=0&&b_(),bw();var e,n,r,i,o,a,s,l,c=ay(!0);e=t_[t].data,iu=e,du(),n=t_[t].shapes,r=t_[t].labels,i=t_[t].imageDimensions,o=t_[t].data,i&&i.originalHeight?function(t,e,n){var r=z_(t)/t.oldImageHeightRatio,i={width:r*t.polygonOffsetLeft,height:r*t.polygonOffsetTop};Dh.setPolygonOffsetProperties(i),Object.keys(e).forEach((function(t){!function(t,e,n,r){Of(t.shapeRef,r),U_(t,e,n,r)}(e[t],n[t],t,r)})),F_.renderAll()}(i,n,r):Object.keys(n).length>0&&function(t,e,n){var r={originalHeight:t.height,originalWidth:t.width},i=z_(r),o={width:i,height:i};Dh.setPolygonOffsetProperties(o),Object.keys(e).forEach((function(t){!function(t,e,n,r,i){Of(t.shapeRef,i);var o={scaleX:i,scaleY:i},a={height:r.originalHeight,width:r.originalWidth};Tf(t.shapeRef,o,a),U_(t,e,n,i)}(e[t],n[t],t,r,i)}))}(o,n,r),setTimeout((function(){Du?(ju.style.display="none",Ru.style.display="",ju.style.left="50%",ju.style.top="50%",Du=!1):(ju.style.display="",Ru.style.display="none",Ru.style.left="50%",Ru.style.top="50%",Du=!0),Pu.setViewportTransform([1,0,0,1,0,0]),Pu.clear()}),zu),Uu=Du?Ru:ju,Ww(t_[t].shapes),e_>=0&&sy(t_[e_].shapes,t_[e_].labels,c),Pc(t),y_(t_[t].thumbnailElementRef.childNodes[1]),Ay(t_[t].thumbnailElementRef,Qw),s=(a=Aw()).canvas1,l=a.canvas2,s&&s.__eventListeners&&s.__eventListeners["object:scaling"]&&s.__eventListeners["object:scaling"].length>1&&kw(l,null,!1),__(t_[e_=t].name),O_(),w_(),yc()&&wd(),bc("changed")}function S_(t){bc("image_switch"),"previous"===t?0!==e_&&I_(e_-1):"next"===t?e_!==t_.length-1&&I_(e_+1):t!==e_&&I_(t)}function A_(){if(Qw)for(;Qw.firstChild;)Qw.removeChild(Qw.firstChild);t_.length=0,e_=0,r_=0,Jw=null,i_=!1,D_(),Zh(),O_()}var L_=null,k_={};function T_(t,e){k_[e]=t,s_(document.getElementById("image-name").innerText)}function N_(t){return k_[t]}function B_(t){L_.remove(k_[t]),bc("changed"),s_(document.getElementById("image-name").innerText),delete k_[t]}function C_(t,e){t.labelOffsetLeft=t.left-(e.x-Dh.pointOffsetProperties().left),t.labelOffsetTop=t.top-(e.y-Dh.pointOffsetProperties().top)}function M_(t){Object.keys(k_).forEach((function(e){k_[e].visibilityButtonActive||(k_[e].visible=t)})),L_.renderAll()}function D_(){k_={}}var P_=0,F_=null;function j_(t,e){t.visible=(void 0===e||e)&&tc(),t.setVisibilityButtonActiveFlagById=!1,F_.add(t),F_.bringToFront(t)}function R_(t,e,n,r){var i=Oy(e);t.set("id",P_),t.set("shapeLabelText",i);var o=function(t){var e={};if("bndBox"===t.shapeName)e.left=t.left+Dh.boundingBoxOffsetProperties().left,e.top=t.top;else if("polygon"===t.shapeName){var n=t.points[0].x-Dh.pointOffsetProperties().left,r=t.points[0].y-Dh.pointOffsetProperties().top;e.left=n,e.top=r,C_(t,t.points[0])}return e}(t),a=new(Ys().Text)(i,Dh.getLabelProps(o,t.shapeName));Zd(a.text);var s=Qd(a.text);if(T_(a,P_),n){var l=function(t,e){var n=Gh(t,e);return zh(t),n}(t,s);!function(t,e,n,r){t.shapes[r]=e,t.labels[r]=n}(n,l,a,P_)}else j_(a),$h(t,s,P_),function(t,e,n){var r=$v();r.id="".concat(Hv).concat(e),r.innerHTML=Gv(t,e,n,"default");var i=Ov.insertRow(-1).insertCell(0);i.appendChild(r),Ov.scrollLeft=0,r.childNodes[1].addEventListener("paste",Zv),Yv(),Jv(e),i.scrollIntoView()}(a.text,P_,s.label);!function(t){"polygon"===t.shapeName&&(wp(),fp())}(t),r&&function(t){t.set("isGeneratedViaML",!0),t.set("MLPallette",!0),t.set("trueFill",t.fill),t.set("trueStroke",t.stroke),t.set("fill","rgb(88, 202, 75, 0.3)"),t.set("stroke","rgb(88, 202, 75)")}(t),P_+=1}function U_(t,e,n,r){F_.add(t.shapeRef),Ef(e,r),j_(e,t.visibility),function(t,e){Wh[e]=t}(t,n),T_(e,n);var i=Qd(t.shapeRef.shapeLabelText);!function(t,e,n,r){var i,o=$v();o.id="".concat(Hv).concat(e),i=!0===r?"default":"highlighted",o.innerHTML=Gv(t,e,n,i);var a,s=Ov.insertRow(-1).insertCell(0);s.appendChild(o),o.childNodes[1].addEventListener("paste",Zv),Yv(),a=e,sl?qv(document.getElementById("labelId".concat(a))):Jv(a),s.scrollIntoView()}(t.shapeRef.shapeLabelText,n,i.label,t.visibility)}function z_(t){return F_.height/t.originalHeight}var H_=!1,V_=null,W_=null;function Y_(t,e){var n;(n=e).forEachObject((function(t){t.hoverCursor="default"})),n.defaultCursor="default",V_=t,W_=e,H_=!0}function G_(){W_.remove(V_),H_=!1}function $_(){return H_}var X_=null,K_=!1,Z_=!1,q_={},J_=null,Q_=null,tx=!1,ex=null,nx=0;function rx(){if(K_&&!uc()){var t=X_.getPointer(Q_.e);if(!t.x||!t.y){var e=Mu(),n=X_.getPointer(e);if(!n.x||!n.y)return;t=X_.getPointer(e)}!function(t){if(ec()>1.00001){var e=mu(),n=e.height,r=e.width,i=n*ec(),o=r*ec();t.x>o/ec()-ec()&&(t.x=o/ec()-2),t.y>i/ec()-ec()&&(t.y=i/ec()-1.5)}else t.x>X_.width-nx&&(t.x=X_.width-nx),t.y>X_.height-1.5&&(t.y=X_.height-1.5)}(t),Z_=!0,q_.origX=t.x<0?0:t.x,q_.origY=t.y<0?0:t.y,J_=new(Ys().Rect)(bu.tempBoundingBoxProps(q_)),X_.add(J_),Hc(!0)}}function ix(t){mc()?(Id(X_,t),Kc(!0)):_u(X_)}function ox(){Ep(),Sc(!0),ix(!0),K_=!0,tx=!1,Hc(!1)}function ax(){uc()&&(X_.remove(J_),J_=null,ox(),Z_=!1),Hc(!1),Kc(!1),Tu(),ku=null,bd(X_)}var sx=!1,lx=!1;function cx(t){Xl()||t.set({lockMovementX:!0,lockMovementY:!0,hoverCursor:"default"})}function ux(){if(Z_&&uc()){K_=!1,Z_=!1,J_.setCoords(),J_.set(bu.finalBoundingBoxProps()),cx(J_),tx=!0,Sc(!1),Y_(J_,X_);var t=X_.getPointer(Q_.e);Ch(t.x,t.y),Hc(!1),J_=null,$c(!0)}}function dx(){ex()}function hx(){X_.__eventListeners["mouse:down"]=[],X_.on("mouse:down",(function(){rx()})),ex=ux}function fx(t){nx=t}function px(t){_u(X_=t)}function mx(t){X_=t,K_=!0,tx=!1,ix(),Sc(!0),X_.discardActiveObject(),$l()?(bp(),xc(!1),ex=hx):ex=ux,t.on("mouse:down",(function(){rx()})),t.on("mouse:move",(function(t){!function(t){if(Q_=t,yc()&&hd(t,X_),Z_){var e=X_.getPointer(t.e);if(ec()>1.00001){var n=mu(),r=n.height,i=n.width,o=r*ec(),a=i*ec();q_.origX<e.x&&(e.x>a/ec()-ec()?J_.set({width:a/ec()-q_.origX-2}):sx?(J_.set({left:q_.origX}),J_.set({width:e.x-q_.origX}),sx=!1):J_.set({width:e.x-q_.origX})),q_.origY<e.y&&(e.y>o/ec()-ec()?J_.set({height:o/ec()-q_.origY-1.5}):lx?(J_.set({top:q_.origY}),J_.set({height:e.y-q_.origY-1.5}),lx=!1):J_.set({height:e.y-q_.origY-1.5}))}else q_.origX<e.x&&(e.x>X_.width-nx?J_.set({width:Math.floor(X_.width-q_.origX-nx)}):sx?(J_.set({left:q_.origX}),J_.set({width:e.x-q_.origX+.5}),sx=!1):J_.set({width:e.x-q_.origX+.5})),q_.origY<e.y&&(e.y>X_.height?J_.set({height:X_.height-q_.origY-1.5}):lx?(J_.set({top:q_.origY}),J_.set({height:e.y-q_.origY-1.5}),lx=!1):J_.set({height:e.y-q_.origY-1.5}));q_.origY>e.y&&(e.y<0?(J_.set({top:0}),J_.set({height:q_.origY})):(J_.set({top:e.y}),J_.set({height:q_.origY-e.y}),lx=!0)),q_.origX>e.x&&(e.x<0?(J_.set({left:0}),J_.set({width:q_.origX})):(J_.set({left:e.x}),J_.set({width:q_.origX-e.x}),sx=!0)),X_.renderAll()}}(t)})),t.on("mouse:up",(function(){dx()})),t.on("mouse:wheel",(function(t){!function(t){var e=ec();if(Z_&&e>1.00001){var n=document.getElementById("stub").style.marginTop,r=n.substring(0,n.length-2),i=parseInt(r,10),o=document.getElementById("zoom-overflow"),a=o.scrollTop+o.offsetHeight+t.e.deltaY,s=nc()?4*Qc():2*Qc();o.scrollTop+t.e.deltaY<0?function(t,e){var n=e.scrollTop/ec(),r=X_.getPointer(t.e).y-n;q_.origY>r?J_.set({top:r}):q_.origY<r&&J_.set({top:q_.origY}),J_.set({height:Math.abs(q_.origY-r)})}(t,o):a>i+s?function(t,e,n,r){var i=n+r-(e.scrollTop+e.offsetHeight),o=X_.getPointer(t.e).y+i/ec();q_.origY>o?J_.set({top:o}):q_.origY<o&&J_.set({top:q_.origY}),J_.set({height:Math.abs(q_.origY-o)})}(t,o,i,s):function(t){var e=t.e.deltaY/ec(),n=X_.getPointer(t.e).y+e;q_.origY>n?J_.set({top:n}):q_.origY<n&&J_.set({top:q_.origY}),J_.set({height:Math.abs(q_.origY-n)})}(t),X_.renderAll()}yc()&&e>1.00001&&wd(X_,id)}(t)}))}function yx(t,e){e?function(){if(Fp=!1,zp=!1,Bp.numberOfNullPolygonPoints=0,function(){var t=Bp.get("points"),e=[];t.forEach((function(t){Object.keys(t).length>0&&e.push({x:t.x,y:t.y})})),Bp.set({points:e}),kp.renderAll();var n=0,r=[];kp.forEachObject((function(t){"point"===t.shapeName&&(t.set(cf.changeRemovablePointToTemp(n)),0===n&&t.set(cf.firstPoint()),n+=1,r.push(t))})),Tp=r,Cp=n,kp.renderAll(),e[Tp.length]={x:e[0].x,y:e[0].y},Bp.set({points:e}),kp.renderAll()}(),_u(kp),0!==Tp.length){var t={x:Tp[0].left,y:Tp[0].top};jp=new(Ys().Circle)(cf.invisiblePoint(t)),kp.add(jp)}setTimeout((function(){var t=Mu();Up&&"removed"===Up.state&&(Hp={x:-1,y:-1}),Up=null,Dp=t,$p(kp.getPointer(t))}))}():(Np=!0,Rp=!1,(kp=t).discardActiveObject(),_u(kp),Sc(!0),$l()?(bp(),xc(!1),Mp=nm):Mp=em),t.on("mouse:down",(function(t){tm(t)})),t.on("object:moving",(function(t){!function(t){if(Bp){Af(t.target,kp);var e=t.target.getCenterPoint().x,n=t.target.getCenterPoint().y;Bp.points[t.target.pointId]={x:e,y:n}}}(t)})),t.on("mouse:move",(function(t){var e;zp?Fp=!0:zp=!0,Dp=e=t,$p(kp.getPointer(e.e))})),t.on("mouse:up",(function(){Yp=!1,Mp()})),t.on("mouse:wheel",(function(t){!function(t){if(ec()>1.00001&&(Bp||Yp&&"tempPoint"===t.target.shapeName)){var e=document.getElementById("stub").style.marginTop,n=e.substring(0,e.length-2),r=parseInt(n,10),i=document.getElementById("zoom-overflow"),o=i.scrollTop+i.offsetHeight+t.e.deltaY,a=nc()?im():im()/2;i.scrollTop+t.e.deltaY<0?function(t,e){var n=e.scrollTop/ec(),r=kp.getPointer(t.e).y-n;Yp&&"tempPoint"===t.target.shapeName&&(t.target.top=r,Bp.points[t.target.pointId].y=t.target.top);var i=Bp.get("points");i[Tp.length].y=r,Bp.set({points:i})}(t,i):o>r+a?function(t,e,n,r){var i=n+r-(e.scrollTop+e.offsetHeight),o=kp.getPointer(t.e).y+i/ec();Yp&&"tempPoint"===t.target.shapeName&&(t.target.top=o,Bp.points[t.target.pointId].y=o);var a=Bp.get("points");a[Tp.length]={x:kp.getPointer(t.e).x,y:o},Bp.set({points:a})}(t,i,r,a):function(t){var e=t.e.deltaY/ec(),n=kp.getPointer(t.e).y+e,r=t.e.deltaX/ec();Yp&&"tempPoint"===t.target.shapeName&&(t.target.left=kp.getPointer(t.e).x+r,t.target.top=n,Bp.points[t.target.pointId]={x:t.target.left,y:t.target.top});var i=Bp.get("points");i[Tp.length]={x:kp.getPointer(t.e).x+r,y:n},Bp.set({points:i})}(t);var s=new(Ys().Polygon)(Bp.get("points"),cf.newTempPolygon());Gp(),Bp=s,kp.add(s),s.sendToBack()}}(t)})),t.on("mouse:over",(function(t){var e;(e=t).target&&e.target.selectable&&"invisiblePoint"===e.target.shapeName&&Qp("red")})),t.on("mouse:out",(function(t){!function(t){if(t.target){var e=t.target;"invisiblePoint"===e.shapeName?Qp("#333333"):"tempPoint"===e.shapeName&&"default"===e.hoverCursor&&(e.hoverCursor="move"),Fp||(Pp=t.target),Up=null}}(t)}))}function gx(t){t.discardActiveObject(),Wl()||(Lw(t),$l()?Vw(t):Hw(t),Yl()&&(wp(),wc(!1)),function(t){Kl()?(Lw(t),"polygon"===Zl()?yx(t):"boundingBox"===Zl()&&(mx(t),yc()&&Nu(_d)),vc(!1)):(kw(t,null,$l()),vc(!0),gu()&&(xp(),op(),np()))}(t))}function bx(t){Ub(t),t.on("mouse:down",(function(t){Wb(t)})),t.on("mouse:over",(function(t){var e;(function(t){!function(t){jy&&t.target&&"point"===t.target.shapeName&&(t.target.stroke="green",By.renderAll())}(t)})(e=t),e.target&&"point"===e.target.shapeName&&(Cb=e.target)})),t.on("mouse:move",(function(t){!function(t){if(Ab){var e=Sb.getPointer(t.e);Tb=e,ug(e)}Fb?Db=!0:Fb=!0,Mb=t}(t)})),t.on("object:moving",(function(t){Ab&&dg(t)})),t.on("mouse:up",(function(t){Yb(t)})),t.on("mouse:out",(function(t){!function(t){if(function(t){!function(t){t.target&&"point"===t.target.shapeName&&(t.target.stroke="#333333",By.renderAll())}(t)}(t),t.target){var e=t.target;"point"===e.shapeName?Db||(Pb=e):"tempPoint"===e.shapeName&&"default"===e.hoverCursor&&(e.hoverCursor="move")}Cb=null}(t)})),t.on("mouse:wheel",(function(t){!function(t){if(ec()>1.00001){var e=document.getElementById("stub").style.marginTop,n=e.substring(0,e.length-2),r=parseInt(n,10),i=document.getElementById("zoom-overflow"),o=i.scrollTop+i.offsetHeight+t.e.deltaY,a=nc()?Gb():Gb()/2;i.scrollTop+t.e.deltaY<0?function(t,e){var n=e.scrollTop/ec(),r=Sb.getPointer(t.e).y-n;Nb&&t.target&&"tempPoint"===t.target.shapeName&&(t.target.top=r,dg(t)),ug({x:Sb.getPointer(t.e).x,y:r})}(t,i):o>r+a?function(t,e,n,r){var i=n+r-(e.scrollTop+e.offsetHeight),o=Sb.getPointer(t.e).y+i/ec();Nb&&t.target&&"tempPoint"===t.target.shapeName&&(t.target.top=o,dg(t)),ug({x:Sb.getPointer(t.e).x,y:o})}(t,i,r,a):function(t){var e=t.e.deltaY/ec(),n=Sb.getPointer(t.e).y+e;Nb&&t.target&&"tempPoint"===t.target.shapeName&&(t.target.top=n,dg(t)),ug({x:Sb.getPointer(t.e).x,y:n})}(t)}}(t)}))}var vx=null;function wx(t){var e=t||vx.getActiveObject()||uw();return e&&"bndBox"===e.shapeName?(ef(e.id),B_(e.id),Pg=null,Qv(e.id),ax(),!0):!!uc()&&(ax(),!0)}function _x(){var t;(function(){if(Kl()){if($_())return Rp?(Oh(),G_(),rm()):tx&&(Oh(),G_(),ox()),!0;if(cc())return Gl()&&(vp(),_c(!1)),Jp(),Lw(vx),yx(vx),!0}return!1})()||wx()||(pg()?(Lw(vx),bx(vx),hg(),Ny(vx)):$l()&&hg(),Qv((t=uw(),Ky?(ky(0,$y),$y.id):t&&"polygon"===t.shapeName?(ky(0,t),t.id):null)),ng(),ab(),gp()&&window.editShapes()),a_().length>0&&0===Object.keys(Wh).length&&m_(oc()),fp()}var xx=null,Ex=[];function Ox(t,e,n,r,i){n?(R_(t,e.class,null,r),xx.add(t)):R_(t,e.class,i,r)}function Ix(t,e,n){var r=function(t,e,n,r,i,o){q_.left=t,q_.top=e,q_.width=n,q_.height=r,q_.scaleX=i.scaleX,q_.scaleY=i.scaleY;var a=new(Ys().Rect)(bu.getStandaloneBoundingBoxProperties(q_));return Tf(a,i,o),cx(a),a}(t.bbox[0],t.bbox[1],t.bbox[2],t.bbox[3],e,n);return r}function Sx(t){return t&&t.imageDimensions&&Object.keys(t.imageDimensions).length>0?t.imageDimensions:{scaleX:1,scaleY:1}}function Ax(t){return t&&t.data?{height:t.data.height,width:t.data.width}:{height:1,width:1}}function Lx(t,e){var n=e?Kh():t.shapes;Object.keys(n).forEach((function(t){var r=n[t].shapeRef;r.isGeneratedViaML&&(e?wx(r):delete n[t])})),xx.renderAll(),t.numberOfMLGeneratedShapes=0}function kx(t,e){var n=mu(),r={};r.scaleX=n.scaleX,r.scaleY=n.scaleY,t[e].imageDimensions=r}function Tx(){return{allImageData:a_(),currentlySelectedImageId:oc()}}function Nx(){var t=Tx(),e=t.allImageData,n=t.currentlySelectedImageId;e.forEach((function(t,e){var r;n===e?t.thumbnailElementRef.childNodes[1].classList.replace("image-list-thumbnail-machine-learning-selected","image-list-thumbnail-default"):((r=t.thumbnailElementRef).childNodes[1].classList.replace("image-list-thumbnail-machine-learning","image-list-thumbnail-default"),r.childNodes[1].style.display="none"),0===Object.keys(t.shapes).length&&m_(e)}))}function Bx(){Ex.forEach((function(t){xx.remove(t)})),xx.renderAll()}function Cx(t,e,n){var r=Sx(e),i=Ax(e);if("boundingBox"===t.type){var o=Ix(t.coordinates,r,i);o.annots_id=t.annots_id,Ox(o,t.coordinates,n,!1,e)}else if("polygon"===t.type){var a=function(t,e,n){for(var r=[],i=0;i<t.points.length;i+=2)r.push({x:t.points[i]*e.scaleX,y:t.points[i+1]*e.scaleY});return function(t,e,n){var r=new(Ys().Polygon)(t,cf.newPolygon());return Tf(r,e,n),Xp(r),r}(r,e,n)}(t.coordinates,r,i);a.annots_id=t.annots_id,Ox(a,t.coordinates,n,!1,e)}}function Mx(t,e,n,r){for(var i=0;i<t.length;i+=1)for(var o=e.length-1;o>=0;o-=1)if(t[i].imageName===e[o].name){var a=n===o;if(Cx(t[i],e[o],a),p_(u_(e[o].name)),!r)break}}function Dx(){Hw(xx)}function Px(t,e,n){var r=Tx(),i=r.allImageData,o=r.currentlySelectedImageId;!function(){if(0===Vh().boundingBoxes){var t=Aw().canvas1;Lw(t),kw(t,null,!1)}}(),kx(i,o),e?function(t,e,n,r){px(xx),function(t,e,n,r){Lx(e[n],!0),Object.keys(t).forEach((function(i){Lx(e[i]);var o=e[i],a=Sx(o),s=n===parseInt(i,10),l=Ax(e[i]),c=t[i];c.length>0&&function(t,e,n,r,i,o){n.forEach((function(n){Ox(Ix(n,r,i),n,e,o,t)})),t.numberOfMLGeneratedShapes=n.length}(o,s,c,a,l,r)}))}(t,e,n,r),Bx()}(t,i,o,e):function(t,e,n,r){t.boundingBoxes.length>0&&(px(xx),Mx(t.boundingBoxes,e,n,r)),t.polygons.length>0&&(_u(kp=xx),Mx(t.polygons,e,n,r))}(t,i,o,n),Yv(),Nh(),Dx(),gx(xx),xx&&(xx.getObjects().forEach((function(t){t.lockMovementX=!0,t.lockMovementY=!0})),xx.requestRenderAll())}var Fx=!1,jx=null,Rx=null,Ux=null,zx=null,Hx=null,Vx=null,Wx=null,Yx=null,Gx=null,$x=null,Xx=null,Kx=null,Zx=null,qx=null,Jx=null,Qx=null;function tE(){Jx.style.display="none",Jx.style.color="",Jx.innerHTML=""}function eE(){Xx.style.display="none",Xx.innerHTML="",Wx.style.marginTop=""}function nE(){document.getElementById("machine-learning-modal-initiate-retry-button").style.display="none",zx.style.marginBottom=""}function rE(){Vx.style.display="none",Gx.style.marginRight="",zx.style.marginBottom="",Hx.style.display="none"}function iE(){Gx.style.marginRight="",Gx.style.display=""}function oE(){Gx.style.display="none"}function aE(){Yx.style.display="none"}function sE(){Gx.classList.replace("popup-dimmed-cancel-button","popup-cancel-button"),Gx.removeEventListener("mouseover",sE)}function lE(){zx.style.marginBottom=""}function cE(){Fx&&(Qx.style.zIndex=1,Qx.style.border="",Qx.style.marginTop="",Qx.style.height="",Qx.style.marginRight="",Qx.childNodes[1].style.paddingTop="",$x.innerHTML="",Wx.style.marginTop="",Yx.classList.replace("popup-label-button-disabled","popup-label-button"),Ux.style.height="",lE(),Fx=!1)}function uE(){eE(),nE(),Rx.style.display="none",zx.style.marginBottom="".concat(7/il(),"px"),tE(),""===Kx.style.display&&(Kx.style.display="none",jx.classList.toggle("checkmark")),Wx.style.marginTop="",Wx.style.display="none",zx.style.marginBottom=""}function dE(){lE(),zx.innerHTML="\n    ".concat(el("ML_MODAL_DESCRIPTION_PAR_1"),'\n    <div class="upload-datasets-modal-description-break"></div>\n    ').concat(el("ML_MODAL_DESCRIPTION_PAR_2"),'\n    <div class="upload-datasets-modal-description-break"></div>\n    ').concat(el("ML_MODAL_DESCRIPTION_PAR_3")),zx.style.display="",Yx.style.display="",iE(),Wx.style.marginTop="".concat(-4/il(),"px"),Wx.style.display="",rE()}var hE=[$a,Xa,Ka,Za,qa],fE=$a,pE=fE,mE=!1;function yE(t){mE=t}function gE(){return mE}function bE(t){return bE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bE(t)}function vE(){vE=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==bE(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(bE(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function wE(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var _E=null;function xE(t){for(var e=0;e<t.length;e+=1)if(!t[e].alreadyUploaded){var n=t[e].body,r=n.fileMetaData,i=n.imageElement,o=0===e;E_(r,i,o),cE(),o&&fu(i)}}function EE(){return OE.apply(this,arguments)}function OE(){var t;return t=vE().mark((function t(){var e,n,r;return vE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=_E(),n=e.images,r=e.shapes,xE(n),setTimeout((function(){Px(r,!1,gE())}),0);case 3:case"end":return t.stop()}}),t)})),OE=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){wE(o,r,i,a,s,"next",t)}function s(t){wE(o,r,i,a,s,"throw",t)}a(void 0)}))},OE.apply(this,arguments)}function IE(t){_E=t}function SE(t){return SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SE(t)}function AE(){AE=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==SE(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(SE(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function LE(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function kE(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function TE(t,e,n,r){var i={type:null,coordinates:{},imageName:n,annots_id:null};i.annots_id=t.annots_id;for(var o=e[za].body.annotationData.categories,a=0;a<o.length;a+=1)if(t.category_id===o[a].id){i.coordinates.class=o[a].name.toString();break}!function(t,e){if(8===t.length){var n=(l=4,function(t){if(Array.isArray(t))return t}(s=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(s,l)||function(t,e){if(t){if("string"==typeof t)return kE(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kE(t,e):void 0}}(s,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],o=n[2],a=n[3];if(t[0]===r&&t[1]===i&&t[2]===r+o&&t[3]===i&&t[4]===r+o&&t[5]===i+a&&t[6]===r&&t[7]===i+a)return!0}var s,l;return!1}(t.segmentation[0],t.bbox)?(i.coordinates.points=t.segmentation[0],i.type="polygon",r.polygons.push(i)):(i.coordinates.bbox=t.bbox,i.type="boundingBox",r.boundingBoxes.push(i))}function NE(t,e,n,r,i){for(var o=0;o<e.length;o+=1)t===e[o].image_id&&TE(e[o],r,i,n)}function BE(){var t,e,n={images:[],shapes:[]},r=Bs.getDatasetObject();return n.images=(t=r[Ga],e=[],Object.keys(t).forEach((function(n){t[n].error||e.push(t[n])})),e),n.shapes=function(t,e){var n={boundingBoxes:[],polygons:[]},r=t[za].body.annotationData,i=r.annotations,o=r.images;return e.forEach((function(e){for(var r=0;r<o.length;r+=1){var a=e.body.fileMetaData.name;a===o[r].file_name&&NE(o[r].id,i,n,t,a)}})),n}(r,n.images),n}function CE(){var t;return t=AE().mark((function t(){var e,n,r,i,o,a,s,l,c,u,d,h,f,p,m,y=arguments;return AE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e=y.length>0&&void 0!==y[0]?y[0]:{}).endpoint,r=void 0===n?"":n,i=e.payload,o=void 0===i?{}:i,a=e.method,s=void 0===a?"POST":a,l=e.token,c=void 0===l?localStorage.getItem("token"):l,u=e.annotationFileName,d=void 0===u?"remoteTaskCOCO.json":u,h=e.fetchImages,f=void 0===h||h,t.prev=2,t.next=5,Ba(r,o,s,c);case 5:if(p=t.sent,console.log("=====: API Response :=======",p),m=null,p&&p.data){t.next=12;break}return Ma.hide(),localStorage.setItem("opType","create"),t.abrupt("return");case 12:if(localStorage.setItem("opType","edit"),m=p.data&&(p.data.images||p.data.annotations)?p.data:p.data||null){t.next=16;break}throw new Error("COCO dataset not found in API response");case 16:return t.next=18,Vs(m,{annotationFileName:d,fetchImages:f});case 18:return Ma.show("Preparing Data to Draw..","loading"),IE(BE),e_=0,r_=1,Pc(0),Ma.show("Drawing..","loading"),t.next=25,EE();case 25:window.switchImage(0),Ma.show("Finished"),setTimeout((function(){Ma.hide()}),200),t.next=34;break;case 30:throw t.prev=30,t.t0=t.catch(2),console.error("Failed to load/ inject COCO dataset:",t.t0),t.t0;case 34:case"end":return t.stop()}}),t,null,[[2,30]])})),CE=function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){LE(o,r,i,a,s,"next",t)}function s(t){LE(o,r,i,a,s,"throw",t)}a(void 0)}))},CE.apply(this,arguments)}const ME=function(){return CE.apply(this,arguments)};var DE=null;function PE(){DE.style.display="none",Yc(!1),Md(Sd),yc()&&Nu(_d)}var FE=!1;function jE(){return FE}function RE(){this.removeImageCallback(),PE()}function UE(){PE()}function zE(){var t;t=!jE(),FE=t}var HE=null;function VE(t){var e=t||a_(),n=oc();document.getElementById(n).parentElement.remove(),function(){for(var t=document.getElementById("image-list-image-container").childNodes,e=0;e<t.length;e+=1)t[e].childNodes[0].id=e,t[e].onclick=window.switchImage.bind(this,e)}();var r,i=e.length;e.splice(n,1),D_(),r=Kh(),Object.keys(r).forEach((function(t){Hh(r[t].shapeRef)})),Zh(),gp(),function(t,e,n){if(t<e.length){var r=t-(n-e.length)+1;o_(-1,e.length),window.switchImage(r)}else e.length>0?(o_(-1,e.length),window.switchImage(e.length-1)):function(){ay(!1),o_(0,0);var t=!!Kl()&&Zl;window.editShapes(),t&&vc(!1),Cw.innerHTML="Image name",Cw.style.color="",bw(),$w(),rp(),ap(),sp(),ep(),mp(),HE.clear(),HE.setDimensions({width:1,height:1}),iu=null}()}(n,e,i),bc("changed")}function WE(){var t=a_();t.length>0&&(jE()?VE(t):(Pd(Ld,kd),DE.style.display="block",Yc(!0)))}const YE=function(){var t=null,e=null,n=null,r=null;function i(){r||((r=document.createElement("style")).textContent="\n      .upload-toast {\n        position: fixed;\n        bottom: 20px;\n        right: 20px;\n        background: #323232;\n        color: #fff;\n        padding: 16px 20px;\n        border-radius: 8px;\n        box-shadow: 0 2px 20px rgba(0,0,0,0.2);\n        font-size: 14px;\n        min-width: 220px;\n        max-width: 300px;\n        opacity: 0;\n        transition: opacity 0.3s ease;\n        z-index: 9999;\n      }\n\n      .upload-toast.show {\n        opacity: 1;\n      }\n\n      .upload-toast .message {\n        margin-bottom: 8px;\n      }\n\n      .upload-toast .bar {\n        height: 4px;\n        width: 100%;\n        background: rgba(255, 255, 255, 0.2);\n        border-radius: 2px;\n        overflow: hidden;\n      }\n\n      .upload-toast .bar-fill {\n        height: 100%;\n        background: #4caf50;\n        width: 0%;\n        transition: width 0.3s ease;\n      }\n    ",document.head.appendChild(r)),(t=document.createElement("div")).className="upload-toast",(n=document.createElement("div")).className="message",t.appendChild(n),(e=document.createElement("div")).className="bar";var i=document.createElement("div");i.className="bar-fill",e.appendChild(i),t.appendChild(e),document.body.appendChild(t)}function o(e){t||i(),n.textContent=e,t.classList.add("show")}return{show:o,hide:function(){t&&setTimeout((function(){t.classList.remove("show")}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3)},update:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"data";t||i();var a=r.charAt(0).toUpperCase()+r.slice(1);o("Loading ".concat(a," ").concat(e," of ").concat(n,"..."));var s=Math.round(e/n*100);t.querySelector(".bar-fill").style.width="".concat(s,"%")},destroy:function(){t&&(t.remove(),t=null),r&&(r.remove(),r=null)}}}();function GE(t){return GE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GE(t)}function $E(){$E=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==GE(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(GE(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function XE(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function KE(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){XE(o,r,i,a,s,"next",t)}function s(t){XE(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ZE(t){return function(t){return t.type.includes("image/")}(t)&&null===c_(t.name)}function qE(t,e,n){var r=new Image;r.src=n.target.result,e&&(r.onload=fu),E_(t,r,e),cE()}function JE(t){for(var e=0;e<t.files.length;e+=1)if(ZE(t.files[e])){var n=new FileReader,r=0===e;n.onload=qE.bind(this,t.files[e],r),n.readAsDataURL(t.files[e])}}function QE(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new Image;i.src=e.target.result,i.onload=fu,function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;g_(t.name,e,n,r),v_(t_[r_],t),x_(t,!1),r_+=1}(t,i,n,r),cE()}function tO(t){if(ZE(t.files[0])){var e=new FileReader;e.onload=QE.bind(this,t.files[0]),e.readAsDataURL(t.files[0])}}function eO(t){return nO.apply(this,arguments)}function nO(){return(nO=KE($E().mark((function t(e){return $E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.files&&e.files.length>0&&(1===e.files.length?tO(e):JE(e));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rO(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(ZE(t)){var r=new FileReader;r.onload=function(r){QE(t,r,e,n)},r.readAsDataURL(t)}}function iO(t){for(var e=function(e){if(ZE(t[e].file)){var n=new FileReader,r=0===e;n.onload=function(n){!function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=new Image;o.src=n.target.result,e&&(o.onload=fu),E_(t,o,e,r,i),cE()}(t[e].file,r,n,t[e].url,t[e].imageId)},n.readAsDataURL(t[e].file)}},n=0;n<t.length;n+=1)e(n)}function oO(){return aO.apply(this,arguments)}function aO(){return aO=KE($E().mark((function t(){var e,n,r,i,o,a,s,l,c,u,d,h,f;return $E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,A_(),e=localStorage.getItem("token"),n=localStorage.getItem("taskId"),r=encodeURIComponent(parseInt(n,10)),t.next=7,Ba("tasks/getTaskWithItems/".concat(r),{},"POST",e);case 7:if(200!==(i=t.sent).status_code||!i.data){t.next=22;break}return localStorage.setItem("client_id",i.data.client_id||""),localStorage.setItem("assigned_to",i.data.assigned_to||""),o=i.data.task_items,a=o.length,s=0,l=o.map(function(){var t=KE($E().mark((function t(e,n){var r,i,o,l;return $E().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.img_url);case 2:return r=t.sent,t.next=5,r.blob();case 5:return i=t.sent,o=e.img_url.split("/").pop()||"image_".concat(n,".jpg"),s+=1,YE.update(s,a,"images"),l=new File([i],o,{type:i.type}),t.abrupt("return",{file:l,url:e.img_url,imageId:e.img_id});case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),t.next=17,Promise.all(l);case 17:c=t.sent,YE.hide(),1===c.length?(u=c[0],d=u.file,h=u.url,f=u.imageId,rO(d,h,f)):iO(c),t.next=23;break;case 22:console.error("Failed to fetch remote image(s):",i);case 23:t.next=30;break;case 25:t.prev=25,t.t0=t.catch(0),console.error("Error fetching remote image(s):",t.t0),YE.show("Upload failed."),YE.hide(3e3);case 30:case"end":return t.stop()}}),t,null,[[0,25]])}))),aO.apply(this,arguments)}function sO(){return ac()||dc()||hc()||fc()||pc()}var lO=null,cO=null,uO=null,dO=null;function hO(){cO.style.display="none",lO.style.display="none",uO.style.display="none"}function fO(t){hO(),t()}function pO(t){window.moveToSelectFormatView=fO.bind(this,t)}var mO=null,yO=null,gO=null,bO=null,vO=null,wO=null,_O=!1,xO=!1,EO=!1,OO=null,IO="popup-proceed-button",SO="popup-label-button",AO="popup-label-button-disabled";function LO(){var t;bO.style.display="",t=5,gO.style.marginTop="".concat(t/il()-rl,"px"),yO.style.display="",EO||(hE.forEach((function(t,e){vO.insertRow(-1).innerHTML=function(t,e){var n=2===e?5/il():3/il();return'\n    <td style="padding-top: '.concat(n,'px" class="data-format-table-row-data">\n      <div class="checkbox-text format-option-text upload-data-format-row-text">\n        ').concat(t,'\n      </div>\n      <input class="checkbox upload-datasets-format-checkbox" type="checkbox" name="something" onclick="selectUploadDatasetsFormat(\'').concat(t,"', this)\">\n    </td>\n  ")}(t,e)})),EO=!0),wO.style.display=""}function kO(){bO.style.display="none",mO.style.display="none",gO.style.marginTop="",yO.style.display="none",wO.style.display="none"}function TO(t){kO(),t()}function NO(t,e){var n,r;r=e,_O?r===OO?(_O=!1,bO.classList.remove(IO),bO.classList.replace(SO,AO),xO=!1):(OO.checked=!1,OO=r):(OO=r,xO||(bO.classList.add(IO),bO.classList.replace(AO,SO),xO=!0),_O=!0),pE=pE===(n=t)?fE:n}function BO(t){window.moveToUploadDatasetsView=TO.bind(this,t),window.selectUploadDatasetsFormat=NO}var CO=null,MO=null,DO=null,PO=null,FO=null,jO=null,RO=null,UO=null,zO=null,HO=null,VO=null,WO=null,YO=null,GO=null,$O=null,XO=null,KO=null,ZO=null,qO=0,JO=rs,QO=!1,tI="upload-datasets-modal-upload-datasets-table-row-popover-left",eI="upload-datasets-modal-upload-datasets-table-row-popover-arrow-left",nI="upload-datasets-modal-upload-datasets-table-row-popover-right",rI="upload-datasets-modal-upload-datasets-table-row-popover-arrow-right",iI="upload-datasets-modal-upload-datasets-two-table-strategy-section",oI="upload-datasets-modal-upload-datasets-three-table-strategy-section",aI="error-popover-color-theme",sI="upload-datasets-modal-upload-datasets-table-error-row-popover-arrow",lI="information-popover-color-theme",cI="upload-datasets-modal-upload-datasets-table-information-row-popover-arrow",uI="upload-datasets-modal-upload-datasets-table-row-text-error",dI="popup-proceed-button",hI="popup-label-button",fI="popup-label-button-disabled",pI=null,mI=null;function yI(t,e){return'\n    <div class="upload-datasets-modal-upload-datasets-table-row">\n        <div onmouseenter="displayActiveRemoveFileIcon(this)" onmouseleave="displayDefaultRemoveFileIcon(this)" onclick="removeFileFromUploadDatasetFiles(\''.concat(t,"', '").concat(e,'\')">\n          <img src="assets/svg/x-icon-default.svg" class="upload-datasets-modal-remove-file-button"  alt="remove">\n          <img src="assets/svg/x-icon-active.svg" style="display: none" class="upload-datasets-modal-remove-file-button" alt="remove">\n        </div>\n      <div class="upload-datasets-modal-upload-datasets-table-row-text">').concat(t,"</div>\n    </div>\n  ")}function gI(t,e,n,r,i,o,a,s,l){return'\n    <div id="upload-datasets-modal-file-popover-'.concat(o,'" class="popover upload-datasets-modal-upload-datasets-table-row-popover ').concat(a," ").concat(n,'">').concat(e,'</div>\n    <div id="upload-datasets-modal-file-popover-arrow-').concat(o,'" ').concat(function(t){return JO===rs&&t===Ra?'style="margin-left: '.concat(149.5/il(),'px;"'):JO===is&&t===ja?'style="margin-left: '.concat(147/il(),'px;"'):""}(i),' class="arrow ').concat(s," ").concat(r,'"></div>\n    <div class="upload-datasets-modal-upload-datasets-table-row">\n        <div onmouseenter="displayActiveRemoveFileIcon(this)" onmouseleave="displayDefaultRemoveFileIcon(this)" onclick="removeFileFromUploadDatasetFiles(\'').concat(t,"', '").concat(i,'\')">\n          <img src="assets/svg/x-icon-default.svg" class="upload-datasets-modal-remove-file-button" alt="remove">\n          <img src="assets/svg/x-icon-active.svg" style="display: none" class="upload-datasets-modal-remove-file-button" alt="remove">\n        </div>\n        <div class="upload-datasets-modal-upload-datasets-table-row-text ').concat(l,'" onmouseenter="displayUploadDatasetsAnnotationFilePopover(').concat(o,", '").concat(i,'\')" onmouseleave="removeUploadDatasetsAnnotationFilePopover(').concat(qO,')">').concat(t,"</div>\n    </div>\n  ")}function bI(t,e){return"upload-datasets-modal-upload-datasets-table-row-popover"===t.childNodes[e].childNodes[0].childNodes[1].classList[1]?{fileName:t.childNodes[e].childNodes[0].childNodes[5].childNodes[3].innerHTML,currentRowHasError:!0}:{fileName:t.childNodes[e].childNodes[0].childNodes[1].childNodes[3].innerHTML,currentRowHasError:!1}}function vI(t,e){for(var n=function(t){switch(t){case Ra:return WO;case Ua:return jO;case ja:return RO;default:return WO}}(e),r=n.childNodes[1],i=0;i<r.childNodes.length;i+=1)if(t===bI(r,i).fileName)return r.childNodes[i].remove(),!0;return!1}function wI(t){switch(t){case"upload-datasets-modal-upload-datasets-annotations-table":default:return Ra;case"upload-datasets-modal-upload-datasets-images-table":return Ua;case"upload-datasets-modal-upload-datasets-classes-table":return ja}}function _I(t,e,n,r,i){for(var o=n.childNodes[1],a=0;a<o.childNodes.length;a+=1){var s=bI(o,a),l=s.fileName,c=s.currentRowHasError;if(t===l){var u=wI(n.id),d=o.childNodes[a].childNodes[0];return e.error?(d.innerHTML=gI(t,e.message,r,i,u,qO+=1,aI,sI,uI),u===Ua&&(GO=!1)):e.information?d.innerHTML=gI(t,e.message,r,i,u,qO+=1,lI,cI,""):c&&!e.error&&(d.innerHTML=yI(t,u)),d.scrollIntoView(),!0}}return!1}function xI(t,e){var n,r,i;if(e.error?(n=aI,r=sI,i=uI):(e.information=!0,e.message=el("DIFFERENT_TABLE_INFO"),n=lI,r=cI,i=""),!_I(t,e,RO,tI,eI)){var o=RO.insertRow(-1).insertCell(0);o.innerHTML=gI(t,e.message,tI,eI,ja,qO+=1,n,r,i),o.scrollIntoView()}}function EI(t,e){if(!_I(t,e,jO,nI,rI)){var n=jO.insertRow(-1).insertCell(0);e.error?(n.innerHTML=gI(t,e.message,nI,rI,Ua,qO+=1,aI,sI,uI),GO=!1):n.innerHTML=yI(t,Ua),n.scrollIntoView()}}function OI(){if(!GO)for(var t=jO.childNodes[1],e=0;e<t.childNodes.length;e+=1){var n=t.childNodes[e].childNodes[0],r=bI(t,e).fileName;n.innerHTML=yI(r,Ua),n.scrollIntoView()}GO=!0}function II(t){for(var e=WO.childNodes[1],n=0;n<e.childNodes.length;n+=1){var r=e.childNodes[n].childNodes[0];t===bI(e,n).fileName&&(r.innerHTML=yI(t,Ra),r.scrollIntoView())}}function SI(t,e){if(!_I(t,e,WO,pI,mI)){var n=WO.insertRow(-1).insertCell(0);e.error?n.innerHTML=gI(t,e.message,pI,mI,Ra,qO+=1,aI,sI,uI):n.innerHTML=yI(t,Ra),n.scrollIntoView()}}function AI(t){var e=document.createElement("tbody");t.childNodes[1]&&t.replaceChild(e,t.childNodes[1])}function LI(){QO||(UO.classList.add(dI),UO.classList.replace(fI,hI),QO=!0)}function kI(){UO.classList.remove(dI),UO.classList.replace(hI,fI),QO=!1}function TI(){HO.style.display=""}function NI(t,e){YO.style.width="".concat(t/il(),"px"),YO.style.height="".concat(e/il(),"px")}function BI(t,e,n,r){var i,o;CO.style.marginTop="".concat(9/il(),"px"),i=t,CO.innerHTML=i,o=n,VO.innerHTML="".concat(el("ANNOTATIONS")," (").concat(o,")"),function(t){XO.accept=t}(e),FO.style.display="",UO.style.display="",function(t){zO.style.marginTop=t}(sl?"1px":"".concat(272/il(),"px")),function(t){t===is?(MO.style.display="",TI(),NI(977,390),DO.classList.replace(iI,oI),PO.classList.replace(iI,oI),pI="upload-datasets-modal-upload-datasets-table-row-popover-center",mI="upload-datasets-modal-upload-datasets-table-row-popover-arrow-center"):(TI(),NI(678,390),pI=tI,mI=eI),JO=t}(r),KO.style.display=""}function CI(){JO===is&&(MO.style.display="none",DO.classList.replace(oI,iI),PO.classList.replace(oI,iI),JO=rs),FO.style.display="none",HO.style.display="none",UO.style.display="none",kI(),CO.style.marginTop="",zO.style.marginTop="",KO.style.display="none",YO.style.width="",YO.style.height="",AI(WO),AI(jO),AI(RO),qO=0}function MI(t){var e={};if(1===t.nodeType){if(t.attributes.length>0){e["@attributes"]={};for(var n=0;n<t.attributes.length;n+=1){var r=t.attributes.item(n);e["@attributes"][r.nodeName]=r.nodeValue}}}else 3===t.nodeType&&(e=t.nodeValue);if(t.hasChildNodes())for(var i=0;i<t.childNodes.length;i+=1){var o=t.childNodes.item(i),a=o.nodeName;if(void 0===e[a])e[a]=MI(o);else{if(void 0===e[a].push){var s=e[a];e[a]=[],e[a].push(s)}e[a].push(MI(o))}}return e}function DI(t,e){try{var n=MI((new DOMParser).parseFromString(e.target.result,"application/xml"));return{fileFormat:Da,body:{fileMetaData:t,annotationData:n}}}catch(e){return{fileFormat:Da,body:{fileMetaData:t},errorObj:{error:!0,message:"".concat(el("INVALID")," XML - ").concat(e)}}}}function PI(t,e){return t.type.startsWith("image/")?function(t,e){var n=new Image;return n.src=e.target.result,{fileFormat:Fa,body:{fileMetaData:t,imageElement:n}}}(t,e):t.name.endsWith(".json")?function(t,e){try{var n=JSON.parse(e.target.result);return{fileFormat:Da,body:{fileMetaData:t,annotationData:n}}}catch(e){return{fileFormat:Da,body:{fileMetaData:t},errorObj:{error:!0,message:"".concat(el("INVALID")," JSON - ").concat(e)}}}}(t,e):t.name.endsWith(".csv")?function(t,e){try{var n=e.target.result.split(/\r\n|\n/),r=[];return n.forEach((function(t){var e=t.split(",").filter((function(t){return""!==t.trim()}));e.length>0&&r.push(e)})),8===r[0].length&&function(t){for(var e=0;e<t.length;e+=1)if(!Number.isNaN(parseInt(t[e],10)))return!1;return!0}(r[0])&&r.shift(),{fileFormat:Da,body:{fileMetaData:t,annotationData:r}}}catch(e){return{fileFormat:Da,body:{fileMetaData:t},errorObj:{error:!0,message:"".concat(el("INVALID")," CSV - ").concat(e)}}}}(t,e):t.name.endsWith(".xml")?DI(t,e):t.name.endsWith(".txt")?function(t,e){try{return function(t,e){var n=t.split("\n"),r=!0,i=!0,o=[];return n.forEach((function(t){var e=t.split(" ").filter((function(t){return""!==t.trim()})).map((function(t){var e=Number.parseFloat(t,10);return Number.isNaN(e)?t:e}));e.length>0&&(r=!1,5!==e.length&&(i=!1),o.push(e))})),r?{fileFormat:Da,body:{fileMetaData:e},errorObj:{error:!0,message:el("TXT_FILE_EMPTY"),parsingError:!0}}:{fileFormat:i?Da:Pa,body:{fileMetaData:e,annotationData:o}}}(e.target.result,t)}catch(e){return{fileFormat:Da,body:{fileMetaData:t},errorObj:{error:!0,message:"".concat(el("TXT_FILE_INVALID")," - ").concat(e),parsingError:!0}}}}(t,e):{}}window.displayUploadDatasetsAnnotationFilePopover=function(t,e){var n=e===Ra?ZO:$O;document.getElementById("upload-datasets-modal-file-popover-".concat(t)).style.display="block",document.getElementById("upload-datasets-modal-file-popover-".concat(t)).style.marginTop="-".concat(n.scrollTop+29.4/il(),"px"),document.getElementById("upload-datasets-modal-file-popover-arrow-".concat(t)).style.display="block",document.getElementById("upload-datasets-modal-file-popover-arrow-".concat(t)).style.marginTop="-".concat(n.scrollTop+4/il(),"px")},window.removeUploadDatasetsAnnotationFilePopover=function(t){document.getElementById("upload-datasets-modal-file-popover-".concat(t)).style.display="none",document.getElementById("upload-datasets-modal-file-popover-arrow-".concat(t)).style.display="none"},window.displayActiveRemoveFileIcon=function(t){t.childNodes[1].style.display="none",t.childNodes[3].style.display=""},window.displayDefaultRemoveFileIcon=function(t){t.childNodes[1].style.display="",t.childNodes[3].style.display="none"};var FI=null,jI=null,RI=null;function UI(t,e){var n=PI(t,e),r=n.errorObj;r=RI(n,r),FI(n,r),jI(n,r)}function zI(t,e){e.name.endsWith(".json")||e.name.endsWith(".csv")||e.name.endsWith(".xml")||e.name.endsWith(".txt")?t.readAsText(e):t.readAsDataURL(e)}function HI(t,e){if(t.files&&t.files.length>0)for(var n=0;n<t.files.length;n+=1)if(i=t.files[n],o=void 0,a=void 0,o=i.name.split("."),a=o[o.length-1],XO.accept.includes(a)||i.type.includes("image/")){var r=new FileReader;r.onload=UI.bind(this,t.files[n]),zI(r,t.files[n])}var i,o,a;e.target.value=""}function VI(t){RI=t}function WI(t){jI=t}function YI(t){FI=t}function GI(){document.getElementById("upload-datasets-modal-upload-datasets-upload-trigger").click()}function $I(t,e,n){t(e,n)}function XI(t,e){EE(),CI(),e(),t(!1)}function KI(t,e){CI(),e(),t()}function ZI(t,e,n,r){window.triggerUploadDatasetFiles=GI,window.uploadDatasetFilesHandler=HI,window.drawShapesAndImages=XI.bind(this,t,n),window.removeFileFromUploadDatasetFiles=$I.bind(this,e),window.goBackToSelectFormatView=KI.bind(this,r,n)}var qI=null,JI=null,QI=null,tS=null;function eS(){QI.style.textAlign="",QI.style.marginTop="",QI.style.display="none",qI.style.display="none",JI.style.display="none",tS.style.marginTop=""}function nS(t,e){yE(e),eS(),t()}function rS(t){window.reuseAlreadyExistingImages=nS.bind(this,t)}function iS(t,e,n){var r=!1;Object.keys(t[Ga]).forEach((function(i){var o=t[Ga][i],a=n(o);a.error||(r=!0);var s=o.body.fileMetaData.name;EI(s,a),e(s,a.error)})),r?LI():kI()}function oS(t,e,n,r,i){SI(t,function(t,e,n,r){var i=e[za],o=e[Ha];return t.error?o.length>0?(i&&i.newlyActive&&(II(i.body.fileMetaData.name),i.newlyActive=!1,iS(e,n,r)),{error:!0,message:t.message}):(OI(),t):(function(t,e){t.forEach((function(t){var n=e(t),r=t.body.fileMetaData.name;n.error||(n.error=!0,n.message=el("ONE_ANNOTATION_FILE_ALLOWED_ERROR_MESSAGE")),SI(r,n)}))}(o,r),iS(e,n,r),t)}(e,n,r,i))}function aS(t,e,n,r,i){!function(t,e,n){if(t[Ha].length>0){var r=!1;Object.keys(t[Ga]).forEach((function(i){var o=t[Ga][i],a=n(o);a.error||(r=!0);var s=o.body.fileMetaData.name;EI(s,a),e(s,a.error)})),r?LI():kI()}else OI(),kI()}(n,r,i),SI(t,e)}function sS(t,e){if(t.body){var n=t.body.fileMetaData.name,r=this.datasetObjectManager.getDatasetObject();t.fileFormat===Fa&&(EI(n,e),e.valid&&LI()),t.fileFormat===Da&&this.updateAnnotationTableFunc(n,e,r,this.datasetObjectManager.updateImageFileErrorStatus,this.validateFormat)}}var lS=function(t,e){var n=oS;return sS.bind({datasetObjectManager:t,validateFormat:e,updateAnnotationTableFunc:n})},cS=function(t,e){var n=aS;return sS.bind({datasetObjectManager:t,validateFormat:e,updateAnnotationTableFunc:n})};function uS(t){return uS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uS(t)}function dS(t,e,n){switch(t){case"number":return function(t,e){switch(e){case ns:return!Number.isNaN(Number.parseInt(t,10))&&"number"==typeof Number.parseInt(t,10);case es:return!Number.isNaN(t)&&"number"==typeof t;case ts:return!Number.isNaN(parseInt(t["#text"],10));default:return"number"==typeof t}}(e,n);case"string":return function(t,e){return e===ts?"string"==typeof t["#text"]:"string"==typeof t}(e,n);case"number|string":return function(t,e){return e===ts?"string"==typeof t["#text"]||!Number.isNaN(parseInt(t["#text"],10)):"string"==typeof t||"number"==typeof t}(e,n);case"object":return"object"===uS(e);case"array":return Array.isArray(e);case"array:number":return Array.isArray(e)&&0===e.filter((function(t){return"number"!=typeof t})).length;case"array:object":return Array.isArray(e)&&0===e.filter((function(t){return"object"!==uS(t)})).length;default:return!0}}function hS(t,e,n,r){var i=r.elementsType,o=r.length,a=r.maxLength,s=r.minLength,l=r.evenOdd;return o&&t.length!==o?{error:!0,message:"".concat(e," ").concat(el("SHARED_ARRAY_CONTAIN")).concat(o).concat(el("SHARED_ELEMENTS_BUT_FOUND_1")).concat(t.length).concat(el("SHARED_ELEMENTS_BUT_FOUND_2"))}:a&&t.length>a?{error:!0,message:"".concat(e," ").concat(el("SHARED_ELEMENTS_BUT_FOUND_AT_MOST_0")).concat(a).concat(el("SHARED_ELEMENTS_BUT_FOUND_AT_MOST_1")).concat(t.length).concat(el("SHARED_ELEMENTS_BUT_FOUND_2"))}:s&&t.length<s?{error:!0,message:"".concat(e," ").concat(el("SHARED_ARRAY_CONTAIN_AT_LEAST")).concat(s).concat(el("SHARED_ELEMENTS_BUT_FOUND_1")).concat(t.length).concat(el("SHARED_ELEMENTS_BUT_FOUND_2"))}:l&&("even"===l&&t.length%2==1||"odd"===l&&t.length%2==0)?{error:!0,message:"".concat(e," ").concat(el("SHARED_EVEN_NUMBER_OF_ELEMENTS_1")).concat(t.length).concat(el("SHARED_ELEMENTS_BUT_FOUND_2"))}:i&&!dS(i,t,n)?{error:!0,message:"".concat(e," ").concat(el("SHARED_ELEMENTS_INCORRECT_TYPE"))}:{error:!1,message:""}}function fS(t,e,n,r){var i=[];if(Object.keys(t).forEach((function(t){void 0===e[t]&&i.push(t)})),i.length>0)return{error:!0,message:"".concat(el("THE_FOLLOWING_HAVE_NOT_BEEN_FOUND")).concat(r).concat(el("HAVE_NOT_FOUND"),": ").concat(i.join(", "))};var o=[];if(Object.keys(t).forEach((function(t){null===e[t]&&o.push(t)})),o.length>0)return{error:!0,message:"".concat(el("THE_FOLLOWING_SHORT")).concat(r).concat(el("ARE"),"null: ").concat(o)};var a=[];return Object.keys(t).forEach((function(r){dS(t[r],e[r],n)||a.push(r)})),a.length>0?{error:!0,message:"".concat(el("THE_FOLLOWING_SHORT")).concat(r).concat(el("CONTAIN_INCORRECT_TYPE"),": ").concat(a)}:{error:!1,message:""}}function pS(t){for(var e=t.annotations,n=t.categories,r=0;r<e.length;r+=1){for(var i=e[r],o=!1,a=0;a<n.length;a+=1){var s=n[a];if(i.category_id===s.id){o=!0;break}}if(!o)return{error:!0,message:"".concat(el("THE_FOLLOWING_HAS_NOT_BEEN_FOUND"),"category_id").concat(el("HAS_NOT_FOUND"),": ").concat(i.category_id," -> ").concat(el("IN_1"),"categories").concat(el("IN_2"))}}return{error:!1,message:""}}function mS(t){for(var e=t.annotations,n=t.images,r=0;r<e.length;r+=1){for(var i=e[r],o=!1,a=0;a<n.length;a+=1){var s=n[a];if(i.image_id===s.id){o=!0;break}}if(!o)return{error:!0,message:"".concat(el("THE_FOLLOWING_HAS_NOT_BEEN_FOUND"),"image_id").concat(el("HAS_NOT_FOUND"),": ").concat(i.image_id," -> ").concat(el("IN_1"),"annotations").concat(el("IN_2"))}}return{error:!1,message:""}}function yS(t){for(var e={id:"number|string",file_name:"string"},n=t.images,r=0;r<n.length;r+=1){var i=fS(e,n[r],Qa,el("PROPERTIES"));if(i.error)return i.message+=" -> ".concat(el("IN_1"),"images").concat(el("IN_2")),i}return{error:!1,message:""}}function gS(t){var e="Segmentation",n="array:number";if(t.length>1){var r=hS(t,e,Qa,{elementsType:n,length:8});if(r.error)return r}else if(1===t.length){var i=t[0],o={};if((o=hS(i,e,Qa,{elementsType:"array"})).error)return o;if((o=hS(i,e,Qa,{elementsType:n,minLength:6,evenOdd:"even"})).error)return o}return t.length<1?{error:!0,message:"".concat(e).concat(el("ARRAY_EMPTY"))}:{error:!1,message:""}}function bS(t){for(var e={id:"number|string",image_id:"number|string",category_id:"number|string",segmentation:"array",bbox:"array:number"},n=t.annotations,r=0;r<n.length;r+=1){var i=n[r],o=fS(e,i,Qa,el("PROPERTIES"));if(o.error)return o.message+=" -> ".concat(el("IN_1"),"annotations").concat(el("IN_2")),o;if((o=gS(i.segmentation)).error)return o.message+=" -> ".concat(el("IN_1"),"annotations").concat(el("IN_2")),o;if((o=hS(i.bbox,"bbox",Qa,{length:4})).error)return o.message+=" -> ".concat(el("IN_1"),"annotations").concat(el("IN_2")),o}return{error:!1,message:""}}function vS(t){for(var e={id:"number|string",name:"number|string"},n=t.categories,r=0;r<n.length;r+=1){var i=fS(e,n[r],Qa,el("PROPERTIES"));if(i.error)return i.message+=" -> ".concat(el("IN_1"),"categories").concat(el("IN_2")),i}return{error:!1,message:""}}function wS(t){var e={};return(e=fS({images:"array:object",annotations:"array:object",categories:"array:object"},t,Qa,el("PROPERTIES"))).error||(e=hS(t.images,"images",Qa,{minLength:1})).error||(e=hS(t.annotations,"annotations",Qa,{minLength:1})).error||(e=hS(t.categories,"categories",Qa,{minLength:1})).error?e:{error:!1,message:""}}function _S(t){for(var e=a_(),n=0;n<e.length;n+=1)if(t===e[n].name)return!0;return!1}function xS(t,e){if(!e){var n=Bs.getDatasetObject(),r=n[za],i=n[Ha];if(t.fileFormat===Da)return function(t,e){var n=[wS,vS,bS,yS,mS,pS],r=function(t,e){for(var n=0;n<e.length;n+=1){var r=e[n](t.annotationData);if(r.error)return r}return{error:!1,message:""}}(t.body,n);return r.error||(e.forEach((function(t){t.active=!1})),t.active=!0),r}(t,i);if(t.fileFormat===Fa)return function(t,e,n){var r=t.body.fileMetaData.name,i=!!gE()&&_S(r);if(e.length>0){for(var o=n.body.annotationData,a=0;a<o.images.length;a+=1)if(r===o.images[a].file_name)return{error:!1,message:"",alreadyUploaded:i,valid:!0};return{error:!0,message:el("UPLOAD_DATASETS_FORMAT_VALIDATAOR_IMAGE_NOT_SPECIFIED"),alreadyUploaded:i}}return{error:!1,message:"",alreadyUploaded:i}}(t,i,r)}return gE()&&t.fileFormat===Fa&&_S(t.body.fileMetaData.name)?{error:!1,message:"",alreadyUploaded:!0}:e}const ES=lS(Bs,xS),OS=ks();function IS(t){for(var e=a_(),n=0;n<e.length;n+=1)if(t===e[n].name)return!0;return!1}function SS(t){for(var e=Object.keys(t),n=0;n<e.length;n+=1)for(var r=t[e[n]].regions,i=0;i<r.length;i+=1){var o=fS({name:"number|string"},r[i].region_attributes,Qa,el("PROPERTIES"));if(o.error)return o.message+=" -> ".concat(el("IN_1"),"region_attributes").concat(el("IN_2")),o}return{error:!1,message:""}}function AS(t){var e="array:number",n=fS({all_points_x:e,all_points_y:e},t.shape_attributes,Qa,el("PROPERTIES"));return n.error?n:t.shape_attributes.all_points_x.length!==t.shape_attributes.all_points_y.length?{error:!0,message:el("VGG_EQUAL_SIZE_ARRAYS")}:(n=hS(t.shape_attributes.all_points_x,"all_points_x",Qa,{elementsType:e,minLength:3})).error||(n=hS(t.shape_attributes.all_points_y,"all_points_y",Qa,{elementsType:e,minLength:3})).error?n:{error:!1,message:""}}function LS(t){var e=fS({x:"number",y:"number",width:"number",height:"number"},t.shape_attributes,Qa,el("PROPERTIES"));return e.error?e:{error:!1,message:""}}function kS(t){for(var e=Object.keys(t),n=0;n<e.length;n+=1)for(var r=t[e[n]].regions,i=0;i<r.length;i+=1){var o=r[i],a=fS({name:"string"},o.shape_attributes,Qa,el("PROPERTIES"));if(a.error)return a.message+=" -> ".concat(el("IN_1"),"shape_attributes").concat(el("IN_2")),a;if("rect"===o.shape_attributes.name){if((a=LS(o)).error)return a.message+=" -> ".concat(el("IN_1"),"shape_attributes").concat(el("IN_2")),a}else{if("polygon"!==o.shape_attributes.name)return{error:!0,message:"".concat(el("SHAPE_NOT_SUPPORTED"),": ").concat(o.shape_attributes.name," -> ").concat(el("IN_1"),"shape_attributes").concat(el("IN_2"))};if((a=AS(o)).error)return a.message+=" -> ".concat(el("IN_1"),"shape_attributes").concat(el("IN_2")),a}}return{error:!1,message:""}}function TS(t){for(var e={shape_attributes:"object",region_attributes:"object"},n=Object.keys(t),r=0;r<n.length;r+=1)for(var i=t[n[r]].regions,o=0;o<i.length;o+=1){var a=fS(e,i[o],Qa,el("PROPERTIES"));if(a.error)return a.message+=" -> ".concat(el("IN_1"),"regions").concat(el("IN_2")),a}return{error:!1,message:""}}function NS(t){for(var e={filename:"string",regions:"array:object"},n=Object.keys(t),r=0;r<n.length;r+=1){var i=fS(e,t[n[r]],Qa,el("PROPERTIES"));if(i.error)return i.message+=" -> ".concat(el("IN_1")).concat(el("ANNOTATION_OBJECT")).concat(el("IN_2")),i}return{error:!1,message:""}}function BS(t){return e=t,Object.keys(e).length>0?{error:!1,message:""}:{error:!0,message:"".concat(el("THE")).concat("parent"," ").concat(el("OBJECT_NO_PROPERTIES"))};var e}function CS(t,e){if(!e){var n=OS.getDatasetObject(),r=n[za],i=n[Ha];if(t.fileFormat===Da)return function(t,e){var n=[BS,NS,TS,kS,SS],r=function(t,e){for(var n=0;n<e.length;n+=1){var r=e[n](t.annotationData);if(r.error)return r}return{error:!1,message:""}}(t.body,n);return r.error||(e.forEach((function(t){t.active=!1})),t.active=!0),r}(t,i);if(t.fileFormat===Fa)return function(t,e,n){var r=t.body.fileMetaData.name,i=!!gE()&&IS(r);if(e.length>0){for(var o=n.body.annotationData,a=Object.keys(o),s=0;s<a.length;s+=1)if(r===o[a[s]].filename)return{error:!1,message:"",alreadyUploaded:i,valid:!0};return{error:!0,message:el("UPLOAD_DATASETS_FORMAT_VALIDATAOR_IMAGE_NOT_SPECIFIED"),alreadyUploaded:i}}return{error:!1,message:"",alreadyUploaded:i}}(t,i,r)}return gE()&&t.fileFormat===Fa&&IS(t.body.fileMetaData.name)?{error:!1,message:"",alreadyUploaded:!0}:e}const MS=lS(OS,CS),DS=Ts();function PS(t){for(var e=a_(),n=0;n<e.length;n+=1)if(t===e[n].name)return!0;return!1}function FS(t){var e=fS({xmin:"number",ymin:"number",xmax:"number",ymax:"number"},t,ts,el("TAGS"));return e.error?e:{error:!1,message:""}}function jS(t){var e={name:"number|string",bndbox:"object"},n=t.annotation.object;if(Array.isArray(n))for(var r=0;r<n.length;r+=1){var i=n[r],o=fS(e,i,ts,el("TAGS"));if(o.error)return o;if((o=FS(i.bndbox)).error)return o}else{var a=fS(e,n,ts,el("TAGS"));if(a.error)return a;if((a=FS(n.bndbox)).error)return a}return{error:!1,message:""}}function RS(t){return fS({object:"object|array"},t.annotation,ts,el("TAGS"))}function US(t){return fS({annotation:"object"},t,ts,el("TAGS"))}function zS(t,e){if(!e){var n=DS.getDatasetObject()[Ha];if(t.fileFormat===Da)return function(t,e){var n=[US,RS,jS],r=function(t,e){for(var n=0;n<e.length;n+=1){var r=e[n](t.annotationData);if(r.error)return r}return{error:!1,message:""}}(t.body,n);return r.error||(e.forEach((function(t){t.active=!1})),t.active=!0),r}(t,n);if(t.fileFormat===Fa)return function(t,e){var n=t.body.fileMetaData.name,r=n.substring(0,n.indexOf(".")),i=!!gE()&&PS(n);if(e.length>0){for(var o=0;o<e.length;o+=1){var a=e[o].body.fileMetaData.name;if(r===a.substring(0,a.indexOf(".xml")))return{error:!1,message:"",alreadyUploaded:i,valid:!0}}return{error:!0,message:el("IMAGE_NOT_VALID_IN_ANNOTATIONS"),alreadyUploaded:i}}return{error:!1,message:"",alreadyUploaded:i}}(t,n)}return gE()&&t.fileFormat===Fa&&PS(t.body.fileMetaData.name)?{error:!1,message:"",alreadyUploaded:!0}:e}const HS=cS(DS,zS);function VS(t,e,n){if(t[Ha].length>0){var r=!1;Object.keys(t[Ga]).forEach((function(i){var o=t[Ga][i],a=e(o);a.error||(r=!0);var s=o.body.fileMetaData.name;EI(s,a),n(s,a.error)})),r?LI():kI()}else OI(),kI()}function WS(t,e,n,r){var i=!1;return t.forEach((function(t){var o=r(t);SI(t.body.fileMetaData.name,o),o.error?n&&e.push(t):(i=!0,n||e.push(t))})),i}function YS(t,e){var n=this.datasetObjectManager.getDatasetObject(),r=t.body.fileMetaData.name;t.fileFormat===Fa?(EI(r,e),e.valid&&LI()):t.fileFormat===Da?function(t,e){return!!vI(t,ja)&&(e(t,Pa),!0)}(r,this.removeFileHandler)||(VS(n,this.validateFormat,this.datasetObjectManager.updateImageFileErrorStatus),SI(r,e)):t.fileFormat===Pa&&xI(r,function(t,e,n,r,i,o,a,s){var l=e[Wa];return t.error||(function(t,e){vI(t,Ra)&&(e(t,Ha),e(t,Va))}(n,s),function(t,e){t.forEach((function(t){var n=e(t),r=t.body.fileMetaData.name;n.error||(n.error=!0,n.message=el("ONE_CLASSES_FILE_ALLOWED_ERROR_MESSAGE")),xI(r,n)}))}(l,r),function(t,e,n,r){var i=[],o=[],a=WS(t[Ha],i,!0,e),s=WS(t[Va],o,!1,e);i.forEach((function(t){r(t)})),o.forEach((function(t){n(t)})),a||s?LI():kI()}(e,r,o,a),VS(e,r,i)),t}(e,n,r,this.validateFormat,this.datasetObjectManager.updateImageFileErrorStatus,this.datasetObjectManager.moveAnnotationFileToValidArray,this.datasetObjectManager.moveAnnotationFileToFaltyArray,this.datasetObjectManager.removeFile))}var GS=function(t,e,n){return YS.bind({datasetObjectManager:t,validateFormat:e,removeFileHandler:n})};const $S=Ns();function XS(t){for(var e=a_(),n=0;n<e.length;n+=1)if(t===e[n].name)return!0;return!1}function KS(t){for(var e=0;e<t.length;e+=1){var n=t[e],r={};r["class (1)"]=n[0],r["x (2)"]=n[1],r["y (3)"]=n[2],r["width (4)"]=n[3],r["height (5)"]=n[4];var i=fS({"class (1)":"number","x (2)":"number","y (3)":"number","width (4)":"number","height (5)":"number"},r,es,el("ATTRIBUTES"));if(i.error)return i.message+=" -> ".concat(el("YOLO_ROW_1")).concat(e+1).concat(el("YOLO_ROW_2")),i}return{error:!1,message:""}}function ZS(t,e){if(!e){var n=$S.getDatasetObject(),r=n[Ya],i=n[Ha];if(t.fileFormat===Da)return function(t,e){var n=[KS],r=function(t,e){for(var n=0;n<e.length;n+=1){var r=e[n](t.annotationData);if(r.error)return r}return{error:!1,message:""}}(t.body,n);return!r.error&&e?function(t,e){for(var n=t.body.annotationData,r=e.body.annotationData.length,i=0;i<n.length;i+=1)if(Math.abs(n[i][0])>r-1)return{error:!0,message:"".concat(el("YOLO_CLASS_1")).concat(n[i][0],", ").concat(el("YOLO_CLASS_2")).concat(r).concat(el("YOLO_CLASS_3"))};return{error:!1,message:"",valid:!0}}(t,e):r}(t,r);if(t.fileFormat===Fa)return function(t,e){var n=t.body.fileMetaData.name,r=n.substring(0,n.indexOf(".")),i=!!gE()&&XS(n);if(e.length>0){for(var o=0;o<e.length;o+=1){var a=e[o].body.fileMetaData.name;if(r===a.substring(0,a.indexOf(".txt")))return{error:!1,message:"",alreadyUploaded:i,valid:!0}}return{error:!0,message:el("IMAGE_NOT_VALID_IN_ANNOTATIONS"),alreadyUploaded:i}}return{error:!1,message:"",alreadyUploaded:i}}(t,i);if(t.fileFormat===Pa)return{error:!1,message:""}}return gE()&&t.fileFormat===Fa&&XS(t.body.fileMetaData.name)?{error:!1,message:"",alreadyUploaded:!0}:e}function qS(t,e,n){if(t[Ha].length>0){var r=!1;Object.keys(t[Ga]).forEach((function(i){var o=t[Ga][i],a=n(o);a.error||(r=!0);var s=o.body.fileMetaData.name;EI(s,a),e(s,a.error)})),r||kI()}else OI(),kI()}function JS(t,e,n,r){var i=!1;return t.forEach((function(t){var o=r(t);SI(t.body.fileMetaData.name,o),o.error?n&&e.push(t):(i=!0,n||e.push(t))})),i}function QS(t,e,n,r){var i=[],o=[],a=JS(t[Ha],i,!0,r),s=JS(t[Va],o,!1,r);i.forEach((function(t){n(t)})),o.forEach((function(t){e(t)})),(a||s)&&t[Ya]?LI():kI()}function tA(t,e,n){var r=this.datasetObjectManager.getDatasetObject();e===Ra?(this.datasetObjectManager.removeFile(t,Ha),this.datasetObjectManager.removeFile(t,Va),n||(0===r[Ha].length?(kI(),OI()):qS(r,this.datasetObjectManager.updateImageFileErrorStatus,this.validateFormat))):e===Ua?(this.datasetObjectManager.removeFile(t,Ga),0===Object.keys(r[Ga]).filter((function(t){return!r[Ga][t].error})).length&&kI()):e===ja&&(this.datasetObjectManager.removeFile(t,Wa),n||(this.datasetObjectManager.replaceActiveFileIfRemoving(t,Wa,Ya),null!==r[Ya]?function(t,e,n,r,i,o){!function(t){for(var e=RO.childNodes[1],n=0;n<e.childNodes.length;n+=1){var r=e.childNodes[n].childNodes[0];t===bI(e,n).fileName&&(r.innerHTML=yI(t,ja),r.scrollIntoView())}}(t.body.fileMetaData.name),t.newlyActive=!1,QS(e,i,o,r),qS(e,n,r)}(r[Ya],r,this.datasetObjectManager.updateImageFileErrorStatus,this.validateFormat,this.datasetObjectManager.moveAnnotationFileToValidArray,this.datasetObjectManager.moveAnnotationFileToFaltyArray):(QS(r,this.datasetObjectManager.moveAnnotationFileToValidArray,this.datasetObjectManager.moveAnnotationFileToFaltyArray,this.validateFormat),qS(r,this.datasetObjectManager.updateImageFileErrorStatus,this.validateFormat)))),vI(t,e)}const eA=(nA=$S,rA=ZS,tA.bind({datasetObjectManager:nA,validateFormat:rA}));var nA,rA;const iA=GS($S,ZS,eA),oA=ks();function aA(t){for(var e=a_(),n=0;n<e.length;n+=1)if(t===e[n].name)return!0;return!1}function sA(t){for(var e=0;e<t.length;e+=1){if(8!==t[e].length)return{error:!0,message:"".concat(el("CSV_ATTRIBUTES_1")).concat(e+1).concat(el("CSV_ATTRIBUTES_2")).concat(t[e].length).concat(el("CSV_ATTRIBUTES_3"))};var n=t[e],r={};r["filename(1)"]=n[0],r["width(2)"]=n[1],r["height(3)"]=n[2],r["class(4)"]=n[3],r["xmin(5)"]=n[4],r["ymin(6)"]=n[5],r["xmax(7)"]=n[6],r["ymax(8)"]=n[7];var i=fS({"filename(1)":"string","width(2)":"number","height(3)":"number","class(4)":"number|string","xmin(5)":"number","ymin(6)":"number","xmax(7)":"number","ymax(8)":"number"},r,ns,el("PROPERTIES"));if(i.error)return i.message+=" -> on row ".concat(e+1),i}return{error:!1,message:""}}function lA(t,e){if(!e){var n=oA.getDatasetObject(),r=n[za],i=n[Ha];if(t.fileFormat===Da)return function(t,e){var n=[sA],r=function(t,e){for(var n=0;n<e.length;n+=1){var r=e[n](t.annotationData);if(r.error)return r}return{error:!1,message:""}}(t.body,n);return r.error||(e.forEach((function(t){t.active=!1})),t.active=!0),r}(t,i);if(t.fileFormat===Fa)return function(t,e,n){var r=t.body.fileMetaData.name,i=!!gE()&&aA(r);if(e.length>0){for(var o=n.body.annotationData,a=0;a<o.length;a+=1)if(r===o[a][0])return{error:!1,message:"",alreadyUploaded:i,valid:!0};return{error:!0,message:el("UPLOAD_DATASETS_FORMAT_VALIDATAOR_IMAGE_NOT_SPECIFIED"),alreadyUploaded:i}}return{error:!1,message:"",alreadyUploaded:i}}(t,i,r)}return gE()&&t.fileFormat===Fa&&aA(t.body.fileMetaData.name)?{error:!1,message:"",alreadyUploaded:!0}:e}const cA=lS(oA,lA);function uA(t,e,n){var r=!1;Object.keys(t[Ga]).forEach((function(i){var o=t[Ga][i],a=n(o);a.error||(r=!0);var s=o.body.fileMetaData.name;EI(s,a),e(s,a.error)})),r?LI():kI()}function dA(t,e,n){if(e){var r=Ha;this.datasetObjectManager.removeFile(t,r)}else this.datasetObjectManager.removeFile(t,Ha),0===n[Ha].length?(kI(),OI()):uA(n,this.datasetObjectManager.updateImageFileErrorStatus,this.validateFormat)}function hA(t,e,n){var r;e?(r=e===el("ONE_ANNOTATION_FILE_ALLOWED_ERROR_MESSAGE")?Ha:Va,this.datasetObjectManager.removeFile(t,r)):(this.datasetObjectManager.replaceActiveFileIfRemoving(t,Ha,za),this.datasetObjectManager.removeFile(t,Ha),null!==this.datasetObjectManager.getActiveAnnotationFile()?function(t,e,n,r){t&&(II(t.body.fileMetaData.name),t.newlyActive=!1,uA(e,n,r))}(this.datasetObjectManager.getActiveAnnotationFile(),n,this.datasetObjectManager.updateImageFileErrorStatus,this.validateFormat):(kI(),OI()))}function fA(t,e,n){var r=this.datasetObjectManager.getDatasetObject();e===Ra?this.removeAnnotationFileFunc(t,n,r):e===Ua&&(this.datasetObjectManager.removeFile(t,Ga),0===Object.keys(r[Ga]).filter((function(t){return!r[Ga][t].error})).length&&kI()),vI(t,e)}var pA=function(t,e){var n=hA;return fA.bind({datasetObjectManager:t,validateFormat:e,removeAnnotationFileFunc:n})},mA=function(t,e){var n=dA;return fA.bind({datasetObjectManager:t,validateFormat:e,removeAnnotationFileFunc:n})};const yA=pA(Bs,xS),gA=pA(OS,CS),bA=pA(oA,lA),vA=mA(DS,zS);function wA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _A(t,e,n,r){for(var i={type:null,coordinates:{},imageName:n},o=e[za].body.annotationData.categories,a=0;a<o.length;a+=1)if(t.category_id===o[a].id){i.coordinates.class=o[a].name.toString();break}!function(t,e){if(8===t.length){var n=(l=4,function(t){if(Array.isArray(t))return t}(s=e)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(s,l)||function(t,e){if(t){if("string"==typeof t)return wA(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wA(t,e):void 0}}(s,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],i=n[1],o=n[2],a=n[3];if(t[0]===r&&t[1]===i&&t[2]===r+o&&t[3]===i&&t[4]===r+o&&t[5]===i+a&&t[6]===r&&t[7]===i+a)return!0}var s,l;return!1}(t.segmentation[0],t.bbox)?(i.coordinates.points=t.segmentation[0],i.type="polygon",r.polygons.push(i)):(i.coordinates.bbox=t.bbox,i.type="boundingBox",r.boundingBoxes.push(i))}function xA(t,e,n,r,i){for(var o=0;o<e.length;o+=1)t===e[o].image_id&&_A(e[o],r,i,n)}function EA(){var t,e,n={images:[],shapes:[]},r=Bs.getDatasetObject();return n.images=(t=r[Ga],e=[],Object.keys(t).forEach((function(n){t[n].error||e.push(t[n])})),e),n.shapes=function(t,e){var n={boundingBoxes:[],polygons:[]},r=t[za].body.annotationData,i=r.annotations,o=r.images;return e.forEach((function(e){for(var r=0;r<o.length;r+=1){var a=e.body.fileMetaData.name;a===o[r].file_name&&xA(o[r].id,i,n,t,a)}})),n}(r,n.images),n}function OA(t,e,n){for(var r=function(){var r={type:null,coordinates:{},imageName:n},o=t[i];if(r.coordinates.class=o.region_attributes.name.toString(),"polygon"===o.shape_attributes.name){var a=[];o.shape_attributes.all_points_x.forEach((function(t,e){a.push(t),a.push(o.shape_attributes.all_points_y[e])})),r.coordinates.points=a,r.type="polygon",e.polygons.push(r)}else{var s=[];s[0]=o.shape_attributes.x,s[1]=o.shape_attributes.y,s[2]=o.shape_attributes.width,s[3]=o.shape_attributes.height,r.coordinates.bbox=s,r.type="boundingBox",e.boundingBoxes.push(r)}},i=0;i<t.length;i+=1)r()}function IA(){var t,e,n={images:[],shapes:[]},r=OS.getDatasetObject();return n.images=(t=r[Ga],e=[],Object.keys(t).forEach((function(n){t[n].error||e.push(t[n])})),e),n.shapes=function(t,e){var n={boundingBoxes:[],polygons:[]},r=t[za].body.annotationData;return e.forEach((function(t){for(var e=0;e<Object.keys(r).length;e+=1){var i=t.body.fileMetaData.name;i===r[Object.keys(r)[e]].filename&&OA(r[Object.keys(r)[e]].regions,n,i)}})),n}(r,n.images),n}function SA(t,e,n){var r={type:null,coordinates:{},imageName:e},i=[];i[0]=t[4],i[1]=t[5],i[2]=t[6]-t[4],i[3]=t[7]-t[5],r.coordinates.bbox=i,r.coordinates.class=t[3].toString(),r.type="boundingBox",n.boundingBoxes.push(r)}function AA(){var t,e,n={images:[],shapes:[]},r=oA.getDatasetObject();return n.images=(t=r[Ga],e=[],Object.keys(t).forEach((function(n){t[n].error||e.push(t[n])})),e),n.shapes=function(t,e){var n={boundingBoxes:[],polygons:[]},r=t[za].body.annotationData;return e.forEach((function(t){for(var e=0;e<r.length;e+=1){var i=t.body.fileMetaData.name;i===r[e][0]&&SA(r[e],i,n)}})),n}(r,n.images),n}function LA(t,e,n){var r={type:null,coordinates:{},imageName:n},i=[];i[0]=parseInt(t.bndbox.xmin["#text"],10),i[1]=parseInt(t.bndbox.ymin["#text"],10),i[2]=parseInt(t.bndbox.xmax["#text"],10)-parseInt(t.bndbox.xmin["#text"],10),i[3]=parseInt(t.bndbox.ymax["#text"],10)-parseInt(t.bndbox.ymin["#text"],10),r.coordinates.bbox=i,r.coordinates.class=t.name["#text"].toString(),r.type="boundingBox",e.boundingBoxes.push(r)}function kA(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r+=1)LA(t[r],e,n);else LA(t,e,n)}function TA(){var t,e,n={images:[],shapes:[]},r=DS.getDatasetObject();return n.images=(t=r[Ga],e=[],Object.keys(t).forEach((function(n){t[n].error||e.push(t[n])})),e),n.shapes=function(t,e){var n={boundingBoxes:[],polygons:[]};return e.forEach((function(e){for(var r=e.body.fileMetaData.name,i=r.substring(0,r.indexOf(".")),o=0;o<t[Ha].length;o+=1){var a=t[Ha][o].body.fileMetaData.name;i===a.substring(0,a.indexOf("."))&&kA(t[Ha][o].body.annotationData.annotation.object,n,r)}})),n}(r,n.images),n}function NA(t,e,n,r,i){var o={type:null,coordinates:{},imageName:n},a=[],s=i.width,l=i.height;a[0]=(t[1]-t[3]/2)*s,a[1]=(t[2]-t[4]/2)*l,a[2]=t[3]*s,a[3]=t[4]*l,o.coordinates.bbox=a,o.coordinates.class=r[t[0]][0].toString(),o.type="boundingBox",e.boundingBoxes.push(o)}function BA(t,e,n,r,i){for(var o=0;o<t.length;o+=1)NA(t[o],e,n,r,i)}function CA(){var t,e,n={images:[],shapes:[]},r=$S.getDatasetObject();return n.images=(t=r[Ga],e=[],Object.keys(t).forEach((function(n){t[n].error||e.push(t[n])})),e),n.shapes=function(t,e){var n={boundingBoxes:[],polygons:[]},r=t[Ya].body.annotationData;return e.forEach((function(e){for(var i=e.body.fileMetaData.name,o=e.body.imageElement,a=i.substring(0,i.indexOf(".")),s=0;s<t[Ha].length;s+=1){var l=t[Ha][s].body.fileMetaData.name;a===l.substring(0,l.indexOf("."))&&BA(t[Ha][s].body.annotationData,n,i,r,o)}})),n}(r,n.images),n}var MA=1,DA=null,PA=null,FA=null,jA=null;function RA(){switch(MA){case 1:lO.innerHTML="\n    ".concat(el("UPLOAD_DATASETS_MODAL_DESCRIPTION_PAR_1"),'\n    <br>\n    <div class="upload-datasets-modal-description-break"></div>\n    ').concat(el("UPLOAD_DATASETS_MODAL_DESCRIPTION_PAR_2")),lO.style.display="",lO.style.marginTop="".concat(26/il(),"px"),cO.style.display="",dO.style.marginTop="".concat(14/il(),"px"),uO.style.display="",PA=hO,MA+=1;break;case 2:LO(),PA=kO,MA+=1;break;case 3:MA+=1,a_().length>0?(t=el("UPLOAD_DATASETS_MODAL_REUSE_IMAGES"),QI.innerHTML=t,QI.style.textAlign="center",QI.style.marginTop="".concat(61/il(),"px"),qI.style.display="",JI.style.display="",QI.style.display="",tS.style.marginTop="".concat(5/il(),"px"),PA=eS):(yE(!1),RA());break;case 4:(function(){switch(pE){case $a:console.log("Init cococ json upload"),YI(Bs.addFile),WI(ES),VI(xS),IE(EA),ZI(FA,yA,Bs.clearDatasetObject,jA),BI($a,Ja,Qa,rs);break;case Xa:YI(OS.addFile),WI(MS),VI(CS),IE(IA),ZI(FA,gA,OS.clearDatasetObject,jA),BI(Xa,Ja,Qa,rs);break;case Ka:YI(oA.addFile),WI(cA),VI(lA),IE(AA),ZI(FA,bA,oA.clearDatasetObject,jA),BI(Ka,".csv, image/*",ns,rs);break;case Za:YI(DS.addFile),WI(HS),VI(zS),IE(TA),ZI(FA,vA,DS.clearDatasetObject,jA),BI(Za,".xml, image/*",ts,rs);break;case qa:YI($S.addFile),WI(iA),VI(ZS),IE(CA),ZI(FA,eA,$S.clearDatasetObject,jA),BI(qa,".txt, image/*",es,is)}})(),gE()&&a_().forEach((function(t){var e={fileFormat:Fa,body:{fileMetaData:{name:t.name},imageElement:t.data}},n={error:!1,message:"",alreadyUploaded:!0};FI(e,n),jI(e,n)})),PA=CI,MA+=1}var t}function UA(t){(function(t){t?Kl()&&("polygon"===Zl()?_p():"boundingBox"===Zl()&&(yc()&&Nu(_d),Ep())):setTimeout((function(){window.editShapes()}),0)})(t),DA.style.display="none",Md(Sd),PA(),MA=1,RA(),Vc(!1)}function zA(){MA=2,RA()}var HA,VA=null,WA=null,YA=null,GA=null,$A=null;function XA(t,e,n){e.forEach((function(e){t.addEventListener(e,n,!1)}))}function KA(t,e){var n=function(t){var e=t.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:e.top+r,left:e.left+n}}(e);t.style.top="".concat(n.top,"px")}function ZA(t,e,n){var r=t.getBoundingClientRect().bottom;n.isPopupSticky||r+5>document.body.scrollHeight&&(t.style.top="",t.style.bottom=n.bottomPxOverride||"5px",n.stickCoordinates=r+6,n.isPopupSticky=!0),n.isPopupSticky&&n.stickCoordinates<document.body.scrollHeight&&(void 0===n.bottomPxOverride&&(KA(t,e),t.style.bottom=""),n.isPopupSticky=!1)}var qA=!1,JA=!1,QA=null,tL=null,eL=null,nL=null,rL=null,iL=null,oL=null,aL=null,sL=null,lL={isPopupSticky:!1,stickCoordinates:0};function cL(){ZA(nL,eL,lL)}function uL(){tL.classList.remove("popup-proceed-button"),tL.classList.replace("popup-label-button","popup-label-button-disabled"),JA=!1}function dL(){for(var t=0;t<oL.length;t+=1)iL[t].style.color="black",oL[t].disabled=!1,oL[t].style.cursor="pointer"}function hL(){nL.style.display="none",nL.style.bottom="",lL.isPopupSticky=!1,Dc(!1)}var fL=n(465),pL=n.n(fL);function mL(t){return mL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mL(t)}function yL(){yL=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==mL(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(mL(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function gL(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}var bL,vL=pL().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(t){t.onmouseenter=pL().stopTimer,t.onmouseleave=pL().resumeTimer}}),wL=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Error";pL().fire({icon:"error",title:e,text:t})};function _L(t,e){return Math.round(t*e)/e}function xL(t,e){return null===e?t:Math.floor(t*e)/e}function EL(t){if(0===t)return 1;if(null==t)return null;for(var e=1;t>0;)e*=10,t-=1;return e}function OL(t,e,n){var r=function(t,e,n){var r=t.left/e.scaleX,i=t.top/e.scaleY,o=t.width/e.scaleX,a=t.height/e.scaleY;return null!=n&&(r=_L(r,n),i=_L(i,n),o=_L(o,n),a=_L(a,n)),{left:r,top:i,width:o,height:a}}(t,e,EL(n)),i=function(t,e,n,r,i){var o=i.scaleX,a=i.scaleY,s=i.originalWidth,l=i.originalHeight;return t+n>s-3.5/o&&(n=s-t),e+r>l-2/a&&(r=l-e),{finalLeft:t,finalTop:e,finalWidth:n,finalHeight:r}}(r.left,r.top,r.width,r.height,e);return{left:i.finalLeft,top:i.finalTop,width:i.finalWidth,height:i.finalHeight}}function IL(t,e,n){var r=EL(n),i=t.x/e.scaleX,o=t.y/e.scaleY,a=e.scaleX,s=e.scaleY,l=e.originalWidth,c=e.originalHeight;return i>l-3.5/a&&(i=l),o>c-2/s&&(o=c),{pointX:xL(i,r),pointY:xL(o,r)}}function SL(t){return SL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SL(t)}function AL(){AL=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==SL(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(SL(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function LL(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function kL(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){LL(o,r,i,a,s,"next",t)}function s(t){LL(o,r,i,a,s,"throw",t)}a(void 0)}))}}function TL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function NL(t,e){var n={segmentation:[],bbox:[],area:0},r=999999999999,i=999999999999,o=0,a=0,s=[];t.points.forEach((function(t){var n=IL(t,e,2),l=n.pointX,c=n.pointY;s.push(l),s.push(c),l<r&&(r=l),c<i&&(i=c),l>o&&(o=l),c>a&&(a=c)})),n.segmentation=[s];var l=EL(2),c=_L(o-r,l),u=_L(a-i,l);return n.bbox.push(r),n.bbox.push(i),n.bbox.push(c),n.bbox.push(u),n.area=_L(function(t){var e,n=function(t){if(Array.isArray(t))return TL(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return TL(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?TL(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();t[0]===t[t.length-2]&&t[1]===t[t.length-1]||(n.push(n[0]),n.push(n[1]));for(var r=0,i=0;i<n.length-2;i+=2)r+=n[i]*n[i+3]-n[i+2]*n[i+1];return r/2}(s),l),n}function BL(t,e){return t[e]}function CL(t,e){return"polygon"===t.shapeName?NL(t,e):"bndBox"===t.shapeName?function(t,e){var n={segmentation:[],bbox:[],area:0},r=OL(t,e,2),i=r.left,o=r.top,a=r.width,s=r.height,l=EL(2),c=_L(i+a,l),u=_L(o+s,l),d=[];return d.push(i),d.push(o),d.push(c),d.push(o),d.push(c),d.push(u),d.push(i),d.push(u),n.segmentation=[d],n.bbox.push(i),n.bbox.push(o),n.bbox.push(a),n.bbox.push(s),n.area=_L(a*s,l),n}(t,e):{segmentation:[],bbox:[],area:0}}function ML(t,e){var n={};return n.id=e,n.width=t.imageDimensions.originalWidth,n.height=t.imageDimensions.originalHeight,n.file_name=t.name,n.license=1,n.date_captured="",n.blobUrl=t.url||"",n.dbImgId=t.imgId||null,n.isLabeled=t.isLabeled||!1,n.taskId=parseInt(localStorage.getItem("taskId"),10),n}function DL(t,e){var n={};return n.id=e,n.name=t.text,n.supercategory=t.client_id||"none",n.product_id=t.id||"none",n}function PL(t,e){var n={images:[],annotations:[]},r=0,i=0;return t.forEach((function(t){t.imageDimensions&&(n.images.push(ML(t,r)),Object.keys(t.shapes).forEach((function(o){var a=t.shapes[o].shapeRef;n.annotations.push(function(t,e,n,r,i){var o={};o.id=n,o.image_id=e,o.category_id=BL(i,t.shapeLabelText);var a=CL(t,r);return o.segmentation=a.segmentation,o.area=a.area,o.bbox=a.bbox,o.isCrowd=0,o}(a,r,i,t.imageDimensions,e)),i+=1})),r+=1)})),n}function FL(t,e){var n={images:[],annotations:[]},r=0,i=parseInt(localStorage.getItem("client_id"),10);return t.forEach((function(t){if(t.hasChanged){n.images.push(ML(t,r));var o=Object.keys(t.shapes||{});if(o.length>0)o.forEach((function(r){var o=t.shapes[r].shapeRef;n.annotations.push(function(t,e,n,r,i){var o={};o.id=t.annots_id?t.annots_id:0,o.image_id=n.imgId||null,o.file_name=n.name||null,o.img_url=n.url||"",o.category_id=BL(r,t.shapeLabelText),o.category_name=t.shapeLabelText;var a=CL(t,n.imageDimensions);return o.segmentation=JSON.stringify(a.segmentation),o.area=a.area,o.bbox=JSON.stringify(a.bbox),o.is_crowd=0,o.is_labeled=n.isLabeled?1:0,o.task_id=parseInt(localStorage.getItem("taskId"),10),o.assigned_to=parseInt(localStorage.getItem("assigned_to"),10),o.client_id=i,o.shape_name=t.shapeName,o}(o,0,t,e,i))}));else{var a={id:0};a.image_id=t.imgId||null,a.file_name=t.name||null,a.img_url=t.url||"",a.category_id=0,a.category_name="",a.segmentation="",a.area=0,a.bbox="",a.is_crowd=0,a.is_labeled=t.isLabeled?1:0,a.task_id=parseInt(localStorage.getItem("taskId"),10),a.assigned_to=parseInt(localStorage.getItem("assigned_to"),10),a.client_id=i,a.shape_name="",n.annotations.push(a)}r+=1}})),n}function jL(){return RL.apply(this,arguments)}function RL(){return(RL=kL(AL().mark((function t(){var e,n,r,i,o;return AL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={categoriesArray:[],categoriesObject:{}},t.next=3,qd();case 3:for(n=t.sent,r=0,i=n.length-1;i>=0;i-=1)o=n[i],e.categoriesArray.push(DL(o,r)),e.categoriesObject[o.text]=r,r+=1;return t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function UL(){return zL.apply(this,arguments)}function zL(){return(zL=kL(AL().mark((function t(){var e,n,r,i;return AL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={categoriesArray:[],categoriesObject:{}},t.next=3,qd();case 3:for(n=t.sent,r=n.length-1;r>=0;r-=1)i=n[r],e.categoriesArray.push(DL(i,i.id)),e.categoriesObject[i.text]=i.id;return t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function HL(t){var e=oc(),n=mu(),r={};r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.originalWidth=n.originalWidth,r.originalHeight=n.originalHeight,t[e].imageDimensions=r,t[e].shapes=Kh()}function VL(){return(VL=kL(AL().mark((function t(){var e,n,r,i;return AL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},HL(n=a_()),t.next=5,jL();case 5:r=t.sent,i=PL(n,r.categoriesObject),e.images=i.images,e.annotations=i.annotations,e.licenses=[{id:1,name:"Unknown",url:""}],e.categories=r.categoriesArray,(o=e,a=void 0,s=void 0,l=void 0,s=document.createElement("a"),l=new Blob([JSON.stringify(o)],{type:"application/json"}),s.setAttribute("href",window.URL.createObjectURL(l)),s.setAttribute("download",(a=new Date,"visionai-".concat(a.getDay(),"-").concat(a.getMonth(),"-").concat(a.getFullYear(),".json"))),s.dataset.downloadurl=["application/json",s.download,s.href].join(":"),s.draggable=!0,s.classList.add("dragout"),s).click();case 13:case"end":return t.stop()}var o,a,s,l}),t)})))).apply(this,arguments)}function WL(){return(WL=kL(AL().mark((function t(){var e,n,r,i,o;return AL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Ma.show("Preparing files for save...","loading"),HL(e=a_()),t.next=5,UL();case 5:if(n=t.sent,!(r=FL(e,n.categoriesObject)).annotations||0!==r.annotations.length){t.next=11;break}return vL.fire({icon:"warning",title:"No Changes found"}),Ma.hide(),t.abrupt("return");case 11:return i=localStorage.getItem("token"),Ma.show("Saving your files...","loading"),t.next=15,Ba("image_annotations/upsertMany",r.annotations,"POST",i);case 15:(o=t.sent).success?o.success&&(l_(),vL.fire({icon:"success",title:o.message||"Success"}),console.log(o.message)):(wL(o.data||"Unexpected server error."),console.log(o.message),console.log(o.data)),Ma.hide();case 18:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function YL(t,e){var n=[];return Object.keys(t).forEach((function(r){var i=t[r].shapeRef;"polygon"===i.shapeName?n.push(function(t,e){var n=function(t,e){var n={all_points_x:[],all_points_y:[]};return t.points.forEach((function(t){var r=IL(t,e),i=r.pointX,o=r.pointY;n.all_points_x.push(i),n.all_points_y.push(o)})),n}(t,e);return{shape_attributes:{name:"polygon",all_points_x:n.all_points_x,all_points_y:n.all_points_y},region_attributes:{name:t.shapeLabelText}}}(i,e)):"bndBox"===i.shapeName&&n.push(function(t,e){var n=OL(t,e);return{shape_attributes:{name:"rect",x:n.left,y:n.top,width:n.width,height:n.height},region_attributes:{name:t.shapeLabelText}}}(i,e))})),n}function GL(){var t,e,n,r,i=a_(),o={};!function(t){var e=oc(),n=mu(),r={};r.scaleX=n.scaleX,r.scaleY=n.scaleY,t[e].imageDimensions=r,t[e].shapes=Kh()}(i),i.forEach((function(t){var e=function(t){var e={};return e.filename=t.name,e.size=t.size,e.regions=YL(t.shapes,t.imageDimensions),e}(t),n="".concat(e.filename).concat(e.size);o[n]=e})),(t=o,n=document.createElement("a"),r=new Blob([JSON.stringify(t)],{type:"application/json"}),n.setAttribute("href",window.URL.createObjectURL(r)),n.setAttribute("download",(e=new Date,"visionai-".concat(e.getDay(),"-").concat(e.getMonth(),"-").concat(e.getFullYear(),".json"))),n.dataset.downloadurl=["application/json",n.download,n.href].join(":"),n.draggable=!0,n.classList.add("dragout"),n).click()}function $L(t){return $L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$L(t)}function XL(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function KL(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ZL(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?KL(Object(n),!0).forEach((function(e){qL(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KL(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qL(t,e,n){return(e=function(t){var e=function(t){if("object"!=$L(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=$L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$L(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}bL=yL().mark((function t(e){var n,r,i=arguments;return yL().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"Are you sure?",t.next=3,pL().fire({icon:"warning",title:n,text:e,showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"Cancel"});case 3:return r=t.sent,t.abrupt("return",r.isConfirmed);case 5:case"end":return t.stop()}}),t)}));var JL={filename:"filename",width:"width",height:"height",class:"class",xmin:"xmin",ymin:"ymin",xmax:"xmax",ymax:"ymax"};function QL(){var t=a_();!function(t){var e=oc(),n=mu(),r={};r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.originalWidth=n.originalWidth,r.originalHeight=n.originalHeight,t[e].imageDimensions=r,t[e].shapes=Kh()}(t);var e,n=[],r=function(t){var e=[];return t.forEach((function(t){if(t.imageDimensions){var n=function(t){var e={};return e.filename=t.name.replace(",",""),e.width=t.imageDimensions.originalWidth,e.height=t.imageDimensions.originalHeight,e}(t);Object.keys(t.shapes).forEach((function(r){var i=t.shapes[r].shapeRef;if("bndBox"===i.shapeName){var o=function(t,e){var n={};n.class=t.shapeLabelText.replace(",","");var r=OL(t,e),i=r.left,o=r.top,a=r.width,s=r.height;return n.xmin=Math.round(i),n.ymin=Math.round(o),n.xmax=Math.round(i+a),n.ymax=Math.round(o+s),n}(i,t.imageDimensions),a=function(t,e){return ZL(ZL({},t),e)}(n,o);e.push(a)}}))}})),e}(t);n.push(JL),n.push.apply(n,function(t){if(Array.isArray(t))return XL(t)}(e=r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return XL(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XL(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var i,o,a,s,l=function(t){for(var e="",n=function(n){var r="";Object.keys(t[n]).forEach((function(e){""!==r&&(r+=","),r+=t[n][e]})),e+="".concat(r,"\r\n")},r=0;r<t.length;r+=1)n(r);return e}(n);(i=l,a=document.createElement("a"),s=new Blob([i],{type:"text/csv;charset=utf-8;"}),a.setAttribute("href",window.URL.createObjectURL(s)),a.setAttribute("download",(o=new Date,"visionai-".concat(o.getDay(),"-").concat(o.getMonth(),"-").concat(o.getFullYear(),".csv"))),a.dataset.downloadurl=["text/csv;charset=utf-8;",a.download,a.href].join(":"),a.draggable=!0,a.classList.add("dragout"),a).click()}var tk=n(710),ek=n.n(tk);function nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rk(t,e,n){return(e=function(t){var e=function(t){if("object"!=ik(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ik(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ik(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ik(t){return ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ik(t)}function ok(t,e){var n="";return e=void 0!==e?e+="\t":"",Object.keys(t).forEach((function(r){"object"===ik(t[r])?"objects"===r?t[r].forEach((function(t){n+="".concat(e,"<object>\n").concat(ok(t,e)).concat(e,"</object>\n")})):n+="".concat(e,"<").concat(r,">\n").concat(ok(t[r],e)).concat(e,"</").concat(r,">\n"):n+="".concat(e,"<").concat(r,">").concat(t[r],"</").concat(r,">\n")})),n}function ak(t){var e=(new(ek())).folder("images"),n=/^([^.]+)/;return t.forEach((function(t){var r="".concat(n.exec(t.annotation.filename)[0],".xml"),i=ok(t);e.file(r,i)})),e}function sk(t){var e=[];return t.forEach((function(t){if(t.imageDimensions){var n={};n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nk(Object(n),!0).forEach((function(e){rk(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},function(t){var e={folder:"Unknown"};return e.filename=t.name,e.path="Unknown",e.source={database:"Unknown"},e.size={},e.size.width=t.imageDimensions.originalWidth,e.size.height=t.imageDimensions.originalHeight,e.size.depth=3,e.segmented=0,e}(t)),n.objects=function(t){var e=[];return Object.keys(t.shapes).forEach((function(n){var r,i,o,a,s,l,c,u,d,h=t.shapes[n].shapeRef;"bndBox"===h.shapeName&&e.push((o={},d=function(t,e,n,r,i){return function(t,e){return t<=1||e<=1}(t,e)||function(t,e,n){return t>=n.originalWidth||e>=n.originalHeight}(n,r,i)}(s=(a=OL(r=h,i=t.imageDimensions,0)).left,l=a.top,c=s+a.width,u=l+a.height,i)?1:0,o.name=r.shapeLabelText,o.pose="Unspecified",o.truncated=d,o.difficult=0,o.bndbox={},o.bndbox.xmin=s,o.bndbox.ymin=l,o.bndbox.xmax=c,o.bndbox.ymax=u,o))})),e}(t),n.objects&&n.objects.length>0&&e.push({annotation:n})}})),e}function lk(){var t,e,n=a_();!function(t){var e=oc(),n=mu(),r={};r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.originalWidth=n.originalWidth,r.originalHeight=n.originalHeight,t[e].imageDimensions=r,t[e].shapes=Kh()}(n),t=ak(sk(n)),e=document.createElement("a"),t.generateAsync({type:"blob"}).then((function(t){var n;e.setAttribute("href",window.URL.createObjectURL(t)),e.setAttribute("download",(n=new Date,"visionai-".concat(n.getDay(),"-").concat(n.getMonth(),"-").concat(n.getFullYear(),".zip"))),e.dataset.downloadurl=["text/plain",e.download,e.href].join(":"),e.draggable=!0,e.classList.add("dragout"),e.click()}))}function ck(t,e){var n=function(t,e){var n=[];return t.forEach((function(t){if(t.imageDimensions){var r="";Object.keys(t.shapes).forEach((function(n){var i=t.shapes[n].shapeRef;"bndBox"===i.shapeName&&(r+=function(t,e,n){var r="",i=function(t,e,n){var r={};r.class=function(t,e){return t[e]}(n,t.shapeLabelText);var i=OL(t,e,6),o=i.left,a=i.top,s=i.width,l=i.height,c=s/e.originalWidth,u=l/e.originalHeight,d=(o+s/2)/e.originalWidth,h=(a+l/2)/e.originalHeight;return r.xmiddle=d.toFixed(6),r.ymiddle=h.toFixed(6),r.width=c.toFixed(6),r.height=u.toFixed(6),r}(t,e,n);return Object.keys(i).forEach((function(t){r+="".concat(i[t]," ")})),r}(i,t.imageDimensions,e),r="".concat(r.trim(),"\n"))})),r.length>0&&n.push({imageName:t.name.replace(",",""),data:r})}})),n}(t,e),r=[],i=/^([^.]+)/;return n.forEach((function(t){var e="".concat(i.exec(t.imageName)[0],".txt");r.push({imageName:e,data:t.data})})),r}function uk(){var t=a_();!function(t){var e=oc(),n=mu(),r={};r.scaleX=n.scaleX,r.scaleY=n.scaleY,r.originalWidth=n.originalWidth,r.originalHeight=n.originalHeight,t[e].imageDimensions=r,t[e].shapes=Kh()}(t);var e,n,r=function(){for(var t={},e=qd(),n=0,r=zd-1;r>=0;r-=1)t[e[r].text]=n,n+=1;return t}(),i=ck(t,r),o=function(t){var e="";return Object.keys(t).forEach((function(t){e+=t.replace(",",""),e+="\n"})),e}(r),a=function(t,e){var n=(new(ek())).folder("images");return t.forEach((function(t){n.file(t.imageName,t.data)})),n.file("classes.txt",e),n}(i,o);e=a,n=document.createElement("a"),e.generateAsync({type:"blob"}).then((function(t){var e;n.setAttribute("href",window.URL.createObjectURL(t)),n.setAttribute("download",(e=new Date,"visionai-".concat(e.getDay(),"-").concat(e.getMonth(),"-").concat(e.getFullYear(),".zip"))),n.dataset.downloadurl=["text/plain",n.download,n.href].join(":"),n.draggable=!0,n.classList.add("dragout"),n.click()}))}var dk=null;var hk=!1,fk=null,pk=null,mk=!1,yk=!1,gk=0,bk=null,vk=null,wk=!1,_k=null,xk=null,Ek=null,Ok=null,Ik=null;function Sk(t){pk===t||t.classList.contains("activeLabelEditIcon")||(hk?t!==fk&&(t.childNodes[1].style.display="none",t.childNodes[3].style.display=""):(t.style.backgroundColor="#f7f7f7",t.childNodes[1].style.display="none",t.childNodes[3].style.display=""))}function Ak(t){pk===t||t.classList.contains("activeLabelEditIcon")||(hk?t!==fk&&(t.childNodes[1].style.display="",t.childNodes[3].style.display="none"):(t.childNodes[1].style.display="",t.childNodes[3].style.display="none",t.style.backgroundColor=""))}function Lk(t){var e=document.createElement("canvas"),n=e.getContext("2d");n.font=tv(pk);var r=n.measureText(t),i=337/il();nv(_k)&&(i-=gk),r.width>i?_k.scrollLeft=r.width-312/il():_k.scrollLeft=0,e=null}function kk(t){t.stopPropagation(),t.preventDefault();var e=(t.clipboardData||window.clipboardData).getData("Text"),n=ov(pk,!0),r=n.position,i=r-n.highlightRangeOnPaste,o=Ey(e);pk.innerHTML=pk.innerHTML.slice(0,i)+o+pk.innerHTML.slice(r),iv(i+o.length,pk,!1,Lk)}function Tk(){_k.style.width="".concat(fk.clientWidth+gk,"px"),!yk&&parseInt(_k.style.width,10)>vk?(_k.style.maxWidth="".concat(vk,"px"),_k.style.overflowX="auto",yk=!0):yk&&parseInt(_k.style.width,10)<vk&&(_k.style.maxWidth="",_k.style.overflowX="hidden",yk=!1)}function Nk(t){return t.match(/\d+$/)?t.match(/\d+$/)[0]:-1}function Bk(t){if(t!==fk){var e=t.childNodes[9];!function(t){fk=t,pk=t.childNodes[9]}(t),function(t){t.style.backgroundColor="#f7f7f7",pk.contentEditable=!0,t.childNodes[5].style.display="",t.childNodes[1].style.display="none",t.childNodes[3].style.display="none",t.style.cursor="auto"}(t),Ay(e,_k),iv(e.innerHTML.length,e,!1,Lk),hk=!0}}function Ck(){var t=0,e=0;Object.keys(bk).forEach((function(n){var r,i,o=xk.insertRow(-1).insertCell(0);o.innerHTML=(r=bk[n].pendingName,'\n    <div class="machine-learning-modal-generated-labels-row" onClick="editMachineLearningLabel(this)" onMouseEnter="displayMachineLearningModalEditLabelButton(this)" onMouseLeave="hideMachineLearningModalEditLabelButton(this)">\n      <img class="defaultLabelEditIcon machine-learning-modal-generated-labels-edit-icon" src="assets/svg/edit-disabled.svg" alt="edit">\n      <img id="MLLabelHighlightedEditButton'.concat(i=t,'" class="defaultLabelEditIcon machine-learning-modal-generated-labels-edit-icon" style="display: none" src="assets/svg/edit.svg" alt="edit">\n      <img id="MLLabelActiveEditButton').concat(i,'" class="defaultLabelEditIcon machine-learning-modal-generated-labels-edit-icon reverse-icon" style="display: none" src="assets/svg/edit-blue.svg" alt="edit">\n      <img id="MLLabelDisabledEditButton').concat(i,'" class="defaultLabelEditIcon machine-learning-modal-generated-labels-edit-icon reverse-icon" style="display: none" src="assets/svg/edit-red.svg" alt="edit">\n      <div id="MLLabelText').concat(i,'" class="machine-learning-modal-generated-labels-input" spellcheck="false" onkeydown="MLLabelTextKeyDown(event)" onpaste="MLLabelTextPaste(event)">').concat(r,"</div>\n    </div>\n  ")),t+=1,e<bk[n].pendingName.length&&(e=bk[n].pendingName.length),function(t){var e=t.childNodes[1].childNodes[9];e.contentEditable=!0,setTimeout((function(){e.contentEditable=!1}))}(o)})),function(t,e){t>4?(Ok.style.marginTop="".concat(2/il(),"px"),Ok.style.marginBottom="".concat(6/il(),"px"),Ik.style.marginBottom="".concat(6/il(),"px")):(Ok.style.marginTop="",Ok.style.marginBottom="",Ik.style.marginBottom=""),xk.style.marginLeft=e<=3?"unset":"auto"}(t,e)}function Mk(t){var e,n,r;bk=t,gk=Qc(),Ik.innerHTML=el("ML_SUCCESSFUL_ANNOTATION_RESULT"),Ik.style.display="",Ck(),Ek.style.display="",Ek.style.height=(n=(e=Object.keys(bk).length)>5?5:e,r=(e>1?104:114)/il()+10*n,"".concat(r,"px")),wk||_k.childNodes[1].childNodes[1].childNodes.length>0&&(_k.style.maxHeight="".concat(5*_k.childNodes[1].childNodes[1].childNodes[0].getBoundingClientRect().height,"px"),wk=!0),fk=xk.childNodes[1].childNodes[0].childNodes[0],Tk(),fk=null}function Dk(){var t;Ek.style.display="none",t=document.createElement("tbody"),xk.childNodes[1]&&xk.replaceChild(t,xk.childNodes[1])}var Pk="",Fk=null,jk=null,Rk=null;function Uk(){var t;Fk.innerHTML=Fk.innerHTML.trim(),""===Fk.innerHTML&&(t=Pk,pk.innerHTML=t,window.setTimeout((function(){Tk()}),1)),Fk.innerHTML!==Pk&&Object.keys(Rk).forEach((function(t){Rk[t].pendingName===Pk&&(Rk[t].pendingName=Fk.innerHTML)}))}function zk(){Uk(),pk.contentEditable=!1,fk.style.backgroundColor="",fk.childNodes[1].style.display="",mk?(fk.childNodes[7].style.display="none",mk=!1):fk.childNodes[5].style.display="none",fk.style.cursor="pointer",setTimeout((function(){hk=!1,fk=null,pk=null}),1),Pk="",Fk=null}var Hk=null,Vk=null,Wk=null,Yk={isPopupSticky:!1,stickCoordinates:0,bottomPxOverride:"-1px"};function Gk(){ZA(Vk,Hk,Yk)}function $k(){Vk.style.display="none",Vk.style.bottom="",Hk.style.color="#747474",Yk.isPopupSticky=!1,Zc(!1)}function Xk(){gc()?$k():(Vk.style.right="-".concat((Wk.getBoundingClientRect().width+2)/2+11.5*il(),"px"),Vk.style.top="".concat(3*document.getElementsByClassName("settings-table-row-data")[0].getBoundingClientRect().height+3,"px"),Vk.style.bottom="",Vk.style.display="block",Hk.style.color="#c4c4c4",Gk(),Zc(!0))}var Kk=null,Zk=null,qk={isPopupSticky:!1,stickCoordinates:0};function Jk(){ZA(Kk,Zk,qk)}function Qk(){Kk.style.display="none",Kk.style.bottom="",qk.isPopupSticky=!1,Mc(!1),$k()}function tT(t){t=t||{target:{classList:[]}},_w()?function(t){if(hv)if(t.target.matches(".labelDropdownOption")){var e=_v?_v.shapeName:null,n=t.target.innerHTML;gv.innerHTML=n,tw(n),fw(),yw(),function(t,e){if(0!==t){$d(t);var n=Qd(e);qh(bv,n),Og(n.label),Yv(),Nh()}}(t.target.id.substring(11,12),n),vw(e,bv),bc("changed"),s_(document.getElementById("image-name").innerText)}else t.target.id==="labelText".concat(bv)||t.target.matches(".dropdown-content")||t.target.matches(".chromium-fake-dropdown-border-fix")||(t.target.id==="editButton".concat(bv)?wv||(vv=!0,Qb(Ev),mw(gv.innerHTML),pw()):"CANVAS"===t.target.nodeName||"toolkit-button-icon"===t.target.className||"toolkit-button-text"===t.target.className||t.target.id===xv?(mw(gv.innerHTML),yw()):(mw(gv.innerHTML),yw(),xg(),fp(),Gl()?(xb({}),Eb({})):$l()?(Wb({}),Yb({})):(nb({}),ib({})),_v&&"bndBox"===_v.shapeName&&Kg()))}(t):rc()?"settings-popup-item"!==t.target.classList[0]&&Qk():ic()&&"export-datasets-popup-item"!==t.target.classList[0]&&hL()}function eT(t){return 1===t.which}function nT(t,e){e&&!eT(e)||(vy(),t&&t())}function rT(t,e){e&&!eT(e)||t&&t()}function iT(t,e,n){n&&!eT(n)||t&&t(e)}function oT(t){var e;(function(t){var e,n,r;e=t,n=!(Wl()||$l()),r=[],e&&e.forEachObject((function(t){!function(t,e){e&&"bndBox"!==t.shapeName&&(t.perPixelTargetFind=!0),"bndBox"===t.shapeName?t.selectable=!1:(t.lockMovementX=!0,t.lockMovementY=!0)}(t,n),"point"===t.shapeName&&(t.set(cf.removablePoint()),r[t.pointId]=t)})),r.length<4&&r.forEach((function(t){t.set(cf.disabledRemovePoint())})),e.renderAll(),Xy=r})(e=t),fb=e,db=Qy(),yb=!1,gb=null,bb=null,vb=!1,null!=db&&wb(db),t.on("mouse:down",(function(t){xb(t)})),t.on("mouse:over",(function(t){var e;(e=t).target&&"point"===e.target.shapeName&&"red"===e.target.fill&&(e.target.stroke="red",fb.renderAll(),gb=e.target)})),t.on("mouse:up",(function(t){Eb(t)})),t.on("mouse:out",(function(t){var e;(e=t).target&&"point"===e.target.shapeName&&"red"===e.target.fill&&(e.target.stroke="black",fb.renderAll(),gb=null,vb||(bb=e.target))})),t.on("mouse:move",(function(t){yb?vb=!0:yb=!0}))}var aT=null,sT=null,lT=!1,cT=null,uT=!1;function dT(t){var e=cc();e?(kp.remove(jp),jp=null,function(t){var e,n;e=t,n=Bp?(Bp.get("points").length-=1,Bp):null,aT=e,lT=!1,sT=null,cT=null,uT=!1,n&&yg(aT,n,!0,!0),t.on("mouse:down",(function(t){var e;(e=t).target&&"point"===e.target.shapeName&&(lg(e.target.pointId),sT=null)})),t.on("mouse:over",(function(t){var e;(e=t).target&&"point"===e.target.shapeName&&"red"===e.target.fill&&(e.target.stroke="red",aT.renderAll(),sT=e.target)})),t.on("mouse:up",(function(t){})),t.on("mouse:out",(function(t){var e;(e=t).target&&"point"===e.target.shapeName&&(e.target.stroke="black",aT.renderAll(),sT=null,uT||(cT=e.target))})),t.on("mouse:move",(function(t){lT?uT=!0:lT=!0}))}(t)):e||oT(t)}function hT(t){t.discardActiveObject(),xg(),ab(),Gl()?(Lw(t),function(t){cc()?(yx(t,!0),tp(),vc(!1)):Kl()&&Jl()?(eg(),ng(),"polygon"===Zl()?(yx(t),_p()):"boundingBox"===Zl()&&(mx(t),Ep())):(eg(),Vw(t),kw(t,Qy()),xp(),vc(!0))}(t),vp(),_c(!1)):($l()&&(xc(!1),fg()),Lw(t),dT(t),function(t){var e=cc();e?function(t){t.defaultCursor="default",t.hoverCursor="default",t.renderAll(),t.forEachObject((function(t){"polygon"!==t.shapeName&&"bndBox"!==t.shapeName||(t.hoverCursor="default")}))}(t):e||function(t){t.defaultCursor="default",t.hoverCursor="default",function(t){t.forEachObject((function(t){t.hoverCursor="default"}))}(t)}(t)}(t),ql()&&(Ac(!0),Lc(!0)),Cf(Wf),Rf=Pf,zf===Pf&&np(),Hf!==Pf||cc()||op(),Uf===Pf&&lp(),tp(),vc(!1),Sc(!1),_c(!0))}function fT(){var t,e,n;ic()?hL():(t=Vh(),e=t.boundingBoxes,n=t.polygons,0===e?(function(){for(var t=0;t<aL.length;t+=1)aL[t].style.color="#bfbfbf",sL[t].disabled=!0,sL[t].style.cursor="",!0===sL[t].checked&&(sL[t].checked=!1,qA=!1,uL())}(),0===n?(function(){for(var t=0;t<iL.length;t+=1)iL[t].style.color="#bfbfbf",oL[t].disabled=!0,oL[t].style.cursor="",!0===oL[t].checked&&(oL[t].checked=!1,qA=!1,uL())}(),uL()):dL()):(function(){for(var t=0;t<sL.length;t+=1)aL[t].style.color="black",sL[t].disabled=!1,sL[t].style.cursor="pointer"}(),dL()),KA(nL,eL),nL.style.display="block",cL(),Dc(!0))}var pT=null,mT=null;function yT(){pT.style.marginTop="",pT.style.marginBottom="",mT.style.display="none"}function gT(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var bT=null,vT=!1,wT=!1,_T=!1,xT=[],ET={element:document.createElement("script"),status:{download:"waiting"}},OT={element:document.createElement("script"),status:{download:"waiting"}};function IT(){var t;rE(),t=el("ML_MODAL_ERROR"),tE(),Xx.style.display="",Xx.innerHTML=t,Wx.style.marginTop="".concat(4/il(),"px"),document.getElementById("machine-learning-modal-initiate-retry-button").style.display="",zx.style.marginBottom="".concat(6/il(),"px"),vT=!1}function ST(t,e,n,r,i){for(var o,a,s,l,c,u={},d=0;d<t.length;d+=1)u[e[d]]=t[d];var h;r(u),rE(),oE(),c=u,0===Object.keys(c).length&&c.constructor===Object?n():(Rx.style.display="",zx.style.marginBottom="".concat(7/il(),"px"),("all"===i||"new"===i&&Object.prototype.hasOwnProperty.call(u,oc()))&&function(t){var e,n,r,i=Tx(),o=i.allImageData,a=i.currentlySelectedImageId;kx(o,a),px(xx),e=t[a],n=Sx(o[a]),r=Ax(o[a]),e.forEach((function(t){var e=Ix(t,n,r);Ex.push(e),xx.add(e)}))}(u),o=u,a=Tx(),s=a.allImageData,l=a.currentlySelectedImageId,Object.keys(o).forEach((function(t){var e,n,r;o[t].length>0&&(e=l===parseInt(t,10),n=s[t],e?function(t){t.childNodes[1].classList.replace("image-list-thumbnail-default","image-list-thumbnail-machine-learning-selected"),p_(t.childNodes[0].id)}(n.thumbnailElementRef):((r=n.thumbnailElementRef).childNodes[1].classList.replace("image-list-thumbnail-default","image-list-thumbnail-machine-learning"),r.childNodes[1].style.display="block",p_(r.childNodes[0].id)))})),Kx.style.display="",jx.classList.toggle("checkmark"),Jx.style.color="#1e6d1e",h=el("FINISHED"),eE(),Jx.innerHTML=h,Jx.style.display=""),vT=!1}function AT(t,e,n,r,i,o){var a;wT||(t.length>0?(a=t.splice(0,1)[0],bT.detect(a.data)).then((function(a){e.push(a),AT(t,e,n,r,i,o)})).catch((function(t){console.error(t),IT()})):ST(e,n,r,i,o))}function LT(t,e,n){var r,i=a_(),o=[];xT=[];for(var a=0;a<i.length;a+=1){var s=i[a];("all"===n||"new"===n&&!s.analysedByML)&&(s.analysedByML=!0,xT.push(s),o.push(a))}AT(function(t){if(Array.isArray(t))return gT(t)}(r=xT)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return gT(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gT(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[],o,t,e,n)}function kT(t){t.download="complete"}function TT(t,e,n,r){wT||("complete"!==t.status.download?("in_progress"===t.status.download&&(document.head.removeChild(t.element),t.element=document.createElement("script")),t.element.onload=n.bind(this,t.status),t.element.onerror=r,t.status.download="in_progress",t.element.src=e,document.head.appendChild(t.element)):n(t.status))}function NT(t,e,n){var r,i;wT&&(wT=!1),a_().length>0?(Hx.style.display="",iE(),zx.style.display="none",Gx.classList.replace("popup-cancel-button","popup-dimmed-cancel-button"),setTimeout((function(){Gx.addEventListener("mouseover",sE)}),100),eE(),Vx.style.display="",Gx.style.marginRight="".concat(3/il(),"px"),zx.style.marginBottom="".concat(2/il(),"px"),aE(),vT=!0,bT?LT(t,e,n):new Promise((function(t,e){TT(ET,"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.1",t,e)})).then((function(t){return kT(t),new Promise((function(t,e){TT(OT,"https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.1.0",t,e)}))})).then((function(t){return kT(t),new Promise((function(t,e){if(!wT){var n=window.cocoSsd;_T||(_T=!0,n.load().then((function(e){bT=e,wT||t()})).catch((function(){_T=!1,e()})))}}))})).then((function(){return LT(t,e,n)})).catch((function(){return IT()}))):(Qx.style.zIndex=3,Qx.style.border="2px solid rgb(73, 178, 218)",Qx.style.marginTop="0px",Qx.style.height="23px",Qx.style.marginRight="-2px",Qx.childNodes[1].style.paddingTop="3px",setTimeout((function(){Yx.classList.replace("popup-label-button","popup-label-button-disabled")})),r=el("ML_MODAL_PLEASE_UPLOAD_IMAGE"),$x.innerHTML=r,Wx.style.marginTop="".concat(4/il(),"px"),i="".concat(3/il(),"px"),zx.style.marginBottom=i,function(t){Ux.style.height=t}("".concat(sl?277/il():273/il(),"px")),Fx=!0)}function BT(){wT=!0,vT=!1,xT.forEach((function(t){t.analysedByML=!1}))}function CT(){return vT}function MT(t){CT()?BT():(t(!0),uE()),dE()}function DT(t){uE(),t()}function PT(t,e,n){n&&nE(),function(){for(var t=a_(),e=!1,n=!1,r=0;r<t.length;r+=1)if(t[r].analysedByML?e=!0:n=!0,e&&n)return!0;return!1}()?(aE(),oE(),Zx.style.display="",qx.style.display=""):NT(t,e,"all")}function FT(t,e,n){Zx.style.display="none",qx.style.display="none",NT(t,e,n)}function jT(t,e,n){window.startMachineLearning=PT.bind(this,t,e,!1),window.changeInitiateMLToNextView=DT.bind(this,t),window.cancelMLModal=MT.bind(this,n),window.retryMachineLearning=PT.bind(this,t,e,!0),window.startMachineLearningWithCoverage=FT.bind(this,t,e)}function RT(t){"Enter"===t.key?(zk(),Lk("")):window.setTimeout((function(){Tk(),function(t){sl&&"Backspace"===t&&ev(pk)}(t.key),""===Oy(pk.innerHTML)?(fk.childNodes[5].style.display="none",fk.childNodes[7].style.display="",mk=!0):mk&&(fk.childNodes[5].style.display="",fk.childNodes[7].style.display="none",mk=!1)}),1)}function UT(t){Object.keys(jk).forEach((function(t){jk[t].forEach((function(t){t.class=Rk[t.class].pendingName}))})),Fc(!1),Px(jk,!0),t(!1),Dk()}function zT(t){!function(t){if(t.childNodes[9]!==Fk){var e=(Fk=t.childNodes[9]).innerHTML;Pk=e}}(t),Bk(t)}function HT(t){Dx(),t(!0),yT()}function VT(t){window.closeMachineLearningModal=HT.bind(this,t)}var WT=1,YT={},GT=null,$T=null;function XT(t){YT=t}function KT(){switch(WT){case 1:dE(),$T=function(){return CT()?(BT(),!1):(uE(),Dx(),Bx(),Nx(),!0)},WT+=1;break;case 2:!function(){if(0===Object.keys(YT).length&&YT.constructor===Object)return!0;var t=!0;return Object.keys(YT).forEach((function(e){YT[e].length>0&&(t=!1)})),t}()?(jk=YT,n={},Object.keys(jk).forEach((function(t){for(var e=jk[t],r=0;r<e.length;r+=1)Object.prototype.hasOwnProperty.call(n,e[r].class)||(n[e[r].class]={pendingName:e[r].class})})),Mk(Rk=n),Fc(!0),$T=function(){return Dx(),Bx(),Nx(),Dk(),!0}):(t="".concat(19/il(),"px"),e="".concat(15/il(),"px"),pT.style.marginTop=t,pT.style.marginBottom=e,pT.innerHTML=el("ML_NO_ANNOTATED_IMAGES_RESULT"),pT.style.display="",mT.style.display="",$T=function(){return Dx(),yT(),!0}),WT+=1;break;case 3:WT+=1}var t,e,n}function ZT(t){(function(t){t?Kl()&&("polygon"===Zl()?window.createNewPolygon():"boundingBox"===Zl()&&window.createNewBndBox()):window.editShapes()})(t),GT.style.display="none",Md(Sd),WT=1,KT(),Wc(!1)}var qT=null;function JT(){var t;(t=qT).backgroundImage&&(Lw(t),mx(t),yc()&&Nu(_d),tp(),vc(!1),Ep(),wp(),wc(!1),Ic("boundingBox"))}function QT(){var t;(t=qT).backgroundImage&&(Lw(t),yx(t),_p(),tp(),vc(!1),wc(!1),Ic("polygon"))}function tN(){var t;(t=qT).discardActiveObject(),$l()?pg()?(Lw(t),bx(t),fg(),Ny(t)):(fg(),bp(),xc(!1),Lw(t),function(t){Kl()&&(Jl()||Ql())?(ng(),"polygon"===Zl()?(yx(t),_p()):"boundingBox"===Zl()&&(mx(t),Ep())):(Vw(t),kw(t,Ob),xp(),vc(!0))}(t)):(Lw(t),bx(t),Ny(t),Cf(Yf),Uf=Pf,zf===Pf&&np(),Hf===Pf&&op(),Rf===Pf&&up(),tp(),vc(!1),xc(!0))}function eN(){gx(qT)}function nN(){hT(qT)}function rN(){fT()}function iN(){setTimeout((function(){DA.style.display="",Vc(!0)}),60),Pd(Ld,kd)}function oN(){setTimeout((function(){GT.style.display="",Wc(!0)}),60),Pd(Ld,kd)}function aN(t){oy(0,t)}function sN(){rc()?Qk():(KA(Kk,Zk),Kk.style.display="block",Jk(),Mc(!0))}function lN(){var t;(t=qT).discardActiveObject(),Wl()||($l()?function(t){pg()&&(bx(t),fg(),Ny(t)),fg(),xc(!1),Lw(t),Vw(t),kw(t,Qy())}(t):Gl()?function(t){cc()&&(Jp(),fp()),Lw(t),eg(),Vw(t),kw(t,Qy()),_c(!1)}(t):function(t){ql()?Ac(!0):Ac(!1),cc()&&(Jp(),fp()),(uc()||"boundingBox"===Zl())&&ax(),Lw(t),kw(t,null,$l()),Hw(t)}(t),Yl()&&wc(!1),xp(),Sc(!1),vc(!0)),wp()}function cN(t){return cN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cN(t)}function uN(){uN=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==cN(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(cN(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function dN(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function hN(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function fN(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){hN(o,r,i,a,s,"next",t)}function s(t){hN(o,r,i,a,s,"throw",t)}a(void 0)}))}}var pN=0,mN=null,yN=null,gN=!1,bN=null;function vN(){var t=Oy(mN.value);""===t?(ah.style.backgroundColor="",setTimeout((function(){ah.classList.replace("popup-label-button","popup-label-button-disabled")}))):"new label"===t?ah.style.backgroundColor="":(ah.style.backgroundColor="rgb(205, 232, 205)",setTimeout((function(){ah.classList.replace("popup-label-button-disabled","popup-label-button")})))}function wN(){Kl()?"polygon"===Zl()?rm():"boundingBox"===Zl()&&ox():(eN(),yc()&&md())}function _N(){""!==Oy(mN.value)&&(bc("changed"),Oh(),R_(V_,sh.value),yc()?Od(W_):xu(W_),Nh(),H_=!1,wN(),p_(),gN=!0)}function xN(){$_()&&(bc("init"),Oh(),G_(),wN())}function EN(t){if(mN.createTextRange){var e=mN.createTextRange();return e.move("character",t),e.select(),!0}return mN.selectionStart||0===mN.selectionStart?(mN.focus(),mN.setSelectionRange(t,t),!0):(mN.focus(),!1)}function ON(t){if(bN){if("ArrowDown"===t){var e=bN.parentElement.nextSibling;e&&e.childNodes[0].childNodes[0].childNodes[0].dispatchEvent(new Event("mousedown"))}else if("ArrowUp"===t){var n=bN.parentElement.previousSibling;n&&n.childNodes[0].childNodes[0].childNodes[0].dispatchEvent(new Event("mousedown"))}}else(yN.childNodes[0].childNodes[0]||yN.childNodes[1].childNodes[0]).childNodes[0].childNodes[0].childNodes[0].dispatchEvent(new Event("mousedown"));vN()}function IN(){xg(),Jp(),ax(),xN(),ab(),ql()?Ac(!0):Ac(!1),Sc(!1),Yl()&&(Gl()&&eg(),$l()&&hg(),rg(),wp(),wc(!1)),fp(),wp()}function SN(){ng(),X_&&(X_.discardActiveObject(),X_.renderAll()),IN()}var AN=null;function LN(){Kl()?(Mh(Sd,Ld,kd),Oc(!1)):(Mh(200,Ad,Td),Oc(!0))}function kN(t){tc()?(M_(!1),kc(!1)):(M_(!0),kc(!0))}window.windowResize=function(){if($s(),ec()>1)!function(){if(uu(),nu.maximumCanvasHeight<iu.height){var t=su();nu.maximumCanvasWidth<t.width&&(t=lu(t)),ru.setWidth(Math.ceil(t.width)),ru.setHeight(Math.ceil(t.height))}else if(nu.maximumCanvasWidth<iu.width){var e=lu(iu);ru.setWidth(Math.ceil(e.width)),ru.setHeight(Math.ceil(e.height))}else ru.setWidth(Math.ceil(iu.width)),ru.setHeight(Math.ceil(iu.height));cu()}(),oy(0,null,!0);else if(gu()){var t=yu();Dh.updatePolygonOffsetProperties(t),xf(t,AN)}rc()?(Jk(),gc()&&Gk()):ic()&&cL(),Ih(!0)};var TN=null;function NN(){gc()&&$k()}function BN(t,e){t(TN),e&&(this.checked=!this.checked)}var CN=null;var MN=null,DN=null,PN=null;function FN(){DN=document.getElementById("welcome-modal-parent"),PN=document.getElementById("welcome-modal-contour-animation-parent"),DN.addEventListener("mousemove",Cu),Gc(!0),setTimeout((function(){DN.style.transitionDuration="".concat(.8,"s"),DN.style.MozTransitionDuration="".concat(1,"s"),DN.style.opacity="1"}),800)}var jN=[{id:"welcome-modal-title-welcome-text",dictionaryKey:"WELCOME"},{id:"welcome-modal-description-part-1",dictionaryKey:"WELCOME_MODAL_DESCRIPTION_PAR_1"},{id:"welcome-modal-description-part-2",dictionaryKey:"WELCOME_MODAL_DESCRIPTION_PAR_2"},{id:"welcome-modal-description-part-3",dictionaryKey:"WELCOME_MODAL_DESCRIPTION_PAR_3"},{id:"welcome-modal-description-part-4",dictionaryKey:"WELCOME_MODAL_DESCRIPTION_PAR_4"},{id:"start-text",dictionaryKey:"START"},{id:"labeller-modal-title",dictionaryKey:"LABEL_NAME"},{id:"labeller-modal-submit-button",dictionaryKey:"SUBMIT"},{id:"labeller-modal-cancel-button",dictionaryKey:"CANCEL"},{id:"machine-learning-modal-title",dictionaryKey:"MACHINE_LEARNING"},{id:"machine-learning-modal-loading-text",dictionaryKey:"LOADING"},{id:"machine-learning-modal-initiate-start-button",dictionaryKey:"START"},{id:"machine-learning-modal-initiate-next-button",dictionaryKey:"NEXT"},{id:"machine-learning-modal-initiate-retry-button",dictionaryKey:"RETRY"},{id:"machine-learning-modal-initiate-cancel-button",dictionaryKey:"CANCEL"},{id:"machine-learning-modal-no-objects-close-button",dictionaryKey:"CLOSE"},{id:"machine-learning-modal-initiate-all-images-button",dictionaryKey:"ALL_IMAGES"},{id:"machine-learning-modal-initiate-new-images-button",dictionaryKey:"NEW_IMAGES"},{id:"machine-learning-modal-generated-labels-submit-button",dictionaryKey:"SUBMIT"},{id:"label-list-title",dictionaryKey:"LABELS"},{id:"upload-datasets-modal-upload-datasets-classes-table-title",dictionaryKey:"CLASSES"},{id:"upload-datasets-modal-upload-datasets-annotations-table-title",dictionaryKey:"ANNOTATIONS_JSON"},{id:"upload-datasets-modal-title",dictionaryKey:"UPLOAD_DATASETS"},{id:"upload-datasets-modal-select-format-title",dictionaryKey:"CHOOSE_FORMAT"},{id:"upload-datasets-modal-upload-datasets-images-table-title",dictionaryKey:"IMAGES"},{id:"upload-datasets-modal-start-button",dictionaryKey:"START"},{id:"upload-datasets-modal-next-button",dictionaryKey:"NEXT"},{id:"upload-datasets-modal-back-button",dictionaryKey:"BACK"},{id:"upload-datasets-modal-upload-datasets-upload-button",dictionaryKey:"UPLOAD"},{id:"upload-datasets-modal-cancel-button",dictionaryKey:"CANCEL"},{id:"upload-datasets-modal-yes-button",dictionaryKey:"YES"},{id:"upload-datasets-modal-no-button",dictionaryKey:"NO"},{id:"upload-datasets-modal-finish-button",dictionaryKey:"FINISH"},{id:"export-datasets-popup-export-button",dictionaryKey:"EXPORT"},{id:"settings-popup-labels-visibility-text",dictionaryKey:"LABEL_VISIBILITY"},{id:"settings-popup-movable-objects-text",dictionaryKey:"MOVABLE_OBJECTS"},{id:"settings-popup-continuous-drawing-text",dictionaryKey:"CONTINUOUS_DRAWING"},{id:"settings-popup-bounding-box-crosshair-text",dictionaryKey:"BOUNDING_BOX_CROSSHAIR"},{id:"settings-popup-bounding-box-crosshair-visibility-text",dictionaryKey:"VISIBILITY"},{id:"settings-popup-bounding-box-crosshair-color-text",dictionaryKey:"COLOR"},{id:"edit-shapes-button-popover",dictionaryKey:"EDIT_SHAPES"},{id:"bounding-box-button-popover",dictionaryKey:"NEW_BOUNDING_BOX"},{id:"polygon-button-popover",dictionaryKey:"NEW_POLYGON"},{id:"add-points-button-popover",dictionaryKey:"ADD_NEW_POINTS_TO_POLYGON"},{id:"remove-points-button-popover",dictionaryKey:"REMOVE_POLYGON_POINTS"},{id:"upload-datasets-button-popover",dictionaryKey:"UPLOAD_DATASETS"},{id:"export-datasets-button-popover",dictionaryKey:"EXPORT_DATASETS"},{id:"export-datasets-popup-title",dictionaryKey:"CHOOSE_FORMAT_COLON"},{id:"machine-learning-button-popover",dictionaryKey:"MACHINE_LEARNING"},{id:"zoom-in-button-popover",dictionaryKey:"ZOOM_IN"},{id:"zoom-out-button-popover",dictionaryKey:"ZOOM_OUT"},{id:"settings-button-popover",dictionaryKey:"SETTINGS"},{id:"remove-labels-button-popover",dictionaryKey:"REMOVE_LABEL"},{id:"remove-images-button-popover",dictionaryKey:"REMOVE_IMAGE"},{id:"upload-images-button-popover",dictionaryKey:"UPLOAD_IMAGES"},{id:"image-list-title",dictionaryKey:"IMAGES"},{id:"remove-images-modal-title",dictionaryKey:"REMOVE_IMAGE"},{id:"remove-images-modal-description",dictionaryKey:"REMOVE_IMAGE_DESCRIPTION"},{id:"remove-images-modal-checkbox-description",dictionaryKey:"REMOVE_IMAGE_NOT_SHOW_AGAIN"},{id:"remove-images-modal-yes-button",dictionaryKey:"YES"},{id:"remove-images-modal-no-button",dictionaryKey:"NO"},{id:"image-name",dictionaryKey:"IMAGE_NAME"},{id:"previous-image-button-popover-text",dictionaryKey:"PREVIOUS_IMAGE"},{id:"next-image-button-popover-text",dictionaryKey:"NEXT_IMAGE"},{id:"format-option-checkbox-popover-4",dictionaryKey:"BOUNDING_BOXES_ONLY"},{id:"format-option-checkbox-popover-1",dictionaryKey:"BOUNDING_BOXES_ONLY"},{id:"format-option-checkbox-popover-5",dictionaryKey:"BOUNDING_BOXES_ONLY"},{id:"format-option-checkbox-popover-2",dictionaryKey:"BOUNDING_BOXES_ONLY"},{id:"format-option-checkbox-popover-6",dictionaryKey:"BOUNDING_BOXES_ONLY"},{id:"format-option-checkbox-popover-3",dictionaryKey:"BOUNDING_BOXES_ONLY"}];function RN(){jN.forEach((function(t){t.element.innerHTML=el(t.dictionaryKey)}))}function UN(){var t;DN.style.display="none",PN.style.display="none",Gc(!1),Md(Sd),$w(),DA=document.getElementById("upload-datasets-modal-parent"),pO(RA),lO=document.getElementById("upload-datasets-modal-description"),cO=document.getElementById("upload-datasets-modal-start-button"),uO=document.getElementById("upload-datasets-modal-cancel-button"),dO=document.getElementById("upload-datasets-modal-buttons"),BO(RA),vO=document.getElementById("upload-datasets-modal-select-format-table"),bO=document.getElementById("upload-datasets-modal-next-button"),mO=document.getElementById("upload-datasets-modal-description"),yO=document.getElementById("upload-datasets-modal-cancel-button"),gO=document.getElementById("upload-datasets-modal-buttons"),wO=document.getElementById("upload-datasets-modal-select-format-outer-container"),rS(RA),qI=document.getElementById("upload-datasets-modal-yes-button"),JI=document.getElementById("upload-datasets-modal-no-button"),QI=document.getElementById("upload-datasets-modal-description"),tS=document.getElementById("upload-datasets-modal-buttons"),MO=document.getElementById("upload-datasets-modal-upload-datasets-table-1"),DO=document.getElementById("upload-datasets-modal-upload-datasets-table-2"),PO=document.getElementById("upload-datasets-modal-upload-datasets-table-3"),zO=document.getElementById("upload-datasets-modal-buttons"),CO=document.getElementById("upload-datasets-modal-upload-datasets-title"),KO=document.getElementById("upload-datasets-modal-upload-datasets-outer-container"),FO=document.getElementById("upload-datasets-modal-back-button"),HO=document.getElementById("upload-datasets-modal-upload-datasets-upload-button"),XO=document.getElementById("upload-datasets-modal-upload-datasets-upload-trigger"),UO=document.getElementById("upload-datasets-modal-finish-button"),jO=document.getElementById("upload-datasets-modal-upload-datasets-images-table"),$O=document.getElementById("upload-datasets-modal-upload-datasets-images-table-outer-container"),VO=document.getElementById("upload-datasets-modal-upload-datasets-annotations-table-title"),ZO=document.getElementById("upload-datasets-modal-upload-datasets-annotations-table-outer-container"),RO=document.getElementById("upload-datasets-modal-upload-datasets-classes-table"),WO=document.getElementById("upload-datasets-modal-upload-datasets-annotations-table"),YO=document.getElementById("upload-datasets-modal-parent"),RA(),window.cancelUploadDatasetsModal=UA,FA=UA,jA=zA,GT=document.getElementById("machine-learning-modal-parent"),jT(KT,XT,ZT),Qx=document.getElementById("upload-images-button"),Ux=document.getElementById("machine-learning-modal-parent"),jx=document.getElementById("machine-learning-modal-check-mark"),Vx=document.getElementById("machine-learning-modal-loading-wheel"),Hx=document.getElementById("machine-learning-modal-loading-text"),zx=document.getElementById("machine-learning-modal-description"),Yx=document.getElementById("machine-learning-modal-initiate-start-button"),Rx=document.getElementById("machine-learning-modal-initiate-next-button"),Gx=document.getElementById("machine-learning-modal-initiate-cancel-button"),Wx=document.getElementById("machine-learning-modal-initiate-machine-learning-buttons"),Xx=document.getElementById("machine-learning-modal-error-messages"),$x=document.getElementById("machine-learning-modal-info-messages"),Kx=document.getElementById("machine-learning-modal-check-mark-parent"),Jx=document.getElementById("machine-learning-modal-progress-messages"),Zx=document.getElementById("machine-learning-modal-initiate-all-images-button"),qx=document.getElementById("machine-learning-modal-initiate-new-images-button"),function(t){window.MLLabelTextKeyDown=RT,window.MLLabelTextPaste=kk,window.displayMachineLearningModalEditLabelButton=Sk,window.hideMachineLearningModalEditLabelButton=Ak,window.editMachineLearningLabel=zT,window.submitMLGeneratedLabels=UT.bind(this,t)}(ZT),vk=352/il(),Ik=document.getElementById("machine-learning-modal-description"),_k=document.getElementById("machine-learning-modal-generated-labels"),Ok=document.getElementById("machine-learning-modal-generated-labels-submit-button"),xk=document.getElementById("machine-learning-modal-generated-labels-table"),Ek=document.getElementById("machine-learning-modal-generated-labels-outer-container"),VT(ZT),pT=document.getElementById("machine-learning-modal-description"),mT=document.getElementById("machine-learning-modal-no-objects-buttons"),KT(),rl=(t=nl>1&&"CN"===Qs)?1:0,document.documentElement.style.setProperty("--modal-button-font-delta","".concat(rl,"px")),document.documentElement.style.setProperty("--popup-button-font-delta","".concat(t?1.5:0,"px"))}function zN(t){var e;Qs=e=t,function(t,e){var n=Ks()?JSON.parse(Ks()):{};n[t]=e,localStorage.setItem(Xs,JSON.stringify(n))}(qs,e),tl=Js[e],RN()}var HN=null,VN=!0,WN=null,YN=null;function GN(){sO()||_w()||"disabled"===ip()||(tT(),uc()?dx():ql()&&"boundingBox"===Zl()?rx():(window.createNewBndBox(),tf(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove"))))}function $N(){if(!sO()&&!_w()&&"disabled"!==ip()){if(tT(),uc())return;ql()&&"boundingBox"===Zl()?rx():(window.createNewBndBox(),tf(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove")))}}function XN(){uc()&&dx()}function KN(){sO()||_w()||lc()||"disabled"===Rf||(tT(),cc()&&Gl()?VN&&(function(){if(uT)sT&&lg(sT.pointId);else{if(cT)lg(cT.pointId);else{var t=Up;t&&(lg(t.pointId),t.state="removed")}uT=!0}sT=null}(),VN=!1):!cc()&&Gl()?VN&&(vb?gb&&(lg(gb.pointId,!0),$c(!0)):(bb&&(lg(bb.pointId),$c(!0)),vb=!0),gb=null,VN=!1):(window.removePoint(document.getElementById("remove-points-button")),tf(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove"))))}var ZN=null;var qN,JN,QN,tB,eB,nB,rB,iB,oB,aB,sB=null;function lB(t){qT=t,HN=t,function(t){Bd=t}(t),function(t){L_=t}(t),function(t){Yh=t}(t),function(t){xx=t}(t),function(t){AN=t}(t),function(t){F_=t}(t),function(t){CN=t,TN=t}(t),function(t){vx=t}(t),function(t){ZN=t,HE=t,ru=t,function(t){n_=t}(t)}(t),function(t){Rm=t,jm=ec(),sl?(Im=Rm,ly(Mm),Hm=Cm):(hm=Rm,ly(_m),Hm=wm)}(t)}function cB(t,e,n,r){vy(),SN(),e.resetCanvasEventsToDefault(),e.uploadImageFiles(n),r.target.value=""}function uB(t,e,n,r){r&&!eT(r)||(vy(),function(t){return"previous"===t?e_>0:"next"===t?e_<t_.length-1:t!==e_}(n)&&(sB="canvas1"===Sw?(Sw="canvas2",Iw):(Sw="canvas1",Ow),Pu=Fu,Fu=sB,lB(sB),SN(),t&&t(n),e&&e()))}function dB(){document.getElementById("uploadImages").click()}function hB(t){ZN.discardActiveObject(),eO(t)}function fB(){window.switchImage=uB.bind(this,S_,eN),window.triggerImageUpload=nT.bind(this,dB),window.uploadImages=cB.bind(this,this,{uploadImageFiles:hB,resetCanvasEventsToDefault:eN}),window.removeImage=rT.bind(this,WE)}function pB(t){return pB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pB(t)}function mB(){mB=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==pB(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(pB(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function yB(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function gB(){return gB=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){yB(o,r,i,a,s,"next",t)}function s(t){yB(o,r,i,a,s,"throw",t)}a(void 0)}))}}(mB().mark((function t(){return mB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Qw=document.getElementById("image-list-image-container"),Iy=t_,fB(),e=void 0,(e=document.getElementById("remove-images-button")).addEventListener("mouseenter",(function(){Jw&&(i_=!0,Jw.style.borderColor="#ff4d4d")})),e.addEventListener("mouseleave",(function(){i_=!1,Jw&&(Jw.style.borderColor="")})),t.next=5,oO();case 5:case"end":return t.stop()}var e}),t)}))),gB.apply(this,arguments)}function bB(t){return t instanceof Element||t instanceof HTMLDocument}function vB(t,e,n,r){r&&!eT(r)||bB(n)&&n.classList.contains("toolkit-button-disabled")||(vy(),!cc()&&!$_()||Kl()?e&&e():(SN(),t()))}function wB(){_x()}function _B(){window.removeLabel=vB.bind(this,eN,wB)}function xB(t,e){e&&!eT(e)||(vy(),SN(),t&&t())}function EB(t,e,n){n&&!eT(n)||(vy(),Gl()&&cc()?t&&t():e&&(SN(),e()))}function OB(t,e){e&&!eT(e)||(vy(),SN(),t.forEach((function(t){t()})))}function IB(t,e,n){n&&!eT(n)||bB(e)&&e.classList.contains("toolkit-button-disabled")||(vy(),$_()||t&&t())}function SB(t,e,n){n&&!eT(n)||bB(e)&&e.classList.contains("toolkit-button-disabled")||(vy(),$_()||cc()||($l()||IN(),t&&t()))}function AB(t){return AB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AB(t)}function LB(){LB=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,a=Object.create(o.prototype),s=new T(r||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var h="suspendedStart",f="suspendedYield",p="executing",m="completed",y={};function g(){}function b(){}function v(){}var w={};c(w,a,(function(){return this}));var _=Object.getPrototypeOf,x=_&&_(_(N([])));x&&x!==n&&r.call(x,a)&&(w=x);var E=v.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function n(i,o,a,s){var l=d(t[i],t,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==AB(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,i){n(t,r,e,i)}))}return o=o?o.then(i,i):i()}})}function S(e,n,r){var i=h;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var c=d(e,n,r);if("normal"===c.type){if(i=r.done?m:f,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(e,n){var r=n.method,i=e.iterator[r];if(i===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,A(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=d(i,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}throw new TypeError(AB(e)+" is not iterable")}return b.prototype=v,i(E,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:b,configurable:!0}),b.displayName=c(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,c(t,l,"GeneratorFunction")),t.prototype=Object.create(E),t},e.awrap=function(t){return{__await:t}},O(I.prototype),c(I.prototype,s,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new I(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),k(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function kB(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function TB(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){kB(o,r,i,a,s,"next",t)}function s(t){kB(o,r,i,a,s,"throw",t)}a(void 0)}))}}MN=["Win","Linux","Mac"].find((function(t){return-1!==navigator.appVersion.indexOf(t)}))||"Win",$s(),document.getElementById("canvas-wrapper-parent"),document.getElementById("zoom-overflow-wrapper-parent"),qc=document.getElementById("left-side-bar"),Jc=document.getElementById("right-side-bar"),qN="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap",JN="stylesheet",(QN=document.createElement("link")).onload=function(){!function(){if(!ic()){var t=document.getElementById("export-datasets-popup-parent");t.style.visibility="hidden",t.style.display="block",setTimeout((function(){ic()||(t.style.display="none"),t.style.visibility=""}),0)}}()},QN.onerror=function(){console.error("Failed to load custom fonts")},QN.rel=JN,QN.href=qN,document.head.appendChild(QN),sl&&function(t,e,n){var r=t.createElement("div");r.innerHTML='<link rel="'.concat(n,'" href="').concat(e,'">'),t.head.appendChild(r)}(document,qN,JN),aB=1920/window.screen.width,nl=aB>1.1?1.1:aB,document.documentElement.style.setProperty("--screen-size-delta",nl),rB=nl,(iB={}).welcomeModalStartButton=document.getElementById("welcome-modal-start-button"),iB.labellerModalSubmitButtonElement=document.getElementById("labeller-modal-submit-button"),iB.labellerModalCancelButtonElement=document.getElementById("labeller-modal-cancel-button"),iB.buttonClassElements=document.getElementsByClassName("buttons"),iB.popupLabelButtonClassElements=document.getElementsByClassName("popup-label-button"),iB.popupLabelDisabledButtonClassElements=document.getElementsByClassName("popup-label-button-disabled"),iB.exportDatasetsPopupExportButton=document.getElementById("export-datasets-popup-export-button"),oB=iB,rB>1.000001?function(t,e){t.labellerModalSubmitButtonElement.style.paddingBottom="".concat(5/e,"px"),t.labellerModalCancelButtonElement.style.paddingBottom="".concat(5/e,"px"),ll(t.buttonClassElements,"lineHeight","initial"),ll(t.popupLabelButtonClassElements,"paddingTop","".concat(7/e,"px")),ll(t.popupLabelDisabledButtonClassElements,"paddingTop","".concat(7/e,"px")),t.exportDatasetsPopupExportButton.style.paddingTop="".concat(6/e,"px"),sl||(t.welcomeModalStartButton.style.marginTop="".concat(3.5/e,"px"))}(oB,rB):function(t){t.labellerModalSubmitButtonElement.style.paddingBottom="4px",t.labellerModalCancelButtonElement.style.paddingBottom="4px",ll(t.buttonClassElements,"lineHeight",1.35),ll(t.popupLabelButtonClassElements,"paddingTop","6px"),ll(t.popupLabelDisabledButtonClassElements,"paddingTop","6px"),sl?(t.exportDatasetsPopupExportButton.style.paddingTop="5px",t.exportDatasetsPopupExportButton.style.paddingBottom="7px"):t.exportDatasetsPopupExportButton.style.paddingTop="6px"}(oB),ol=sl?10:0,Ys().Object.prototype.transparentCorners=!1,Ow=new(Ys().Canvas)("c",{selection:!1,width:1,height:1}),Iw=new(Ys().Canvas)("d",{selection:!1,width:1,height:1}),Sw="canvas1",nB=sB=Ow,(Fu=nB).randomProperty="test",ju=document.getElementById("canvas-absolute-container-1"),Ru=document.getElementById("canvas-absolute-container-2"),Uu=ju,zu=sl?12:0,lB(sB),document.addEventListener("keydown",(function(t){switch(t.key.toLowerCase()){case"escape":ic()?window.toggleExportDatasetsPopup():rc()?window.toggleSettingsPopup():ac()?window.cancelLabellingProcess():dc()?UA(!0):hc()?$T()?ZT(!0):(WT=1,KT()):fc()?PE():pc()?UN():cc()?(window.createNewPolygon(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove"))):uc()?(window.createNewBndBox(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove"))):$l()?(window.addPoints(document.getElementById("add-points-button")),HN.upperCanvasEl.dispatchEvent(new Event("mousemove"))):Gl()?(window.removePoint(document.getElementById("remove-points-button")),HN.upperCanvasEl.dispatchEvent(new Event("mousemove"))):_w()&&(gv.innerHTML=Lv,ww());break;case"enter":ac()?_N():fc()?window.approveRemoveImage():pc()?UN():cc()&&!Gl()&&Tp.length>2&&Kp();break;case"delete":case"backspace":sO()||_w()||(tT(),window.removeLabel(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove")));break;case"arrowup":n="ArrowUp",ac()?ON(n):_w()?Ew(n):Ig()&&xw(n);break;case"arrowdown":e="ArrowDown",ac()?ON(e):_w()?Ew(e):Ig()&&xw(e);break;case"arrowleft":sO()||_w()||lc()||(tT(),window.switchImage("previous"));break;case"arrowright":sO()||_w()||lc()||(tT(),window.switchImage("next"));break;case"q":sO()||_w()||"disabled"===Hf||(window.onmousedown(),cc()&&!Gl()||ql()&&"polygon"===Zl()?function(){if(!Fp){if(Pp&&"tempPoint"===Pp.shapeName)return;Fp=!0}if(Dp){var t=kp.getPointer(Dp.e||Dp);if(Dp.target&&"invisiblePoint"===Dp.target.shapeName)Tp.length>2&&Kp();else if(t.x===Hp.x&&t.y===Hp.y||Dp.target&&"tempPoint"===Dp.target.shapeName||Wp&&Number.isNaN(t.x));else{if(!t.x||!t.y){var e=Mu(),n=kp.getPointer(e);if(!n.x||!n.y)return;t=kp.getPointer(e)}Sc(!1),Zp(t),Wp=!0}}}():(window.createNewPolygon(),tf(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove"))));break;case"e":sO()||_w()||Wl()||"disabled"===Vf||(tT(),window.editShapes(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove")));break;case"w":WN();break;case"r":KN();break;case"a":sO()||_w()||lc()||"disabled"===Uf||(tT(),$l()?function(){if(Ab)Vb(Mb);else if(Db){if(Mb&&Mb.target&&"point"===Mb.target.shapeName){var t=Sb.getPointer(Mb.e);cg(Mb&&Mb.target,t),Ab=!0,kb=!0,Lb=!1}}else{if(Pb&&"point"===Pb.shapeName){var e=Sb.getPointer(Mb.e);cg(Pb,e),Ab=!0,kb=!0,Lb=!1}else if(Cb){var n=Sb.getPointer(Mu());cg(Cb,n),Ab=!0,kb=!0,Lb=!1}Db=!0}}():(window.addPoints(document.getElementById("add-points-button")),tf(),HN.upperCanvasEl.dispatchEvent(new Event("mousemove"))))}var e,n})),document.addEventListener("keyup",(function(t){switch(t.key.toLowerCase()){case"w":YN();break;case"r":VN=!0}})),"Linux"===MN?(WN=GN,YN=function(){}):(WN=$N,YN=XN),jN.forEach((function(t){t.element=document.getElementById(t.id)})),RN(),$f=document.getElementById("edit-shapes-button"),Wf=document.getElementById("remove-points-button"),Yf=document.getElementById("add-points-button"),Gf=document.getElementById("remove-labels-button"),Xf=document.getElementById("zoom-in-button"),Kf=document.getElementById("zoom-out-button"),Zf=document.getElementById("create-bounding-box-button"),qf=document.getElementById("create-polygon-button"),Jf=document.getElementById("remove-images-button"),cp(),dp(),mp(),yp(),ep(),sp(),_p(),fp(),ap(),rp(),function(){window.editShapes=IB.bind(this,lN),window.createNewBndBox=xB.bind(this,JT),window.createNewPolygon=EB.bind(this,nN,QT),window.addPoints=SB.bind(this,tN),window.removePoint=IB.bind(this,nN),window.cancel=xB.bind(this,eN),window.toggleExportDatasetsPopup=nT.bind(this,rN),window.uploadDatasets=OB.bind(this,[eN,nT,iN]),window.displayMachineLearningModal=OB.bind(this,[eN,nT,oN]),window.zoom=iT.bind(this,aN),window.toggleSettingsPopup=nT.bind(this,sN)}(),mN=document.getElementById("labeller-modal-input"),yN=document.getElementById("labeller-modal-options"),pN=al(),function(){Ah.apply(this,arguments)}(),window.labelShape=_N,window.cancelLabellingProcess=xN,window.labellerModalKeyDown=function(t){"Enter"!==t.key&&window.setTimeout(fN(uN().mark((function e(){var n,r,i;return uN().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Space"===t.code&&EN(mN.selectionStart),bN&&(bN.style.backgroundColor="",bN.id="",bN=null),n=!gN&&yN.childNodes[1]?(gN=!0,yN.childNodes[1].childNodes):yN.childNodes[0].childNodes,r=0;case 4:if(!(r<n.length)){e.next=17;break}if(n[r].childNodes[0].childNodes[0].childNodes[0].innerHTML!==mN.value){e.next=14;break}return o=n[r].childNodes,a=1,i=function(t){if(Array.isArray(t))return t}(o)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(o,a)||function(t,e){if(t){if("string"==typeof t)return dN(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dN(t,e):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),bN=i[0],e.next=10,qd()[r].color.label;case 10:return bN.style.backgroundColor=e.sent,bN.id="used",Ay(bN,yN),e.abrupt("break",17);case 14:r+=1,e.next=4;break;case 17:vN();case 18:case"end":return e.stop()}var o,a}),e)}))),pN)},window.labellerModalInputPaste=function(){window.setTimeout((function(){var t=mN.selectionStart;mN.value=Ey(mN.value),EN(t)}),0)},window.selectLabelOption=function(t,e,n){bN&&(bN.id="",bN.style.backgroundColor="");var r=e.parentElement.parentElement;r.id="used",r.style.backgroundColor=n,bN=r,mN.value=t,vN()},Kk=document.getElementById("settings-popup"),Zk=document.getElementById("settings-button"),document.getElementById("settings-popup-movable-objects-checkbox").checked=!0,document.getElementById("settings-popup-continuous-drawing-checkbox").checked=!0,document.getElementById("settings-popup-labels-visibility-checkbox").checked=!0,window.toggleMovableObjects=BN.bind(document.getElementById("settings-popup-movable-objects-checkbox"),Yw),window.toggleContinuousDrawing=BN.bind(document.getElementById("settings-popup-continuous-drawing-checkbox"),LN),window.toggleLabelsVisibility=BN.bind(document.getElementById("settings-popup-labels-visibility-checkbox"),kN),window.toggleBoundingBoxCrosshairDropdown=Xk,window.hideBoundingBoxCrosshairDropdown=NN,Wk=document.getElementById("settings-popup"),Vk=document.getElementById("bounding-box-crosshair-dropdown"),Hk=document.getElementById("settings-popup-bounding-box-crosshair-dropdown-trigger"),document.getElementById("settings-popup-bounding-box-crosshair-visibility-checkbox").checked=!0,window.toggleCrosshair=function(t,e){t(),e&&(this.checked=!this.checked)}.bind(document.getElementById("settings-popup-bounding-box-crosshair-visibility-checkbox"),(function(){mc()?("active"===ip()&&(bd(CN),_u(CN)),Kc(!1),Xc(!1)):("active"===ip()&&Id(CN),Kc(!0),Xc(!0))})),window.crosshairColorChange=nd,window.onmousedown=function(t){var e;tT(t),Sl&&(function(t){return pk&&pk!==t}(e=t.target)&&function(t){return fk&&fk!==t}(e)&&function(t){return!t.id.startsWith("MLLabel")||Nk(t.id)!==Nk(pk.id)}(e))&&zk()},window.trackMouseMoveEvents=Cu,window.mouseOverCanvas=function(){Au=!0,Lu&&(Lu(),Tu())},window.mouseOutCanvas=function(){Au=!1,ku&&ku()},(Nd=document.getElementById("window-dim")).addEventListener("mousemove",Cu),xy("edit-shapes-button","edit-shapes-button-popover"),xy("create-bounding-box-button","bounding-box-button-popover"),xy("create-polygon-button","polygon-button-popover"),xy("add-points-button","add-points-button-popover"),xy("remove-points-button","remove-points-button-popover"),xy("upload-datasets-button","upload-datasets-button-popover"),xy("export-datasets-button","export-datasets-button-popover"),xy("machine-learning-button","machine-learning-button-popover"),xy("zoom-in-button","zoom-in-button-popover"),xy("zoom-out-button","zoom-out-button-popover"),xy("settings-button","settings-button-popover"),xy("upload-images-button","upload-images-button-popover"),xy("remove-labels-button","remove-labels-button-popover"),xy("remove-images-button","remove-images-button-popover"),xy("previous-image-button","previous-image-button-popover"),xy("next-image-button","next-image-button-popover"),xy("title-github-mark-container","github-mark-button-popover"),document.getElementById("left-side-bar").addEventListener("mouseenter",(function(){py=!1})),sl&&document.getElementById("upload-images-button").addEventListener("mouseup",(function(){uy=!0})),eL=document.getElementById("export-datasets-button"),tL=document.getElementById("export-datasets-popup-export-button"),nL=document.getElementById("export-datasets-popup-parent"),aL=document.getElementsByClassName("bounding-box-format-option-text"),sL=document.getElementsByClassName("bounding-box-format-option-checkbox"),iL=document.getElementsByClassName("generic-format-option-text"),oL=document.getElementsByClassName("generic-format-option-checkbox"),document.getElementById("export-datasets-popup-coco-json-format-checkbox").checked=!1,document.getElementById("export-datasets-popup-vgg-json-format-checkbox").checked=!1,document.getElementById("export-datasets-popup-csv-format-checkbox").checked=!1,document.getElementById("export-datasets-popup-voc-xml-format-checkbox").checked=!1,document.getElementById("export-datasets-popup-yolo-txt-format-checkbox").checked=!1,window.selectExportDatasetsFormat=function(t,e){(function(t){qA?t===rL?(qA=!1,uL()):(rL.checked=!1,rL=t):(rL=t,JA||(tL.classList.add("popup-proceed-button"),tL.classList.replace("popup-label-button-disabled","popup-label-button"),JA=!0),qA=!0)})(e),dk=dk===t?"":t},window.exportDataset=function(){var t=!0;switch(dk){case"COCO JSON":!function(){VL.apply(this,arguments)}();break;case"VGG JSON":GL();break;case"CSV":QL();break;case"VOC XML":lk();break;case"YOLO TXT":uk();break;default:t=!1}t&&(hL(),$c(!1))},window.cancelexportDatasets=function(){hL()},window.displayExportPopupInformationPopover=function(t){Vh().polygons>0&&function(t){QA=t,setTimeout((function(){if(QA===t){var e=document.getElementById("format-option-checkbox-popover-".concat(t)),n=document.getElementById("format-option-checkbox-arrow-".concat(t));e.style.display="block",n.style.display="block"}}),0)}(t)},window.removeExportPopupInformationPopover=function(t){QA=null;var e=document.getElementById("format-option-checkbox-popover-".concat(t)),n=document.getElementById("format-option-checkbox-arrow-".concat(t));e.style.display="none",n.style.display="none"},window.saveData=function(){!function(){WL.apply(this,arguments)}()},document.getElementById("canvas-wrapper-parent").addEventListener("wheel",(function(t){Pm.scrollTop+=t.deltaY,Pm.scrollLeft+=t.deltaX,Wm=!0}),{passive:!0}),DE=document.getElementById("remove-images-modal-parent"),document.getElementById("remove-images-modal-checkbox").checked=!1,eB=VE,window.approveRemoveImage=RE.bind({removeImageCallback:eB}),window.cancelRemoveImage=UE,window.toggleDoNotShowRemoveImageModalAgain=zE,HA=document.getElementsByTagName("body")[0],VA=document.getElementById("image-list-drag-and-drop-overlay"),WA=document.getElementById("window-drag-and-drop-overlay"),YA=document.getElementById("upload-datasets-drag-and-drop-overlay"),GA=document.getElementById("upload-datasets-modal-upload-datasets-table-2"),XA(WA,["dragenter","dragover","dragleave","drop"],(function(t){t.preventDefault(),t.stopPropagation()})),XA(WA,["drop"],(function(t){$A&&($A===VA?eO(t.dataTransfer):$A===YA&&HI(t.dataTransfer))})),XA(WA,["dragleave","drop","mouseup"],(function(){$A&&($A.style.display="none",WA.style.display="none"),$A=null})),XA(HA,["dragenter"],(function(){sO()?dc()&&5===MA&&(WA.style.display="block",YA.style.height="".concat(GA.clientHeight-8,"px"),YA.style.display="block",$A=YA):(WA.style.display="block",VA.style.display="block",$A=VA)})),function(){Cw=document.getElementById("image-name");var t,e,n=(t=document.getElementsByClassName("image-switch-button"),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Tw(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tw(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());Bw=n[0],Nw=n[1]}(),Dw/=il(),window.cancelPulseAnimation=function(t){Xw===t&&Kw&&(Kw=!1)},!sl&&window.screen.width<1500?(fx(2),Lf(2),Nf(2),Bg(2)):(fx(2.3),Lf(2.3),Nf(2.3),Bg(2.4)),window.onbeforeunload=function(t){jl&&(function(t){t.preventDefault(),t.returnValue=""}(t),qw(document.getElementById("export-datasets-button"),"rgb(253 234 180)","white",4,!1),$c(!1))},window.Snackbar=Ma,Ea.init({onData:function(t){var n=t&&t.data||{};if(n.token&&n.cu){localStorage.setItem("token",n.token);var r=e(n.token),i=r&&r.exp?r.exp:0;localStorage.setItem("expired",i.toString()),localStorage.setItem("last_request",Math.floor(Date.now()/1e3).toString()),localStorage.setItem("rf_token",n.rf_token),localStorage.setItem("current_user",JSON.stringify(n.cu)),localStorage.setItem("taskId",JSON.stringify(n.taskId));var o=JSON.stringify(n.taskId);if(tB!==o){var a=document.getElementById("welcome-modal-contour-animation-parent");a.style.display="none",Ma.show("Loading Images...","loading"),function(){gB.apply(this,arguments)}(),localStorage.setItem("labelOptions",""),Ma.show("Loading Categories...","loading"),Ov=document.getElementById("label-list"),Bv=document.getElementById("label-list-overflow-parent"),Sv=document.getElementById("labeller-modal-options"),sl?(Tv=171,Nv=206):(Tv=170,Nv=205),bg=Ov,_g=Bv,fv=al(),_B(),setTimeout(TB(LB().mark((function t(){return LB().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Ma.show("Fetching Annotation...","loading"),t.next=4,ME({endpoint:"image_annotations/getImageAnnotationsByTask/".concat(o),payload:{},method:"POST",fetchImages:!0,annotationFileName:"task.json"});case 4:a.style.display="inline-block",FN(),window.closeWelcomeModal=UN,window.switchLanguage=zN,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.error("Failed to load COCO dataset:",t.t0),Ma.hide();case 12:case"end":return t.stop()}}),t,null,[[0,8]])}))),300)}tB=o}console.log("Received args from Python:",t)},onReady:function(){console.log("Streamlit component is ready!")}}),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("title-github-mark-container").addEventListener("click",(function(t){Ea.send({status:"OK",message:"go_to_tasks_list",data:{action:"back"}})}))}))})()})();